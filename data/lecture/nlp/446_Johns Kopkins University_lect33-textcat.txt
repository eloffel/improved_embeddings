text categorization 

(actually, methods apply for 
categorizing anything into 
fixed categories     tagging, 
wsd, pp attachment ...) 

why text categorization? 

(cid:1)(cid:1) is it spam? 
(cid:1)(cid:1) is it spanish? 
(cid:1)(cid:1) is it interesting to this user? 

(cid:1)(cid:1) news filtering 
(cid:1)(cid:1) helpdesk routing 

(cid:1)(cid:1) is it interesting to this nlp program? 

(cid:1)(cid:1) e.g., should my calendar system try to interpret this 

email as an appointment (using info. extraction)? 

(cid:1)(cid:1) where should it go in the directory? 

(cid:1)(cid:1) yahoo! / open directory / digital libraries 
(cid:1)(cid:1) which mail folder?  (work, friends, junk, urgent ...) 

600.465 - intro to nlp - j. eisner 

1 

600.465 - intro to nlp - j. eisner 

2 

measuring performance 

measuring performance 

(cid:1)(cid:1) classification accuracy: what % of 
messages were classified correctly? 

(cid:1)(cid:1) is this what we care about? 

overall 
accuracy 

system 1 

95% 

accuracy 
on spam 
99.99% 

accuracy 

on gen 
90% 

system 2 

95% 

90% 

99.99% 

(cid:1)(cid:1) which system do you prefer? 

(cid:1)(cid:1) precision =  

good messages kept 
  all messages kept 

(cid:1)(cid:1) recall = 

good messages kept 
 all good messages 

trade off precision vs. recall by setting threshold 
measure the curve on annotated dev data (or test data) 
choose a threshold where user is comfortable 

600.465 - intro to nlp - j. eisner 

3 

600.465 - intro to nlp - j. eisner 

4 

f-measure = 1 / (average(1/precision, 1/recall)) 

measuring performance 

high threshold: 

all we keep is good, 

but we don   t keep much 

ok for search 
engines (maybe) 

would prefer 

to be here! 

point where 

precision=recall 

(sometimes 

reported) 

low threshold: 

keep all the good stuff, 
but a lot of the bad too 

more complicated cases of 
measuring performance 

(cid:1)(cid:1) for multi-way classifiers: 

(cid:1)(cid:1) average accuracy (or precision or recall) of 2-way 

distinctions: sports or not, news or not, etc. 

(cid:1)(cid:1) better, estimate the cost of different kinds of errors 

(cid:1)(cid:1) e.g., how bad is each of the following? 

(cid:1)(cid:1) putting sports articles in the news section 
(cid:1)(cid:1) putting fashion articles in the news section 
(cid:1)(cid:1) putting news articles in the fashion section 

(cid:1)(cid:1) now tune system to minimize total cost 

ok for spam 
filtering and 
legal search 

(cid:1)(cid:1) for ranking systems: 

which articles are most sports-like? 
which articles / webpages most relevant? 

(cid:1)(cid:1) correlate with human rankings? 
(cid:1)(cid:1) get active feedback from user? 
(cid:1)(cid:1) measure user   s wasted time by tracking clicks? 

600.465 - intro to nlp - j. eisner 

5 

600.465 - intro to nlp - j. eisner 

6 

how to categorize? 

how to categorize? (supervised)  

subject: would you like to . . . . 

. . drive a new vehicle for free ? ? ? this is not hype or a 
hoax , there are hundreds of people driving brand new cars , 
suvs , minivans , trucks , or rvs . it does not matter to us 
what type of vehicle you choose . if you qualify for our 
program , it is your choice of vehicle , color , and 
options . we don ' t care . just by driving the vehicle , you 
are promoting our program . if you would like to find out 
more about this exciting opportunity to drive a brand new 
vehicle for free , please go to this site : http : / / 209 . 
134 . 14 . 131 / ntr to watch a short 4 minute audio / video 
presentation which gives you more information about our 
exciting new car program . if you do n't want to see the 
short video , but want us to send you our information package 
that explains our exciting opportunity for you to drive a new 
vehicle for free , please go here : http : / / 209 . 134 . 
14 . 131 / ntr / form . htm we would like to add you the 
group of happy people driving a new vehicle for free . happy 
motoring .  

we   ve seen lots of options in this course! 

1.(cid:1) build id165 model of each category 
(cid:1)(cid:1) question: how to classify test message?   
(cid:1)(cid:1) answer: bayes    theorem 

600.465 - intro to nlp - j. eisner 

7 

600.465 - intro to nlp - j. eisner 

8 

how to categorize? (supervised)  

how to categorize? (supervised)  

we   ve seen lots of options in this course! 

we   ve seen lots of options in this course! 

2.(cid:1) represent each document as a vector 

(must choose representation and distance measure; use svd?) 
(cid:1)(cid:1) question: how to classify test message? 
(cid:1)(cid:1) answer 1: category whose centroid is most similar 

 

 (may not work well if category is diverse) 

(cid:1)(cid:1) answer 2: cluster each category into subcategories 

 
 
 

 (then use answer 1 to pick a subcategory) 
 (return the category that the subcategory is in) 
 (this can also be useful for id165 models) 

(cid:1)(cid:1) answer 3: just look at labels of nearby training docs 
 (e.g., let the k nearest neighbors vote     flexible!) 
 (maybe the closer ones get a bigger vote) 

 
 

3.(cid:1) treat it like word-sense disambiguation 

a)(cid:1) vector model     use all the features (we just saw this) 
b)(cid:1) decision list     use single most indicative feature 
c)(cid:1) naive bayes     use all the features, weighted by how 

well they discriminate among the categories 

d)(cid:1) decision tree     use some of the features in sequence 
e)(cid:1) other options from machine learning, like id88, 
support vector machine (id166), id28,     

features matter more than which machine learning method 

600.465 - intro to nlp - j. eisner 

9 

600.465 - intro to nlp - j. eisner 

10 

review: vector model 

review: decision lists 

slide courtesy of d. yarowsky (modified) 

these two documents are similar: 
after normalizing vector length to 1, 

close in euclidean space (similar endpoint) 
high dot product (similar direction) 

(0,    0,    3,    1,    0,    7,            . . .                 1,    0)  

(0,    0,    1,    0,    0,    3,            . . .                 0,    1)  

can play lots of encoding games when creating vector: 
remove function words or reduce their weight 
use features other than unigrams  

to disambiguate a token of lead : 

(cid:1)(cid:1) scan down the sorted list 
(cid:1)(cid:1) the first cue that is found 

gets to make the decision all 
by itself 

(cid:1)(cid:1) not as subtle as combining 
cues, but works well for wsd 
cue   s score is its log-likelihood ratio:   
log [ p(cue | sense a)  [smoothed] 
       / p(cue | sense b) ] 

600.465 - intro to nlp - j. eisner 

11 

600.465 - intro to nlp - j. eisner 

12 

review: combining cues via naive bayes 

review: combining cues via naive bayes 

slide courtesy of d. yarowsky (modified) 

slide courtesy of d. yarowsky (modified) 

these stats  

come from term 
papers of known 

authorship 

(i.e., supervised 

training) 

1  

1  

2  

2  

   naive bayes    model for classifying text 

(note the naive independence assumptions!) 

600.465 - intro to nlp - j. eisner 

13 

600.465 - intro to nlp - j. eisner 

would this kind of 
sentence be more 

typical of a student a 
paper or a student b 

paper?  

14 

id90 

features besides unigrams 

example from manning & sch  tze 

is this reuters article an earnings announcement? 

2301/7681 = 0.3 of all docs 

contains    cents    (cid:1) 2 times  

1607/1704 = 0.943 
contains 
   versus     
 (cid:1) 2 times  

contains 
   versus     
< 2 times  

1398/1403  

= 0.996 
   yes    
600.465 - intro to nlp - j. eisner 

209/301  
= 0.694 

split on feature 
that reduces our 
uncertainty most 
contains    cents    < 2 times  

694/5977 = 0.116 

contains 

   net     

 (cid:1) 1 time  

contains 

   net     

< 1 time  

422/541  
= 0.780 

272/5436  
= 0.050 

   no    
15 

(cid:1)(cid:1) all these approaches (except id165 model) can use 

   interesting    features, not just unigrams. 

(cid:1)(cid:1) there   s generally a heuristic feature selection problem 

(cid:1)(cid:1) use some very large set of features defined by a template 
(cid:1)(cid:1) maybe restrict to features that look useful in isolation? 
(cid:1)(cid:1) add features greedily, one at a time 

(cid:1)(cid:1) measure or guess expected improvement of each feature 
(cid:1)(cid:1) make sure to smooth when doing this     why? 

(cid:1)(cid:1) at the end, remove features that hurt performance on held-out data 

(cid:1)(cid:1) what does spamassassin use? 

600.465 - intro to nlp - j. eisner 

16 

spamassassin features 

spamassassin features 

100 
4.0 
3.994 
3.970 
3.910 
3.801 
3.472 
3.437 
3.371 
3.350 
3.284 
3.283 
3.261 
3.251 
3.250 
3.200 

 from: address is in the user's black-list  
 sender is on www.habeas.com habeas infringer list  
 invalid date: header (timezone does not exist)  
 written in an undesired language  
 listed in razor2, see http://razor.sf.net/  
 subject is full of 8-bit characters  
 claims compliance with senate bill 1618  
 exists:x-precedence-ref  
 reverses aging  
 claims you can be removed from the list  
 'hidden' assets  
 claims to honor removal requests  
 contains "stop snoring"  
 received: contains a name with a faked ip-address  
 received via a relay in list.dsbl.org  
 character set indicates a foreign language  

3.198 
3.193 
3.180 
3.140 
3.123 
3.090 
3.072 
3.044 
3.009 
3.005 
2.991 
2.975 
2.968 
2.932 
2.900 
2.879 

 forged eudoramail.com 'received:' header found  
 free investment  
 received via sbled relay, seehttp://www.spamhaus.org/sbl/  
 character set doesn't exist  
 dig up dirt on friends  
 no mx records for the from: domain  
 x-mailer contains malformed outlook expressversion  
 stock disclaimer statement  
 apparently, not multi level marketing  
 bulk email software fingerprint (jpfree) found inheaders  
 exists:complain-to  
 bulk email software fingerprint (vc_ipa) found inheaders  
 invalid date: year begins with zero  
 mentions spam law "h.r. 3113"  
 received forged, contains fake aol relays  
 asks for credit card details  

600.465 - intro to nlp - j. eisner 

17 

600.465 - intro to nlp - j. eisner 

18 

spamassassin features 

spamassassin features 

2.858 
2.851 
2.842 
2.826 
2.800 
2.800 
2.796 
2.795 
2.786 
2.784 
2.783 
2.782 
2.782 
2.748 
2.744 
2.737 

 to: username at front of subject  
 claims you actually asked for this spam  
 to header contains 'recipient' marker  
 compare rates  
 received: says mail bounced all around the world  
 mentions spam law "uce-mail act"  
 received via buggy smtp server (mdaemon2.7.4sp4r)  
 bulk email software fingerprint (stormpost) foundin headers  
 broken cgi script message  
 message-id generated by a spam tool  
 urges you to call now  
 tells you it's an ad  
 rand found, spammer forgot to run the random-idgenerator  
 cable converter  
 no age restrictions  
 possible porn - celebrity porn  

2.782 
2.782 
2.748 
2.744 
2.737 
2.735 
2.730 
2.726 
2.720 
2.720 
2.702 
2.695 
2.693 
2.668 
2.660 
2.658 

 tells you it's an ad  
 rand found, spammer forgot to run the random-idgenerator  
 cable converter  
 no age restrictions  
 possible porn - celebrity porn  
 bulk email software fingerprint (jixing) found inheaders  
 dnsbl: sender is confirmed spam source  
 bulk email software fingerprint (mmailer) found inheaders  
 exists:x-encoding  
 dnsbl: sender is confirmed open relay  
 sec-mandated penny-stock warning -- thanks sec 
 claims you can be removed from the list  
 removes wrinkles  
 offers a stock alert  
 listed in dcc, seehttp://rhyolite.com/anti-spam/dcc/  
 common pyramid scheme phrase (1)  

600.465 - intro to nlp - j. eisner 

19 

600.465 - intro to nlp - j. eisner 

20 

spamassassin features 

spamassassin features 

2.654 
2.645 
2.642 
2.640 
2.639 
2.622 
2.620 
2.611 
2.566 
2.565 
2.541 
2.516 
2.513 
2.510 
2.502 
2.500 

 offers a free consultation  
 bulk email software fingerprint (evamail) foundin headers  
 possible porn - amateur porn  
 listed in razor1, see http://razor.sf.net/  
 subject contains lots of white space  
 exists:x-x  
 received via a relay in relays.visi.com  
 bulk email software fingerprint (imktg) found inheaders  
 compete for your business  
 possible porn - pay site  
 contains "cbyi"  
 spam phrases score is 34 to 55 (high)  
 possible porn - lesbian site  
 contains 'free installation' with capitals  
 free grant money  
 listed in pyzor, see http://pyzor.sf.net/  

2.500 
2.500 
2.500 
2.500 
2.500 
2.500 
2.496 
2.492 
2.488 
2.456 
2.450 
2.445 
2.443 
2.425 
2.421 
2.398 

 tre     zawiera 'odes(cid:1)anie z dopiskiem nie'  
 tre     zawiera 'artykul 25 ust 2 punkt 2'  
 tresc zawiera 'przepraszamy za zaj  ty czas'  
 tresc zawiera 'zam  w teraz!!!'  
 tresc zawiera 'je  eli (pa  stwo) nie   yczycie(sz)sobie'  
 tresc zawiera 'aby usun     adres e-mail...'  
 spam tool pattern in mime boundary  
 'message-id' was added by a relay  
 bulk email software fingerprint (screwup 1) found inheaders  
 university diplomas  
 character set indicates foreign language body  
 claims you can be removed from the list  
 headers include 3 consecutive 8-bit characters  
 date: is 24 to 48 hours after received: date  
 'from' juno.com does not match 'received' headers  
 meet singles  

600.465 - intro to nlp - j. eisner 

21 

600.465 - intro to nlp - j. eisner 

22 

spamassassin features 

spamassassin features 

2.362 
2.361 
2.357 
2.357 
2.351 
2.334 
2.331 
2.314 
2.292 
2.290 
2.280 
2.276 
2.261 
2.250 
2.242 
2.240 

 serious enquiries only.  
 claims auto-email removal  
 mime-version header (oddly capitalized)  
 a "microsoft" header was found  
 x-mailer contains "outlook express 3.14159"  
 possible porn - rape  
 "collect child support" scam  
 claims spam helps the environment  
 free leads  
 fake name used in smtp helo command  
 received via a relay in ipwhois.rfc-ignorant.org  
 possible porn - cum shot  
 amazing stuff  
 received via a relay in orbs.dorkslayers.com  
 possible porn - mega porn  
 offers pure profit  

2.216 
2.210 
2.209 
2.206 
2.203 
2.203 
2.202 
2.180 
2.176 
2.170 
2.145 
2.114 
2.109 
2.100 
2.088 
2.083 

 received contains a faked helo hostname  
 tells you it's an ad  
 uses control sequences inside a url's hostname  
 claims spam helps the environment  
 tells you to 'take action now!'  
 cash bonus  
 from an address @btamail.net.cn  
 exists:x-library  
 contains "my wife, jody" testimonial  
 possible porn - nasty girls  
 promise you ...!  
 claims to be in accordance with some spam law  
 uses a numeric ip address in url  
 possible porn - live porn  
 discusses search engine listings  
 html comments which obfuscate text  

600.465 - intro to nlp - j. eisner 

23 

600.465 - intro to nlp - j. eisner 

24 

spamassassin features 

spamassassin features 

2.066 
2.066 
2.060 
2.052 
2.044 
2.030 
2.022 
2.011 
2 
2 
2 
2 
2 
2 
2 
2 

 information on getting a larger penis or breasts (2)  
 contains 'free preview' with capitals  
 a foreign language charset used in headers  
 says "we strongly oppose the use of spam email"  
 trail of received: headers seems to be forged  
 credit bureaus  
 claims compliance with house bill 4176  
 no investment  
 tre     zawiera 'adres e-mail zostalznaleziony/pozyskany'  
 tre     zawiera 'adres (e-mail) pochodzi zog  lnodost  pnych....'  
 tre     zawiera 'ustawy o ochronie danychosobowych'  
 tresc zawiera 'temat usun'  
 tresc zawiera 'na podstawie adresow e-mailpublicznie...'  
 tresc zawiera 'kliknij w poni  szy link'  
 tresc zawiera 'do nabycia u nas'  
 tresc zawiera 'wys(cid:1)a   pusty mail'  

2 
2 
2 
2 
2 
2 
2 
2 
2 
2 
1.995 
1.984 
1.977 
1.952 
1.910 
1.904 

 tresc zawiera 'wiadomo     nadano na podstawie...'  
 tresc zawiera 'wiadomo     nadano jednorazowo...'  
 tresc zawiera 'usun z bazy'  
 tresc zawiera 'prosimy o przes(cid:1)anie pustego maila'  
 tresc zawiera 'je  eli nie interesuj  ...'  
 tresc zawiera 'je  eli nie chcesz (otrzymywac)...'  
 tresc zawiera '...prosimy o zwrotny e-mail...'  
 tresc zawiera '...adres z bazy...'  
 dice cumplir con la ley  
 clama cumplir con la normativa spam  
 serious cash  
 viagra and other drugs  
 if only it were that easy  
 nigerian scam key phrase (million dollars)  
 drastically reduced  
 contains "temple kiff"  

600.465 - intro to nlp - j. eisner 

25 

600.465 - intro to nlp - j. eisner 

26 

spamassassin features 

spamassassin features 

1.889 
1.889 
1.880 
1.858 
1.856 
1.844 
1.842 
1.839 
1.836 
1.831 
1.824 
1.813 
1.778 
1.772 
1.754 
1.744 

 forged 'by gw05' 'received:' header found  
 credit card offers  
 find out anything  
 contains "gentle ferocity"  
 spam phrases score is 21 to 34 (high)  
 possible porn - porn membership  
 potential earnings  
 bulk email software fingerprint (group mail) foundin headers  
 once in a lifetime, apparently  
 offers free (often stolen) passwords  
 contains 'dear (something)'  
 possible porn - porn password  
 message is 90-100% html tags  
 sent using a trial version of communigate  
 date: is 48 to 96 hours after received: date  
 to: has no local-part before @ sign  

1.739 
1.721 
1.697 
1.690 
1.687 
1.686 
1.682 
1.681 
1.663 
1.640 
1.640 
1.639 
1.631 
1.625 
1.598 
1.591 

 talk about a check or money order  
 contains 'for only pennies a day'  
 spam tool pattern in mime boundary  
 form for checking email address  
 subject: contains advertising tag  
 talks about bulk email  
 claims you registered with some kind of partner  
 long distance phone offer  
 additional income  
 spam phrases score is 05 to 08 (medium)  
 contains 'subject to credit approval'  
 talks about tracing by ssn  
 possible porn - xxx photos  
 contains 'earn (dollar) something per week'  
 message-id has characters often found in spam  
 'x-mailer' line contains gibberish  

600.465 - intro to nlp - j. eisner 

27 

600.465 - intro to nlp - j. eisner 

28 

spamassassin features 

spamassassin features 

1.591 
1.578 
1.552 
1.548 
1.546 
1.544 
1.539 
1.526 
1.523 
1.518 
1.506 
1.505 
1.503 
1.500 
1.500 
1.500 

 cures baldness  
 subject starts with "hello"  
 "refinance your home"  
 doing something with my income  
 date: is 96 hours or more before received: date  
 to: address contains spaces  
 cents on the dollar  
 uses a username in a url  
 secretly recorded  
 invalid date: header (not rfc 2822)  
 from and to are same (3)  
 valid-looking to "undisclosed-recipients"  
 exists:date-warning  
 temat zawiera 'oferta'  
 tre     zawiera 'zaprosi   pa  stwo'  
 tre     zawiera 'szanowni pa  stwo'  

1.500 
1.500 
1.500 
1.495 
1.490 
1.486 
1.479 
1.470 
1.466 
1.459 
1.435 
1.410 
1.404 
1.404 
1.400 
1.394 

 tresc zawiera 'publicznie dost  pny (email)'  
 tresc zawiera 'upowaznienie do wystawiania fakturvat...'  
 tresc zawiera '...mail z tematem...'  
 possible registry spammer  
 possible porn - adult web sites  
 'one time mailing' doesn't mean it isn't spam  
 forged hotmail.com 'received:' header found  
 talks about opting in  
 possible porn - barely legal  
 claims compliance with senate bill 1618  
 direct marketing  
 money back guarantee.  
 date: is 48 to 96 hours before received: date  
 instructions on how to increase something  
 nos chillan para decir que es gratis  
 plugs viagra  

600.465 - intro to nlp - j. eisner 

29 

600.465 - intro to nlp - j. eisner 

30 

spamassassin features 

spamassassin features 

1.385 
1.382 
1.373 
1.370 
1.368 
1.363 
1.361 
1.352 
1.337 
1.332 
1.319 
1.314 
1.306 
1.302 
1.301 
1.293 

 spam phrases score is 08 to 13 (medium)  
 url uses words and phrases which indicate porn (4)  
 as seen on national tv!  
 message text disguised using base-64 encoding  
 date: is 3 to 6 hours after received: date  
 score with babes!  
 from and to are same (6)  
 'from' yahoo.com does not match 'received' headers  
 spam phrases score is 13 to 21 (high)  
 not intended for residents of xyz.  
 faked to "undisclosed-recipients"  
 from and to are same (5)  
 only thing addresses on cd are useful for is spam  
 contains "vjestika aphrodisia"  
 lower monthly payment  
 html comment has 3 consecutive 8-bit characters  

1.285 
1.283 
1.275 
1.274 
1.273 
1.270 
1.269 
1.253 
1.253 
1.247 
1.246 
1.231 
1.226 
1.224 
1.218 
1.201 

 from: does not include a real name  
 uses a dotted-decimal ip address in url  
 contains link without http:// prefix  
 'subject' contains g.a.p.p.y-t.e.x.t  
 marketing solutions  
 spam tool pattern in mime boundary  
 'prestigious non-accredited universities'  
 spam tool pattern in mime boundary  
 incorporates a tracking id number  
 from and to are same (2)  
 contains 'free sample' with capitals  
 claims compliance with spam regulations  
 online pharmacy  
 received via smtpd32 server (smtpd32-n.n)  
 includes a form which will send an email  
 while you sleep  

600.465 - intro to nlp - j. eisner 

31 

600.465 - intro to nlp - j. eisner 

32 

spamassassin features 

spamassassin features 

1.187 
1.175 
1.148 
1.146 
1.138 
1.131 
1.119 
1.118 
1.112 
1.110 
1.099 
1.098 
1.092 
1.084 
1.084 
1.078 

 uses non-standard port number for http  
 possible porn - in all caps  
 subject contains a unique id  
 bulk email software fingerprint (hash 2) found inheaders  
 get paid  
 contains 'urgent business'  
 why pay more?  
 requires initial investment  
 javascript to open a new window  
 exists:x-list-unsubscribe  
 date: is 6 to 12 hours after received: date  
 subject starts with dollar amount  
 increase your ejaculation!  
 subject: contains korean unsolicited email tag  
 spam phrases score is 03 to 05 (medium)  
 plugs "herbal viagra"  

1.187 
1.175 
1.148 
1.146 
1.138 
1.131 
1.119 
1.118 
1.112 
1.110 
1.099 
1.098 
1.092 
1.084 
1.084 
1.078 

 uses non-standard port number for http  
 possible porn - in all caps  
 subject contains a unique id  
 bulk email software fingerprint (hash 2) found inheaders  
 get paid  
 contains 'urgent business'  
 why pay more?  
 requires initial investment  
 javascript to open a new window  
 exists:x-list-unsubscribe  
 date: is 6 to 12 hours after received: date  
 subject starts with dollar amount  
 increase your ejaculation!  
 subject: contains korean unsolicited email tag  
 spam phrases score is 03 to 05 (medium)  
 plugs "herbal viagra"  

600.465 - intro to nlp - j. eisner 

33 

600.465 - intro to nlp - j. eisner 

34 

spamassassin features 

spamassassin features 

1.077 
1.057 
1.045 
1.042 
1.039 
1.038 
1.023 
1.021 
1.009 
1 
1 
1 
1 
1 
1 
1 

 apparently, you'll be amazed  
 people just leave money laying around  
 bulk email software fingerprint (egroups) found inheaders  
 date: is 24 to 48 hours before received: date  
 talks about direct email  
 unneeded encoding of html tags  
 javascript to move windows around  
 no such thing as a free lunch (3)  
 save big money  
 frequent spam content  
 frequent spam content  
 frequent spam content  
 frequent spam content  
 frequent spam content  
 frequent spam content  
 frequent spam content  

1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 

 filename is just a '\#'; probably a js trick  
 old murkowski disclaimer  
 obfuscated action attribute in html form  
 mentions monsterhut.com  
 form for verifying email address  
 contains signature of unregistered spam tool  
 publicidad por e-mail  
 contiene la palabra gratis en las cabeceras  
 exists:x-fix  
 to: non-existent 'investors' address  
 subject contains 'your membership exchange'  
 spam tool pattern in mime boundary  
 reply-to: is empty  
 received via a relay in bl.spamcop.net  
 received via rssed relay, seehttp://www.mail-abuse.org/rss/  
 received via rbled relay, seehttp://www.mail-abuse.org/rbl/  

600.465 - intro to nlp - j. eisner 

35 

600.465 - intro to nlp - j. eisner 

36 

spamassassin features 

spamassassin features 

1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 

 received from first hop dialup, seehttp://www.mail-abuse.org/dul/  
 received from dialup, seehttp://www.mail-abuse.org/dul/  
 received contains fake 'post.cz' hostname  
 from an address @email-publisher.com  
 bulk email software fingerprint (xmailer tag) foundin headers  
 bulk email software fingerprint (pascual) found inheaders  
 bulk email software fingerprint (ebizmailer) foundin headers  
 bulk email software fingerprint (charset) found inheaders  
 bulk email software fingerprint (yam) found inheaders  
 bulk email software fingerprint (v3161) found inheaders  
 bulk email software fingerprint (uproar) found inheaders  
 bulk email software fingerprint (seednet) found inheaders  
 bulk email software fingerprint (powercampaign)found in headers  
 bulk email software fingerprint (opt-in lightning)found in headers  
 bulk email software fingerprint (matchmaker) foundin headers  
 bulk email software fingerprint (mail bomber)found in headers  

1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 

 bulk email software fingerprint (henry su) found inheaders  
 bulk email software fingerprint (grmessagequeue)found in headers  
 bulk email software fingerprint (epaper) found inheaders  
 bulk email software fingerprint (diffondicool)found in headers  
 bulk email software fingerprint (currentmailer)found in headers  
 bulk email software fingerprint (caretop) found inheaders  
 bulk email software fingerprint (campaign blaster)found in headers  
 bulk email software fingerprint ("outlook") found inheaders  
 'received:' contains huge hostname  
 'from' contains more than one address  
 tre     jest od wydawnictwa verlag dashofer(spamerzy)  
 tresc zawiera 'za zaliczeniem pocztowym...'  
 /zam.wieni/i  
 /zainteresowan.{0,50}wsp..prac/  
 /www\.adresy\.org/i  
 /specjaln.{0,50}ofert/i  

600.465 - intro to nlp - j. eisner 

37 

600.465 - intro to nlp - j. eisner 

38 

spamassassin features 

spamassassin features 

1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 

 presentaci  n de un nuevo producto.  
 porno gratis.  
 para dejar de fumar  
 pago contra reembolso.  
 nos animan a contestar si estamos interesados  
 no se puede considerar spam  
 mensaje enviado por error  
 mas informacion.  
 los regalos no existen, salvo de nuestros amigos.  
 inmigraci  n legal (?) a los estados unidos  
 informacion y reserva  
 if you want to subscribe...  
 if you send an email you will be optout  
 imperativos en mayusculas.  
 haga click aqui.  
 ha sido ganador.  

1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 

 ha sido ganador.  
 el correo como alternativa comercial  
 conviertete en spammer.  
 claims you can opt-out  
 claims you can be removed in spanish  
 claims not to be spam in spanish  
 alta en buscadores hispanos.  
 spam software: poplaunch  
 mentions cyber firepower!, a spam-tool  
 will not belive your eyes!  
 well known spam senders  
 wants you to do business online  
 things incredible  
 they keep your money -- no refund!  
 terms and conditions  
 suspect you might have received the message bymistake  

600.465 - intro to nlp - j. eisner 

39 

600.465 - intro to nlp - j. eisner 

40 

spamassassin features 

spamassassin features 

1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 

 slashed price  
 sspl found, spammer forgot to run the random-idgenerator  
 psychics scam  
 prices won't last  
 possible porn - galleries of pictures  
 plugs "natural viagra"  
 outstanding values  
 orders shipped by priority mail  
 no middleman  
 no medical exams  
 no gimmick  
 nigerian scam, cfhttp://www.snopes2.com/inboxer/scams/nigeria.htm  
 new customers only  
 more internet traffic  
 luxury car  
 list removal information  

1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
0.982 
0.977 
0.975 

 get started now  
 cyber firepower! rant about losing dropboxes  
 confidentially on all orders  
 claims you were on a list  
 claims to listen to some removal request list  
 claims not to be spam  
 claims not to be selling anything  
 claims compliance with spam regulations  
 claims compliance with spam regulations  
 claims "this is not junk email"  
 cell phone cancer scam  
 buying judgements  
 achieve wealth  

 talks about future mailings  
 excessive quoted-printable encoding in body  
 multi level marketing mentioned  

600.465 - intro to nlp - j. eisner 

41 

600.465 - intro to nlp - j. eisner 

42 

spamassassin features 

spamassassin features 

0.968 
0.959 
0.954 
0.952 
0.948 
0.947 
0.935 
0.931 
0.910 
0.908 
0.906 
0.904 
0.900 
0.893 
0.885 
0.882 

 possible porn - hardcore porn  
 missing to: header  
 from: has no local-part before @ sign  
 targeted traffic / email addresses  
 information on getting a larger penis or breasts  
 message is 70-90% html tags  
 free membership  
 to: and cc: contain similar domains at least 8 times  
 received contains a (dollar) variable reference  
 claims compliance with spam regulations  
 'from' ebay.com does not match 'received' headers  
 unlimited in caps  
 accept credit cards  
 from: ends in numbers  
 'message-id' was added by a relay (3)  
 gives information about an opportunity  

0.874 
0.863 
0.853 
0.849 
0.849 
0.849 
0.838 
0.820 
0.817 
0.810 
0.796 
0.795 
0.781 
0.781 
0.781 
0.779 

 don't delete me! nooooo!!!!  
 fast viagra delivery  
 frequent spam content  
 exists:x-stormpost-to  
 missing date: header  
 list removal information  
 consolidate debt and credit  
 financial freedom  
 lots and lots of cc: headers  
 received via a relay in multihop.dsbl.org  
 contains word 'guarantee' in all-caps  
 claims you can be removed from the list  
 spam phrases score is 00 to 01 (low)  
 html message is a saved web page  
 claims compliance with senate bill 1618  
 exists:x-pmflags  

600.465 - intro to nlp - j. eisner 

43 

600.465 - intro to nlp - j. eisner 

44 

spamassassin features 

spamassassin features 

0.676 
0.673 
0.670 
0.666 
0.665 
0.658 
0.653 
0.646 
0.643 
0.630 
0.628 
0.622 
0.620 
0.614 
0.612 
0.612 

 see for yourself  
 you'd better read all of this spam!  
 easy terms  
 contains "toner cartridge"  
 human growth hormone  
 trying to sell insurance online  
 no experience needed!  
 claims to be legitimate email  
 subject: starts with advertising tag  
 frequent spam content  
 illegal nigerian transactions (2)  
 subject guaranteed  
 dnsbl: sender ip address in in a dialup block  
 possible porn - must be 18  
 tells you to click on a url (in caps)  
 free quote  

0.611 
0.610 
0.608 
0.606 
0.605 
0.601 
0.601 
0.600 
0.594 
0.573 
0.563 
0.560 
0.556 
0.553 
0.552 
0.549 

 refinance home  
 received via a relay in relays.ordb.org  
 contains 'free access' with capitals  
 uses a long numeric ip address in url  
 have you been turned down?  
 includes a url link to send an email with the subject'remove'  
 no credit check  
 no inventory  
 to: has a malformed address  
 be your own boss  
 information on how to work at home (2)  
 contains mail-in order form  
 one hundred percent guaranteed  
 guaranteed stuff  
 information on mortgage rates  
 frequent spam content  

600.465 - intro to nlp - j. eisner 

45 

600.465 - intro to nlp - j. eisner 

46 

spamassassin features 

spamassassin features 

0.544 
0.542 
0.542 
0.541 
0.539 
0.536 
0.531 
0.525 
0.521 
0.518 
0.514 
0.513 
0.511 
0.506 
0.506 
0.505 

 from and to the same (1)  
 bulk email software fingerprint (screwup 2) found inheaders  
 gives an excuse for why message was sent  
 avoid bankruptcy  
 includes a link for aol users to click  
 form for changing email address  
 apply online (with capital o)  
 list removal information  
 date: is 12 to 24 hours after received: date  
 asks you for your signature on a form  
 subject talks about losing pounds  
 lower interest rates  
 do it today  
 unsecured credit/debt  
 the best rates  
 from: starts with nums  

0.505 
0.505 
0.503 
0.503 
0.501 
0.501 
0.500 
0.496 
0.489 
0.488 
0.483 
0.466 
0.466 
0.459 
0.448 
0.448 

 spam phrases score 55 or higher (high)  
 impotence cure  
 vacation offers  
 spam is 100% natural?!  
 possible porn - free porn  
 possible porn - best, largest porn collections  
 spam phrases score is 01 to 02 (low)  
 can not be combined with any other offer  
 message contains disclaimer  
 claims to be legal  
 subject is all capitals  
 ms-outlook-style to "<undisclosed-recipient:;>" 
 date: is 96 hours or more after received: date  
 spam tool pattern in mime boundary  
 date: is 6 to 12 hours before received: date  
 says: "to be removed, reply via email" or similar  

600.465 - intro to nlp - j. eisner 

47 

600.465 - intro to nlp - j. eisner 

48 

spamassassin features 

spamassassin features 

0.448 
0.446 
0.443 
0.443 
0.435 
0.434 
0.431 
0.431 
0.429 
0.428 
0.426 
0.424 
0.424 
0.422 
0.422 
0.421 

 possible porn - porn fest  
 sent with 'x-priority' set to high  
 local part containing a "4u" variant  
 html font color is magenta  
 join millions of americans  
 asks for a billing address  
 nigerian scam key phrase ((dollar) nnn.nm/usdnnn.n m/us(dollar) n
 claims "this is not spam"  
 sent with 'x-msmail-priority' set to high  
 subject contains "free" in caps  
 exists:x-mailingid  
 mime section missing boundary  
 asks you to fill out a form  
 html font color is unknown to us  
 domain name containing a "4u" variant  
 html font color is yellow  

0.419 
0.419 
0.418 
0.417 
0.416 
0.415 
0.414 
0.414 
0.414 
0.414 
0.413 
0.412 
0.411 
0.410 
0.408 
0.407 

 includes a link to send a mail with a subject  
 standard investment opportunity spam  
 javascript to hide urls in browser  
 offers extra cash  
 eliminate bad credit  
 lose weight spam  
 subject talks about savings  
 subject ends with lots of white space  
 offers a full refund  
 gives instructions for removal from list  
 free cell phone  
 frontpage used to create the message  
 offers a limited time offer  
 claims you can be removed from the list  
 attempt at obfuscating the word "mortgage"  
 opportunity - what a deal!  

600.465 - intro to nlp - j. eisner 

49 

600.465 - intro to nlp - j. eisner 

50 

spamassassin features 

spamassassin features 

0.407 
0.406 
0.406 
0.406 
0.405 
0.405 
0.405 
0.405 
0.405 
0.404 
0.404 
0.404 
0.403 
0.402 
0.402 
0.402 

 nobody's perfect  
 tells you about a strong buy  
 html table has thick border  
 buy direct  
 instant access button  
 html font color is green  
 html font color is cyan  
 discusses money making  
 asks you to click below (in caps)  
 uses open redirection service  
 exists:x-serverhost  
 claims you can be removed from the list  
 list removal information  
 message with extraneous content-type:...type=header  
 there is no obligation.  
 talks about lots of money  

0.402 
0.401 
0.401 
0.400 
0.400 
0.400 
0.400 
0.386 
0.382 
0.380 
0.369 
0.365 
0.364 
0.364 
0.362 
0.362 

 contains 'get it now' with capitals  
 supplies are limited  
 no such thing as a free lunch (2)  
 you won't be dissapointed.  
 possible porn - offers instant access  
 nigerian scam key phrase ((dollar)nn,nnn,nnn.nn)  
 how dear can you be if you don't know my name?  
 no strings attached  
 html with embedded plugin object  
 received via a relay in relays.osirusoft.com  
 off shore scams  
 information on how to work at home (1)  
 possible porn - hot, nasty, wild, young  
 contains word 'amazing' in all-caps  
 exists:x-smtpexp-version  
 there is no catch.  

600.465 - intro to nlp - j. eisner 

51 

600.465 - intro to nlp - j. eisner 

52 

spamassassin features 

spamassassin features 

0.361 
0.360 
0.344 
0.336 
0.335 
0.334 
0.333 
0.333 
0.330 
0.329 
0.329 
0.327 
0.327 
0.326 
0.325 
0.324 

 sent to you@you.com or similar  
 received from first hop dialup listed inrelays.osirusoft.com  
 html font color is same as background  
 subject: is empty or missing  
 font size +2 and up or 3 and up  
 lowest price  
 html font color has unusual name  
 contains word 'profits' in all-caps  
 html font color is gray  
 what are you waiting for  
 one time rip off  
 talks about prizes  
 free website  
 to: and cc: contain similar usernames at least 5 times  
 html font face is not a commonly used face  
 quoted-printable line longer than 76 characters  

0.324 
0.323 
0.323 
0.323 
0.321 
0.321 
0.321 
0.320 
0.320 
0.320 
0.319 
0.318 
0.317 
0.315 
0.315 
0.315 

 from: has a malformed address  
 exists:x-smtpexp-registration  
 message-id has no @ sign  
 no such thing as a free lunch (1)  
 url of cgi script called "unsubscribe" or "remove"  
 satisfaction guaranteed  
 "if you do not wish to receive any more"  
 message contains a lot of ^m characters  
 exists:x-esmtp  
 claims you are a winner  
 from: contains numbers mixed in with letters  
 can't live without?  
 html mail with non-white background  
 talks about email marketing  
 save big money  
 html font color is red  

600.465 - intro to nlp - j. eisner 

53 

600.465 - intro to nlp - j. eisner 

54 

spamassassin features 

spamassassin features 

0.315 
0.313 
0.313 
0.312 
0.312 
0.308 
0.308 
0.307 
0.307 
0.306 
0.305 
0.304 
0.302 
0.302 
0.302 
0.301 

 3 whole lines of yelling detected  
 save up to  
 domain registration spam body  
 tells you to click on a url  
 subject: domain registration spam subject  
 url contains spamhaus signature: numbered servers  
 name brand  
 asks you to click below  
 act now! don't hesitate!  
 talks about hidden charges  
 message is 50-70% html tags  
 while supplies last  
 easily-executed javascript code  
 subject starts with "free"  
 html font color not within safe 6x6x6 palette  
 no purchase necessary  

0.301 
0.300 
0.300 
0.300 
0.300 
0.299 
0.296 
0.294 
0.281 
0.279 
0.245 
0.242 
0.239 
0.229 
0.224 
0.222 

 auto-executing javascript code  
 dnsbl: sender is a spamware site or vendor  
 significant savings  
 no fees  
 click-to-remove with php/asp action found  
 x-mailer header indicates a non-spam mua (thebat!)  
 'remove' url contains an email address  
 being a member  
 investment decision  
 date: is 3 to 6 hours before received: date  
 contains a privacy statement  
 tells you how to stop further spam  
 month trial offer  
 save (dollar) (dollar) (dollar)  
 sign up free today  
 to: repeats address as real name  

600.465 - intro to nlp - j. eisner 

55 

600.465 - intro to nlp - j. eisner 

56 

spamassassin features 

spamassassin features 

0.218 
0.217 
0.216 
0.214 
0.212 
0.212 
0.212 
0.212 
0.212 
0.211 
0.211 
0.211 
0.211 
0.211 
0.210 
0.210 

 congratulations - you've been scammed?  
 2 whole lines of yelling detected  
 weekend getaway  
 trying to offer you something  
 member stuff  
 html font color is missing hash (  
 doesn't ask any questions  
 contains 'special promotion'  
 a whole line of yelling detected  
 to: is empty  
 winning in caps  
 stuff on sale  
 only (dollar) (dollar) (dollar)  
 encourages you to waste no time in ordering  
 who really wins?  
 html font face has excess capital characters  

0.209 
0.207 
0.207 
0.206 
0.205 
0.204 
0.204 
0.204 
0.203 
0.203 
0.203 
0.203 
0.202 
0.201 
0.201 
0.201 

 free dvd  
 date: is 12 to 24 hours before received: date  
 javascript code  
 header with all capitals found  
 html font color is blue  
 winner in caps  
 html font face is not a word  
 fantastic deal  
 includes a 'remove' email address  
 includes a url link to send an email  
 possible porn - large number of movies, pics  
 free offer  
 contains a tollfree number  
 illegal nigerian transactions (1)  
 image tag with an id code to identify you  
 frame wanted to load outside url  

600.465 - intro to nlp - j. eisner 

57 

600.465 - intro to nlp - j. eisner 

58 

spamassassin features 

spamassassin features 

0.201 
0.181 
0.150 
0.146 
0.144 
0.137 
0.134 
0.127 
0.123 
0.117 
0.114 
0.114 
0.111 
0.108 
0.107 
0.106 

 contains 'for only' some amount of cash  
 x-mailer header indicates a non-spam mua(outlook express)  
 spam tool pattern in mime boundary  
 cancel at any time!  
 talks about social security numbers  
 click to perform an action on an account  
 gives an excuse about why you were sent this spam  
 nigerian scam key phrase ((dollar) nnn.nm/usdnnn.n m/us(dollar) n
 contains a comment with nothing but unique id  
 no claim forms  
 'message-id' was added by a relay (2)  
 free trial  
 they're just giving it away!  
 message-id has characters indicating spam  
 dear you@you.com?  
 free hosting  

0.105 
0.104 
0.103 
0.102 
0.101 
0.101 
0.100 
0.100 
0.100 
0.100 
0.038 
0.032 
0.031 
0.028 
0.014 
0.009 

 contains an ascii-formatted form  
 i wonder how many emails they sent in error...  
 url of page called "unsubscribe"  
 subject has exclamation mark and question mark  
 offer expires  
 contains 'dear somebody'  
 javascript protocol in a uri  
 message includes microsoft executable program  
 mime filename does not match content  
 spam tool pattern in mime boundary  
 'received:' has 'may be forged' warning  
 message-id is not valid, according to rfc 2822  
 offers coupon  
 please read this! please oh please oh please!  
 shopping spree  
 contains a line >=199 characters long  

600.465 - intro to nlp - j. eisner 

59 

600.465 - intro to nlp - j. eisner 

60 

spamassassin features 

spamassassin features 

 spam tool pattern in mime boundary  
 risk free. suuurreeee....  
 reserves the right  
 expect to earn  
 contains 'g.a.p.p.y-t.e.x.t'  
 gift certificate  
 big bucks  

0.009 
0.009 
0.008 
0.008 
0.005 
0.004 
0.003 
-0.006   x-mailer header indicates a non-spam mua(outlook)  
-0.019   from majordomo  
-0.026   missing from: header  
-0.069   free money!  
-0.075   forwarded email (outlook style)  
-0.102   email came from some known mailing list software  
-0.118   mailer daemon failure notice (1)  
-0.123   message text is over 40k in size  
-0.133   came via internet mail service plugin  

-0.137   correct for mime 'null block'  
-0.143   x-mailer header indicates a non-spam mua(netscape)  
-0.196   mailing list headers are suspicious  
-0.200   exists:resent-to  
-0.207   exists:x-authentication-warning  
-0.211   where are you working at?  
-0.215   exists:x-accept-language  
-0.217   subject contains newsletter header (list)  
-0.231   'message-id' was added by yahoo.com, that's ok  
-0.233   exists:x-loop  
-0.240   x-mailer header indicates a non-spam mua (aol) 
-0.298   to: repeats local-part as real name  
-0.300   user-agent header indicates a non-spam mua(entourage)  
-0.301   short signature present (no empty lines)  
-0.302   exists:x-mailing-list  
-0.304   long signature present (empty lines)  

600.465 - intro to nlp - j. eisner 

61 

600.465 - intro to nlp - j. eisner 

62 

spamassassin features 

spamassassin features 

-0.484   subject contains a month name - probable newsletter(2)  
-0.484   subject contains a month name - probable newsletter  
-0.489   common footer for hotmail  
-0.506   contains a pgp-signed message  
-0.506   appears to be from yahoo groups  
-0.506   yahoo! groups message  
-0.518   exists:user-agent  
-0.522   has a valid-looking references header  
-0.558   forwarded email  
-0.601   user-agent header indicates a non-spam mua(mozilla)  
-0.605   user-agent header indicates a non-spam mua(outlook express)  
-0.616   subject contains newsletter header (news)  
-0.641   message-id indicates a non-spam mua (pine)  
-0.695   contains what looks like an 'e-mail disclaimer'  
-0.708   contains a pgp-signed message (signature attached)  
-0.708   message text is over 20k in size  

-0.725   subject contains a frequency - probable newsletter  
-0.754   x-mailer header indicates a non-spam mua(t-offline)  
-0.832   contains what looks like a quoted email text  
-0.847   exists:in-reply-to  
-0.864   has an approved-by moderated list header  
-0.897   user-agent header indicates a non-spam mua(imp)  
-0.949   contains what looks like a patch from diff -u  
-0.986   mailer daemon failure notice (2)  
-1 
-1 
-1 
-1 
-1 
-1 
-1 
-1 

 x-mailer header indicates a non-spam mua (gnus) 
 user-agent header indicates a non-spam mua(gnus)  
 subject contains newsletter header (in review)  
 from: looks like us telephone number  
 recommended page from mailbits.com  
 talks about tracking numbers  
 common footer for msn  
 a mailman confirm-your-address message  

600.465 - intro to nlp - j. eisner 

63 

600.465 - intro to nlp - j. eisner 

64 

spamassassin features 

spamassassin features 

-1.118   common footer for msn  
-1.128   contains a password retrieval system  
-1.152   something about registration  
-1.176   user-agent header indicates a non-spam mua(mutt)  
-1.301   came from msn communities  
-1.334   exists:x-cron-env  
-1.433   subject looks like order info  
-1.451   from the mailer-daemon  
-1.596   subject contains a date  
-1.628   contains what looks like an email attribution  
-1.696   common footer for hotmail  
-1.780   x-mailer header indicates a non-spam mua (applemail)  
-1.801   common footer for hotmail  
-1.898   sent through microsoft's listbuilder service  
-2.092   short signature present (empty lines)  
-2.170   common footer for hotmail  

-2.174   message from ebay  
-2.442   contains what looks like a patch from diff -c  
-2.473   looks like a debian bts bug  
-2.475   common footer for hotmail  
-2.550   subject is an ebay question  
-2.699   looks like a bugzilla bug  
-2.863   user-agent header indicates a non-spam mua(kmail)  
-3.052   non-spam yahoo! groups banner found  
-3.127   long signature present (no empty lines)  
-4.0 
-6 
-10 
-10 
-20 
-100 
-100 

 uses the habeas warrant mark(http://www.habeas.com/)  
 user is listed in 'whitelist_to'  
 not matt's scripts formmail.pl  
 bonded sender, seehttp://www.bondedsender.org/referred.html  
 user is listed in 'more_spam_to'  
 user is listed in 'all_spam_to'  
 from: address is in the user's white-list  

600.465 - intro to nlp - j. eisner 

65 

600.465 - intro to nlp - j. eisner 

66 

how to categorize? (unsupervised)  

how to categorize? (semisupervised)  

what if we don   t have supervised training data? 

what if we have only a little supervised data? 

might try an iterative approach as usual: 
1.(cid:1) cluster the messages 
2.(cid:1) train id165, naive bayes, or decision list 
model to discriminate among the clusters 

3.(cid:1) use the model to reassign messages to clusters 

(most will stay put but some will move) 
4.(cid:1) return to step 2 until convergence 

could try id64 like yarowsky   s wsd: 
1.(cid:1) start with very small, rather accurate classes 
2.(cid:1) train id165, naive bayes, or decision list 

model to discriminate among the classes 
3.(cid:1) augment each class with new messages  

that the model confidently classifies there 
(maybe also move or remove some existing messages) 

4.(cid:1) return to step 2 until convergence 

600.465 - intro to nlp - j. eisner 

67 

600.465 - intro to nlp - j. eisner 

68 

how to categorize? (adaptive)  

how to categorize? (hierarchical)  

what if we gradually get more new data over time? 
(cid:1)(cid:1) user feedback (active or passive) on our classifications 
(cid:1)(cid:1) news / email systems that categorize, or judge relevance 

(cid:1)(cid:1) add new articles / messages to training data 
(cid:1)(cid:1) if they   re unlabeled (no supervision), label them automatically 

(cid:1)(cid:1) add them only if we   re confident?  add them fractionally, like em? 

so model adjusts over time: 
(cid:1)(cid:1) e.g., change the cluster centroids or id165 parameters 
(cid:1)(cid:1) may want to weight the more recent data more heavily, 

since the future is more like the present than the past 
(cid:1)(cid:1) e.g., message from k days ago has weight 0.9k  (k=0,1,2, ...) 
(cid:1)(cid:1) so today   s model = today   s data + 0.9 * yesterday   s model 

what if we are putting document in a yahoo! category? 
(cid:1)(cid:1) there are thousands of categories (at least)     too hard! 

(cid:1)(cid:1) choose one of the 14 top-level categories, e.g., science 
(cid:1)(cid:1) then use a science-specific classifier to choose one of the 
54 second-level categories within science   (14 are symlinks) 

(cid:1)(cid:1) continue working your way down the tree ... 

(cid:1)(cid:1) when you can   t classify with high confidence, ask a human 

(then use the human   s answer as more training data) 

600.465 - intro to nlp - j. eisner 

69 

600.465 - intro to nlp - j. eisner 

70 

