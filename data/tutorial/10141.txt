0
1
0
2

 
t
c
o
8
1

 

 
 
]
h
p
-
c
o
s
.
s
c
i
s
y
h
p
[
 
 

3
v
0
9
6
0

.

9
0
8
0
:
v
i
x
r
a

comparing community structure to characteristics

in online collegiate social networks

amanda l. traud1

,

2, eric d. kelsic3, peter j. mucha1

,

4,

and mason a. porter5

,

6

1carolina center for interdisciplinary applied mathematics,

department of mathematics,

university of north carolina, chapel hill, nc 27599-3250, usa

2carolina population center,

university of north carolina, chapel hill, nc 27516-2524, usa
3department of systems biology, harvard medical school,

harvard university, boston, ma 02115, usa

4institute for advanced materials, nanoscience & technology,

university of north carolina, chapel hill, nc 27599-3216, usa

5oxford centre for industrial and applied mathematics,
mathematical institute, university of oxford, ox1 3lb, uk

6candyn complexity centre, university of oxford, ox1 1hb, uk

abstract. we study the structure of social networks of students by examining
the graphs of facebook    friendships    at    ve american universities at a single point in
time. we investigate each single-institution network   s community structure and em-
ploy graphical and quantitative tools, including standardized pair-counting methods, to
measure the correlations between the network communities and a set of self-identi   ed
user characteristics (residence, class year, major, and high school). we review the
basic properties and statistics of the pair-counting indices employed and recall, in
simpli   ed notation, a useful analytical formula for the z-score of the rand coe   cient.
our study illustrates how to examine di   erent instances of social networks constructed
in similar environments, emphasizes the array of social forces that combine to form
   communities,    and leads to comparative observations about online social lives that
can be used to infer comparisons about o   ine social structures. in our illustration
of this methodology, we calculate the relative contributions of di   erent characteristics
to the community structure of individual universities and subsequently compare these
relative contributions at di   erent universities, measuring for example the importance
of common high school a   liation to large state universities and the varying degrees of
in   uence common major can have on the social structure at di   erent universities. the
heterogeneity of communities that we observe indicates that these networks typically
have multiple organizing factors rather than a single dominant one.

1. introduction. social networks are a ubiquitous part of everyday life. al-
though they have long been studied by social scientists [36], the mainstream aware-
ness of their ubiquity has arisen only recently, in part because of the rise of social
networking sites (snss) on the world wide web. since their introduction, snss such
as friendster, myspace, facebook, orkut, linkedin, and hundreds of others have at-
tracted hundreds of millions of users, many of whom have integrated snss into their
daily lives to communicate with friends, send e-mails, solicit opinions or votes, or-
ganize events, spread ideas,    nd jobs, and more [2]. facebook, an sns launched in
february 2004, now overwhelms numerous aspects of everyday life, having become an
especially popular obsession among college and high school students (and, increas-
ingly, among other members of society) [1, 2, 23, 25]. facebook members can create
self-descriptive pro   les that include links to the pro   les of their    friends,    who may
or may not be o   ine friends. facebook requires that anybody who one wants to add
as a friend con   rm the relationship, so facebook friendships de   ne a network (graph)
of reciprocated ties (undirected edges) that connect individual users.

1

the global organization of real-world networks typically includes coexisting mod-
ular (horizontal) and hierarchical (vertical) organizational structures [5, 8, 28, 30, 33].
myriad papers have attempted to interpret such organization through the compu-
tation of structural modules or communities [8, 33], which are de   ned in terms of
mesoscopic groups of nodes with more internal connections (between nodes in the
group) than external connections (between nodes in the group and nodes in other
groups). such communities, which are not typically identi   ed in advance, are often
considered to not be merely structural modules but are also expected to have func-
tional importance because of the large number of common ties among nodes in a
community. additionally, prior empirical studies have observed some correspondence
between communities and    ground truth    groups in social and biological networks [33].
for example, communities in social networks might correspond to circles of friends
or business associates, communities in the world wide web might encompass pages
on closely-related topics, communities in metabolic networks have been used to    nd
functional modules [15], and communities have been used to identify and measure
political polarization in legislative processes in the u.s. congress [37, 38].

as discussed at length in two recent review articles [8, 33] and references therein,
the classes of techniques available to detect communities are both numerous and di-
verse; they include hierarchical id91 methods such as single linkage id91,
centrality-based methods, local methods, optimization of quality functions such as
modularity and similar quantities, spectral partitioning, likelihood-based methods,
and more. in addition to remarkable successes on benchmark examples, investiga-
tions of community structure have led to success stories in diverse application areas   
including the reconstruction of college football conferences [11] and the investigation of
such structures in algorithmic rankings [6]; the analysis of committee assignments [32],
legislation cosponsorship [38], and voting blocs [37] in the u.s. congress; the exami-
nation of functional groups in metabolic networks [15]; the study of ethnic preferences
in school friendship networks [13]; and the study of social structures in mobile-phone
conversation networks [31].

in this paper, we investigate the community structures of complete facebook
networks whose links represent reciprocated    friendships    between user pages (nodes)
within each of    ve american universities during a single-time snapshot in september
2005. our primary aim in this paper is to use an unsupervised algorithm to compute
the community structure   consisting of clusters of nodes   of these universities and
to determine how well the demographic labels included in the data correspond to
algorithmically computed clusters. we consider only ties between students at the
same institution, yielding    ve separate realizations of university social networks and
allowing us to compare the structures at di   erent institutions.

the rest of this paper is organized as follows.

in section 2, we describe our
principal methods: the employed community-detection method, visual exploration
of identi   ed communities, and standardized pair-counting methods for quantitative
comparison of communities with demographic data. we present more details about
the data in section 3. we then describe and discuss the results that we obtained for
the    ve institutions in section 4 before concluding in section 5.

2. comparing communities. a social network with a single type of connec-
tion between nodes can be represented as an adjacency matrix a whose elements aij
give the weight of the tie between nodes i and j. the facebook networks we study
are unweighted, so aij     {0, 1}, where the value is 1 if a tie exists and 0 if it does not.
the resulting tangle of nodes and links, which we show for the california institute of

2

technology (caltech) facebook network in fig. 2.1, can obfuscate any organizational
structure that might be present.

fig. 2.1.

[color] (left) a fruchterman-reingold visualization [10] of the largest connected
component of the caltech facebook network. node shapes and colors indicate house a   liation
(gray dots denote users who did not identify an a   liation), and the edges are randomly shaded for
easy viewing. (right) magni   cation of a portion of the network. clusters of nodes with the same
color/shape suggest that house a   liation a   ects the existence of friendships/edges.

one approach to analyzing such data is to employ exponential random graph
models (see, e.g., [35]), statistically    tting an underlying model for the presence of
links. while such models (which can incorporate local network features) are poten-
tially valuable for understanding the microscopic processes that underly the links
between individual nodes, we take a di   erent approach, focusing on groups of friends
that form structural    communities      groups of nodes that contain more internal con-
nections (links between nodes in the group) than external connections (between nodes
of the group and nodes in other groups) [8, 33]. our approach is motivated in part by
the features of the caltech data (discussed in detail in sections 3 and 4). although
precise results obviously vary from one model speci   cation to another, performing a
id28 on the dyads (pairs of nodes) yields comparable coe   cients for link
presence between users from the same house as from the same high school. however,
there are signi   cantly more users sharing the former than the latter at caltech. while
common high school is unsurprisingly important at the dyadic level (in the rare cases
that it happens), common house a   liation is apparently much more important for
understanding structures that consist of larger groups of individuals. accordingly, our
goal in this section is to discuss how to compare the composition of algorithmically-
determined communities to groups de   ned based on common user characteristics.

we identify communities using spectral optimization [29] (followed by supplemen-
tary kernighan-lin node-swapping steps [21]) of the    modularity    quality function
i ), where eij denotes the fraction of ends of edges in group i for which

q = pi(eii     b2
the other end of the edge lies in group j and bi = pj eij is the fraction of all ends

of edges that lie in group i. high values of modularity correspond to community
assignments with greater numbers of intra-community links than expected at random
(with respect to a particular null model [8, 29, 33]). numerous other community de-
tection methods are also available. however, our focus in the present paper is on

3

studying communities after they are obtained, and our methods can be applied to
the output of any community-detection algorithm in which each node is assigned to
precisely one community. such an assignment of nodes to communities constitutes
a partition of the original graph. we seek a means to compare an algorithmically-
obtained partition to partitions based on information that we have about facebook
user characteristics   class year, dormitory (house), high school, and major   as a
means of exploring the roles of such characteristics in the social structures of each
institution. an online social network is an imperfect proxy for an o   ine network,
but our comparisons are nevertheless expected to yield interesting insights about the
social life at the universities we study.

2.1. visual comparisons. the demographic composition of communities is
sometimes clear from visual inspection. this is the case with the community structure
of the caltech network, which agrees closely with its undergraduate    house    system.
in fig. 2.2, we show a force-directed layout of caltech   s 12 communities (yielding
.
= 0.4002), which we show as pies with area proportional to the
a modularity of q
number of constituent nodes. purple slices signify individuals who did not identify a
house a   liation.

1000

900

800

700

600

500

400

300

200

100

0
0.778

0.7785

0.779

0.7795

0.78

0.7805

0.781

0.7815

0.782

0.7825

fig. 2.2. [color] (left) force-directed layout of caltech communities, each represented by a pie
chart with area proportional to population and colored by house a   liation (with purple signifying
missing information). (right) distribution of rand coe   cients comparing these 12 caltech commu-
nities with random permutations of partitions into 9 house categories (including    missing   ). for
comparison, we plot in red a gaussian with the sample mean and variance. as our smallest data
set, this yields the most extreme deviation from the gaussian in our permutation tests.

unlike other universities (see section 4), we    nd that house a   liation is the
primary organizing principle of the communities in the caltech network, which is
what we expected because caltech   s house structure is so dominant socially. indeed,
each pie in fig. 2.2 is dominated by members of one house. moreover, many pies
include a signi   cant number of people who identify    avery house    as their a   liation
(dark blue), which is expected because of its di   erent residency rules (members of
all houses could live in avery at the time of this data). given the promotion of
avery house to o   cial house status after our data snapshot, it is natural to wonder
if community detection on current data would    nd a community dominated by avery.
investigating the formation of such a community using longitudinal data would be
even more interesting, but is beyond the scope of our data. in principle, one can also
make limited predictions based on the compositions of the communities about users

4

who did not volunteer their house a   liation.

despite this demonstration of the utility of visualizing communities, it is typically
necessary to perform quantitative analyses after detecting communities, as caltech is
unusual among universities in having a single characteristic that aligns so closely with
its communities. for other institutions, we observe more heterogeneous communities,
and it is typically di   cult to visually assess which characteristics best correlate with
the communities or even whether there is any strong correlation at all. to investigate
the social organization of communities at such universities, it is thus essential to quan-
titatively compare the detected communities with the available demographic groups.
such considerations apply broadly to community detection in most networks [33].

2.2. pair counting. as discussed in refs. [20, 26], methods to compare graph
partitions can be classi   ed roughly into three groups: (1) pair counting, (2) cluster
matching, and (3) information-theoretic techniques. cluster matching might be par-
ticularly problematic in the present context, as the numbers and sizes of groups vary
signi   cantly across the comparisons, which makes the essential identi   cations across
partitions rather di   cult. we focus on a collection of pair-counting methods, in part
because of their convenient algebraic description, as one just needs to count the ways
that pairs of nodes are grouped across two partitions. that same simplicity can also
be a weakness, as it can present a serious interpretation di   culty because of the un-
clear range of    good    scores. however, as we will show in section 2.3, standardization
of pair-counting scores provides a uni   ed interpretation of a number of seemingly dis-
parate pair-counting measures and is particularly useful for the present setting. we
also compare these results with those obtained using variation of information (vi) [26].
a pair-counting method de   nes a similarity score by counting each pair of nodes
drawn from the n nodes of a network according to whether the pair falls in the same
or in di   erent groups in each partition. pair-counting methods comprise a subset of
a more general class of association measures that can be used for studying unordered
(i.e., categorical) contingency tables [18, 22, 26]. we denote the counts of node pairs
in each classi   cation as w11 (pairs classi   ed together in both partitions), w10 (same in
the    rst but di   erent in the second), w01 (di   erent in the    rst but same in the second),
and w00 (di   erent in both). the sum of these quantities is, by de   nition, equal to the

total number m of node pairs: m = w11 + w10 + w01 + w00 = (cid:0)n

two partitions of a network, one can obtain many di   erent pair-counting similarity
coe   cients using di   erent algebraic combinations of the w     counts.

2(cid:1) = n(n     1)/2. given

we    rst consider the rand similarity coe   cient sr = (w11 + w00)/m [34], which
counts the fraction of node pairs identi   ed the same way by both partitions (either
together in both or separate in both). bounded between 0 (no similar pair placements)
and 1 (identical partitions), the rand coe   cient is extremely intuitive and can be
used fruitfully in many settings. however, it has an important de   ciency: the rand
coe   cient for two network partitions that each contain large numbers of categories is
skewed towards the value 1 because of the large fraction of node pairs that are placed
in di   erent groups even when comparing two partitions with little in common.

if one wishes to exclude w00 from having an explicit role, one can use the jac-
card index sj = w11/(w11 + w10 + w01) or the fowlkes-mallows similarity coe   cient

sfm = w11/p(w11 + w10)(w11 + w01). both sj and sfm clearly avoid the problem-

atic e   ects of large w00, but their ignorance of node pairs classi   ed similarly into
di   erent communities yields overly high values when comparing network partitions
with very few categories (or when one partition consists of a single group). another

index is the minkowski coe   cient sm = p(w10 + w01)/(w10 + w11), which is asym-

5

metric in its consideration of the two partitions. the    rst serves as a distinguished
reference, measuring the number of mismatches relative to the number of similarly-
grouped pairs in that reference. hence, sm values closer to 0 are considered better.
the    similarity coe   cient, de   ned as

s   =

m w11     (w11 + w10)(w11 + w01)

,

p(w11 + w10)(w11 + w01)(m     (w11 + w10))(m     (w11 + w01))

has the most complicated algebraic form of the similarity coe   cients that we employ.
additional measures and discussions are available in refs. [7,19,26]. notably, each si
measure su   ers from the di   culty of it being unclear what constitute    good    values,
as they all depend intimately on the numbers and sizes of the groups in the partition.
(we illustrate this in section 4 with computations for the caltech network and discuss
further properties of the similarity indices in subsection 2.3.)

one can also try to alleviate the problem of identifying good similarity values
by introducing various    adjusted    indices that report comparisons as a similarity
relative to that which might be obtained at random. for instance, one can construct
adjusted indices by subtracting the expected value (under some null model, typically
conditional on maintaining the numbers and sizes of groups in the two partitions) and
then rescaling the result by the di   erence between the maximum allowed value and
the mean value [18]. one such index, using a bound on the maximum allowed value,
is the adjusted rand coe   cient [18]

sar =

w11     1

m (w11 + w10)(w11 + w01)

1

2 [(w11 + w10) + (w11 + w01)]     1

m (w11 + w10)(w11 + w01)

.

as described in ref. [26], adjusted indices can be problematic because the focus
on the maximum possible values does not guarantee accurate comparisons between
similarity coe   cients across di   erent settings. in particular, this implies that one can-
not necessarily use similarity scores to make direct comparisons between communities
and house with those between communities and high school (which is something that
we speci   cally aim to do). that is, even if such comparisons yield adjusted rand
values of 0.1 and 0.2, it is not at all clear that the second situation should be construed
to yield a closer pair of partitions than the    rst. consequently, the general problem
of knowing what similarity-score values indicate a good correlation remains.

2.3. standardized pair counting. numerous studies have attempted to as-
sess the utility of similarity measures. however, because partitioning according to
demographic traits yields a graph partitioning that typically di   ers signi   cantly from
that obtained using algorithmic community detection, we use a classical statistical
approach, advocated in [3, 9], wherein similarity measures are used in the context of
testing signi   cance levels of the obtained values versus those expected at random. we
recommend using a proper metric (i.e., a quantity that is a metric in the mathemati-
cal sense rather than only in an informal sense) such as variation of information [26]
for comparing partitions that are close to one another. however, in the facebook
networks, the mutual information of a pair of partitions is small compared to the
total information in each. in such cases, two partitions can be relatively far from each
other according to a distance measure but might nevertheless be very far in the tail
of the distribution of what can be expected at random. it is consequently more ap-
propriate to identify the pair-counting strength relative to that obtained at random,
standardized by the width of the distribution via z-scores zi = (si       i)/  i, which

6

indicate the number of standard deviations   i that the si-value is more correlated
than the mean   i (i     {fm,   , j, m, r, ar}, noting the need to multiply by    1 for
zm).

one can obtain z-scores non-parametrically using permutation tests [14], though
we will identify analytical formulas for zr and show that the fowlkes-mallows,   ,
rand, and adjusted rand z-scores are identical. the elements nij of the contingency
table indicate the number of nodes that are classi   ed into the ith group of the    rst
partition and jth group of the second partition. as long as partitions are constrained
to have the same numbers and sizes of groups as the original partitions   i.e., as long

partition likewise remain constant. this implies that any pair-counting index speci   ed

as the row and column sums, ni   = pj nij and n  j = pi nij, remain constant   then
the total number of pairs m , the number of pairs m1 = pi(cid:0)ni  
2 (cid:1) classi   ed the same
way in the    rst partition, and the analogous quantity m2 = pj (cid:0)n  j
2 (cid:1) for the second
by w     counts can be equivalently speci   ed in terms of only w := w11 = pij (cid:0)nij
2 (cid:1)

because w10 = m1     w, w01 = m2     w, and w00 = m     m1     m2 + w. it follows
immediately that sr, sfm, s  , sar are each linear functions of w and hence linear
functions of each other [19]. any similarity index si that is a linear function of w must
be statistically equivalent to w in any null model (given constant m , m1, and m2),
with the z-score and p-value equal to that associated with the speci   ed w. meanwhile,
as we demonstrate in section 4, the si values can have di   erent orderings in di   erent
comparisons because of their dependence on m , m1, and m2.

it is also instructive to note the relationships between the linear-in-w similarity
coe   cients and the jaccard and minkowski indices: 1/sj =    1 + (m1 + m2)/w
and s 2
m = (m1 + m2     2w)/m1. the asymmetry in the minkowski index is clearly
limited, as switching which partition is the reference changes the coe   cient by a
multiplicative factor. because the square root and multiplicative inverse are both
monotonic operations in the domains of these indices (sm > 0 and 0     sj     1), it
follows that the p-values of the cumulative distributions of each are identical to the
p-value of w itself even though the corresponding z-scores can be di   erent.

in deference to the seminal presentation of the rand index [34], we refer to the
z-score of the linear-in-w scores as z-rand: zr = (w       w)/  w, where   w and   w are,
respectively, the mean and standard deviation of w (noting its equivalence by linear-
ity to the z-score advocated explicitly by brennan and light [3]). in the absence of
external information that indicates a need to impose speci   c correlations, we adopt
the standard and analytically tractable assumption of a random hypergeometric dis-
tribution of equally likely assignments subject to    xed row and column sums. the
expected value then becomes   w = m1m2/m , as for the adjusted rand index [18].
the calculation of higher-order moments is more involved [3, 4, 17, 24]. in order to
make zr as simple as possible to calculate, we rewrite the formulas of [17] as follows:

zr =

1

  w (cid:18)w    

m1m2

m (cid:19) ,

(2.1)

  2
w =

+

   

(4m1     2m )2(4m2     2m )2

m
16
[(4m1     2m )2     4c1     4m ][(4m2     2m )2     4c2     4m ]

16n(n     1)(n     2)

256m 2

c1c2

+

64n(n     1)(n     2)(n     3)

7

,

(2.2)

c1 = n(n2     3n     2)     8(n + 1)m1 + 4xi
c2 = n(n2     3n     2)     8(n + 1)m2 + 4xj

n3

i   ,

n3

  j .

(2.3)

while we advocate the use of zr, their associated signi   cance levels (equivalently,
the p-values of the cumulative distribution) are not equal to those for a gaussian
distribution. the distribution for large samples is asymptotically gaussian [22], but
the distribution associated with comparing a particular pair of partitions need not
be. indeed, the tails of the distribution can be quite heavy [4], so the id203 of
obtaining extreme z-scores can be orders-of-magnitude higher than in the normal dis-
tribution. nevertheless, the gaussian approximation is frequently su   cient to gauge
statistical signi   cance (past the 95% con   dence interval). given the straightforward
calculation of (2.1)   (2.3), we prefer to use zr directly, with the caveat that the rand
indices do not translate directly to p-values.

where simple formulas for the necessary moments do not appear to be avail-
able (i.e., for the jaccard and minkowski indices), we resort to the computationally
straightforward (albeit intensive if one desires high accuracy) method of examining
distributions obtained using permutation tests [14], again under the null model of
equally-likely node assignments conditional on the constancy of the numbers and
sizes of groups. speci   cally, starting from two network partitions whose correlation
we want to measure, we calculate the similarity values si and obtain a context for
these values by repeatedly computing si under random permutation of the node as-
signments in one of the partitions. (subsequent permutation of assignments in the
second partition is redundant.) we thereby aim to compare the similarity coe   cients
between the two partitions to the distributions of such coe   cients from the appropri-
ate ensemble of partition pairs. numerical estimation of p-values far in the tail of the
distribution (where many of our points of interest lie) necessarily requires sampling
a correspondingly large number of elements.
in contrast, calculating z-scores only
requires sampling the    rst two moments of the distribution. we typically use 10000
permutations (even for the larger networks, where the number of nodes is actually
larger than the number of permutations considered), con   rming that the obtained
z-scores have converged to roughly two signi   cant    gures by comparing them with
those obtained using half of the permutations and also comparing zr estimates with
the analytical values obtained from (2.1)   (2.3).

of course, calculating z-scores of the pair-counting indices is not a panacea, par-
ticularly when comparing networks of di   erent sizes. nevertheless, we    nd them to
be exceptionally useful for examining the correlations between communities and par-
titions by the available demographics in our facebook data. before we concentrate on
using these z-scores to measure correlations, we compare test results (similar to those
discussed in section 4) against other methods, including variation of information [26]
and the (non-standardized) adjusted rand index sar [18] using a scatter plot versus
zr in fig. 2.3. while sar trends positively with zr (recall that zr = zar), there are
clearly situations with very small sar that have much larger zr values than should
be expected at random. we additionally observe that zj and zm each appear to be
closely approximated by zr at the scale of fig. 2.3, though closer inspection reveals
relative di   erences occasionally as large as 10%.

we admit that we are questionably guilty of one of the major sins of statistical
analysis, in that z-scores are typically a proxy for the likelihood with which one
it is thus reasonable to question their
can reject an independent null hypothesis.

8

 

sar
zj
zm
vi
zvi

104

102

100

10   2

10   4

 

10   1

100

101
zr

102

103

fig. 2.3. scatter plot of zr (the rand z-score) on the horizontal axis versus (on the vertical
axis) other pair-counting z-scores (zj and zm), variation of information (vi), a vi z-score from
permutation tests, and the adjusted rand index sar. the depicted data comes from 60 situations:
algorithmically-detected communities for the 5 universities using 4 demographic groupings and 3
networks per university (full data and gender-restricted networks of women only and men only).

e   ectiveness for the quite di   erent task of measuring a correlation. we stress, however,
that the underlying statistic that we have standardized is a pair counting of the
similarities between partitions rather than a   2 deviation from independence. (we
note that w reduces to a linear function of   2 in the special case of uniform constant
marginals [4].) therefore, in the absence of enforcing a particular model for the form
of the correlation between partitions, we believe this standardization of similarity
scores is a reasonable way to proceed (if done so with caution).

3. data. our data, which was sent directly to us in anonymized form by adam
d   angelo of facebook, consists of the complete set of users (nodes) from the facebook
networks for each of    ve american universities and all of the links between those users   
pages for a single-time snapshot from september 2005.1 similar snapshots of facebook
data from 10 texas universities were analyzed recently in ref. [25], and a snapshot
from    a diverse private college in the northeast u.s.    was studied in ref. [23]. other
studies of facebook have typically obtained data either through surveys [2] or through
various forms of automated sampling [12], thereby containing missing nodes and links
that can strongly impact the resulting graph structures and analyses.

we consider only ties between people at the same institution, which yields    ve
separate realizations of university social networks and allows us to compare the struc-
tures at di   erent institutions. our study includes a small technical institute (cali-
fornia institute of technology [caltech]), a pair of private universities (georgetown
university and princeton university), and a pair of large state universities (university

1we have posted the data at http://people.maths.ox.ac.uk/~porterm/data/facebook5.zip.

9

 

)
k
 
>
e
e
r
g
e
d
(
p

f
f

e
o
c
 

g
n
i
r
e

t
s
u
c

l

caltech

2

4

6

8

100

10   2

10   4
0

100

10   1

100

10   2

10   4
0

100

10   1

georgetown

2

4

6

8

oklahoma

2

4

6

8

princeton

2

4

6

8

100

10   2

10   4
0

100

10   1

100

10   2

10   4
0

100

10   1

100

10   2

10   4
0

100

10   1

unc

2

4

6

8

10   2
0

2

4
 

6

10   2
0

8

2

4
 

6

10   2
0

8

2

4

k / <k>

6

10   2
0

8

2

4
 

6

10   2
0

8

2

6

8

4
 

fig. 3.1. cumulative degree distributions (top panels) and local id91 coe   cients (bottom
panels) for the    ve university networks. we employ semilogarithmic coordinates. the horizontal
axes give the degree relative to the mean degree hki, and we only display data for k/hki     8 to
provide common axes for all universities.

of oklahoma and university of north carolina at chapel hill [unc]).

we summarize basic properties of the university networks in fig. 3.1 and table
3.1. see [28, 30] and references therein for discussions of the measures that we use
in this section. although our focus in this paper is community structure, we remark
that even these simple network characteristics can yield insights about facebook net-
works. the mean degrees tend to increase with network size, potentially indicating
that broader institutional use begets greater personal use (though this trend is clearly
strongly in   uenced by the caltech data). the degree distributions of these institutions
(plotted in the top panels of fig. 3.1) have heavy tails compared to random graphs.
in particular, the degree distributions appear to be approximately exponential. al-
though the mechanisms driving such distributions are impossible to ascertain without
longitudinal data, the roughly exponential form of the degree distribution both above
and below the mean degree potentially indicates a wide range in the willingness to
participate (i.e., to add online friends) among facebook users.

the bottom panels of fig. 3.1 compare node degree versus id91 coe   cient,

ci =

number of pairs of neighbors of node i that are connected

number of pairs of neighbors of node i

.

we note that even heavy users have much larger local id91 than that expected
at random (e.g., when compared with the total graph densities).
in table 3.1, we
provide the mean id91 coe   cient and the transitivity for each network, given
by the fraction of connected triples in the network that are fully connected triangles.
both measures of local id91 are much larger at caltech than they are at the
other institutions. it is of course not surprising that we observe large transitivities
in social networks such as the facebook networks. nevertheless, as we have shown
recently in ref. [27], tree-based theories of various dynamical processes appear to be
valid for facebook networks (despite their high id91, implying that they are most
de   nitely not locally tree-like) because they are    su   ciently small    worlds, in that
the mean distance between nodes is close to the expected value obtained in random
networks with the same joint degree-degree distributions.

the data also includes limited demographic information provided by users on their
individual pages: gender, class year, and data    elds that represent (using anonymous
numerical identi   ers) high school, major, and dormitory residence (or    house    at
caltech). in situations in which individuals elected not to volunteer a demographic

10

caltech georgetown oklahoma

princeton

1099
762

16651
43.7

institution
nodes
connected nodes
connected edges
mean degree
mean id91 coe   .
transitivity

0.4091
0.2913
degree assortativity    0.0662
0.0540
gender assortativity
major assortativity
0.0382
0.4486
dormitory assortativity
0.2694
year assortativity
high school assortativity
0.0021
number of communities
modularity

0.4003

12

12195
9388

425619

90.7

0.2249
0.1485
0.0753
0.0145
0.0439
0.1725
0.5575
0.0237

33

0.4801

table 3.1

24110
17420
892524
102.5
0.2297
0.1587
0.0737
0.1118
0.0412
0.4033
0.2923
0.1583

5

0.3869

8555
6575

293307

89.2

0.2372
0.1639
0.0910
0.0650
0.0474
0.0872
0.4947
0.0197

12

0.4527

unc
24780
18158
766796

84.5

0.2020
0.1156

6.6  10   5

0.0598
0.0511
0.2024
0.3964
0.1342

5

0.4274

basic characteristics of the largest connected components of the    ve facebook networks that we
study: the total number of nodes in the original data, numbers of nodes and edges in the largest
connected component, mean degree, mean id91 coe   cient, transitivity (fraction of transitive
triples), assortativities (by degree, gender, major, dormitory, class year, and high school), number
of communities detected, and the modularity of the resulting graph partition.
in calculating the
assortativities, we ignored nodes for which the corresponding demographic characteristic is missing
(i.e., the    pairwise removal    protocal that we discuss in section 4). we treat class year as a
categorical variable here, and we calculate degree assortativity as a correlation coe   cient [28, 30].

characteristic, we use an additional    missing    label. these characteristics allow us
to make comparisons between di   erent universities, under the assumption (per the
discussion in ref. [2]) that the communities and other elements of structural organi-
zation in facebook networks re   ect (even if imperfectly) the social communities and
organization of the o   ine networks on which they   re based.

for instance, at the level of individual ties, the tendency for users to be friends
with other users who have similar characteristics can be quanti   ed by the assortativity
of the links relative to that characteristic. degree assortativity (or degree correlation)
can be calculated as the pearson correlation coe   cient of the degrees at either ends
of the edges. although many social networks tend to be positively assortative with
respect to degree, we    nd that the degree assortativity is negative for caltech and is
very small for unc. a general measure of scalar assortativity relative to a categorical
variable is given by

r =

tr(e)     ke2k

1     ke2k

    [   1, 1] ,

(3.1)

where e = e/kek is the normalized mixing matrix, the elements eij give the number
of edges in the network that connect a node of type i (e.g., a person with a given
major) to a node of type j, and the entry-wise matrix 1-norm kek is equal to the
sum of all entries of e. comparing assortativities for various categories shows, for
example, that assortativity by dormitory and class year (treated as a categorical
variable) are high for all    ve institutions; assortativities by major are low for all
   ve institutions; and assortativities by high school and gender are less consistent
across institutions. the relative sizes of the di   erent assortativities also vary across
institutions, which is similar to what we will see below with communities. going
beyond this measure of local assortativity by characteristics, our major focus for this
article is on the organization of the communities of these    ve facebook networks based
on these various categories. we discuss this in detail in section 4.

11

   major   
   house   
   year   
   h.s.   

sar
0.0063
0.3762
0.0080
0.0085

sfm
0.1195
0.4742
0.1766
0.0833

s  

0.0070
0.3829
0.0080
0.0129

sj

0.0576
0.3056
0.0968
0.0301

sm

1.1238
0.9578
1.2637
1.0484

table 4.1

sr

0.7785
0.8391
0.7199
0.8072

vi

4.3149
1.9275
3.5191
4.7268

zj
3.96
249
6.84
-0.55

zm
3.95
226
6.82
-0.55

zr
3.96
198
6.73
-0.55

similarity coe   cients (adjusted rand, fowlkes-mallows,   , jaccard, minkowski, and rand),
variation of information, and similarity z-scores for comparing a 12-community partition of the
caltech data versus a partition constructed using each of the four self-identi   ed user characteristics.

4. facebook communities. we algorithmically identify a set of communities
in the largest connected component of each institution   s network using a modi   ed
version of newman   s leading-eigenvector method [29] in conjunction with subsequent
kernighan-lin node-swapping steps [21]. we compare the communities to partitions
obtained by grouping users according to each of the self-identi   ed characteristics:
major, class year, high school, and dormitory/house.

we    rst revisit caltech   s community structure, which we previously examined
visually in fig. 2.2. the partition of the largest connected component into 12 com-
.
munities (which has modularity q
= 0.4003) exhibits a strong correlation with house
a   liation. to investigate this quantitatively, we calculate the similarity coe   cients
of this partition versus each partition constructed using one of the four available user
characteristics (see table 4.1). the raw si values appear to be insu   cient to the task
of comparing these communities. speci   cally, the ordering of the correlation strengths
with the di   erent demographics is not consistent across pair-counting indices, even
among those we know are linear transformations of one another. additionally, al-
though there is agreement that the correlation with house is strongest, the si values
di   er wildly in how much they set apart the house correlation, with sr and sm seem-
ingly indicating that the correlation with house is only marginally stronger than that
with high school even though caltech contains very few students at one time that
come from the same high school.

these apparent disagreements in interpretation across si values occur even though
we know that their corresponding p-values in the (unobtained) random distributions
are identical. while we cannot directly calculate those p-values, the z-scores for each
(see section 2.3) in table 4.1 indicate that the correlation with high school is the
only one of the four demographic characteristics that is not statistically signi   cant.
we note that the ordering of the vi scores in table 4.1 is consistent with that of
the z-scores but recall that such agreement of ordering is not consistently observed
in fig. 2.3. the z-scores provide a consistent interpretation of the roles of the four
characteristics in this caltech data: house is most important, followed distantly by
year and major (in descending order), with no signi   cant correlation with high school.
because of the close agreement between the zj, zm, and zr scores in fig. 2.3 and table
4.1, we henceforth restrict attention to the analytically-obtained zr values.

before concluding our discussion of caltech, we acknowledge the potentially im-
portant e   ects of missing demographic data, as a signi   cant number of users did not
volunteer an a   liation (as indicated in table 4.2 and by the purple wedges of fig. 2.2).
one can approach the issue of missing data using sophisticated tools such as multiple
imputation, likelihood, or weighting methods [16]. a simpler approach is to inves-
tigate the e   ects on the measured correlations by various restrictions of the data.
we consider three such protocols: inclusion, pairwise removal, and listwise removal.
inclusion, which we use in table 4.1, treats the missing labels like any other category,

12

connected

indicated

indicated

indicated

indicated

indicated

caltech
georgetown
oklahoma
princeton
unc

users
762
9388
17420
6575
18158

major

687
7510
15779
4940
15492

dorm/house

594
6594
7203
4355
8989

table 4.2

year
651
8374
13732
5801
15883

high school

633
7562
14998
5214
15414

all
499
4774
5510
2920
6719

numbers of nodes of each data set used in the di   erent protocols for treating missing data.

inclusion:    major   
   dorm/house   
   year   
   high school   
pairwise:    major   
   dorm/house   
   year   
   high school   
listwise:    major   
   dorm/house   
   year   
   high school   

caltech georgetown oklahoma princeton unc
8.044
113.0
778.2
15.93
5.700
93.34
889.1
37.22
13.90
90.50
475.7
21.12

3.962
200.8
6.727
-0.553
4.051
285.3
5.389
0.7695
2.235
248.9
2.644
0.3063

5.885
148.8
1543
26.13
16.00
212.9
1837
4.247
15.23
221.5
1913
1.228

3.799
71.00
206.7
18.50
16.44
186.9
286.1
22.54
26.10
159.9
251.2
13.69

15.03
58.26
1058
15.62
9.968
147.2
1270
2.888
10.07
116.5
997.3
2.415

analytically-obtained zr-scores for comparing the algorithmically-identi   ed communities of
facebook networks versus user characteristics. cases where users did not volunteer demographic
characteristics are treated by three protocols: inclusion, pairwise removal, and listwise removal.

table 4.3

erroneously grouping all such users together in the demographic partition. we apply
pairwise removal separately for each demographic comparison with the community
structure. in terms of a contingency table of r demographic rows and c community
columns, this amounts to a deletion of the row corresponding to    missing.    listwise
removal restricts the comparisons to the subset of users who volunteered all four of the
studied demographic characteristics. we stress that these protocols do not a   ect the
community assignments, which we obtained using the complete network data. other
restrictions or combinations of this data (such as single-gender restrictions) can also
be fruitfully explored, but such investigations are beyond the scope of the present
article.

in table 4.3, we present the zr-scores for all four community-demographic com-
parisons using each of the three missing data protocols at the    ve universities we study.
we caution that because of network-size e   ects (re   ecting the di   erent numbers of
nodes in di   erent examples), z-score values cannot typically be directly compared
across institutions. accordingly, our primary conclusions are about the statistical
signi   cances and rank orderings of the demographic correlations separately in each
university. our previous conclusions about the caltech community structure remain
largely consistent across all three missing data protocols: house is most strongly cor-
related with the communities, followed distantly by year and major (in descending
order), with no statistically signi   cant correlation with high school. while house re-
mains strongly correlated with communities in all three protocols, the correlation with
year and major appears to be only marginally statistically signi   cant in the analysis
with listwise removal.

13

in contrast with caltech, the communities at each of the other four institutions
that we study correlate primarily with class year (see table 4.3). moreover, these
correlations are not as dominant as house is at caltech, as each of the four charac-
teristics possess statistically signi   cant correlations with the community structures at
the other four institutions (except high school in listwise removal at georgetown). we
show the 12 communities identi   ed at princeton colored both by class year and by
major in fig. 4.1. compared with the strong correlation between communities and
house a   liation at caltech, these visual depictions of the princeton communities do
not seem to indicate as strong a correlation with year despite the very large corre-
sponding zr (which again cautions against direct comparison of zr values in networks
of di   erent sizes). we remark that the size of the princeton data set, with over 8500
nodes (6575 in the largest connected component) is disproportionately large relative
to the institution   s size; this is presumably a result of the relatively early facebook
adoption there.

the z-scores in table 4.3 reveal that princeton students break up into communi-
ties primarily according to class year (among the four demographic categories available
to us), and dormitory gives the second highest correlation. while major is also sig-
ni   cant, the correlation with high school appears to be only marginally signi   cant in
protocols that remove missing data. one can draw similar conclusions about george-
town from table 4.3; the only qualitative di   erence is the possible lack of signi   cance
of high school at georgetown (as compared to the marginal signi   cance at princeton)
that is suggested by the more stringent missing-data protocols.

fig. 4.1. [color] pie-charts of princeton, colored by (left) class year and (right) major. (as

before, purple slices correspond to people who did not identify the relevant characteristic.)

similarly, the z-scores calculated for the unc network partitioned into 5 com-
munities suggest that class year is the primary organizing characteristic and that
dormitory residence is also prominent. high school and major have smaller but sig-
ni   cant positive correlations with the community structure. the other large state
university that we consider is the university of oklahoma, which is also partitioned
into 5 communities. like unc, the dominant correlation of the oklahoma communi-
ties is with year, the secondary correlation is with dormitory, and both high school and
major have statistically signi   cant correlations. unlike unc, however, the disparity

14

between the correlations with year and with dormitory do not appear to be as wide
at oklahoma. in contrast to princeton and georgetown, communities at both unc
and oklahoma maintain unquestionably signi   cant correlations with high school in
both missing-data protocols.

we close this section by cautioning about interpretations of conclusions drawn
from the numbers in table 4.3, even though they indicate some interesting di   erences
among the institutions that we studied. in particular, one should of course be care-
ful about how such numbers might be in   uenced by our methodologies. although
we have provided three di   erent protocols for handling missing data, other e   ects
might be similarly worthy of study. for instance, one should be wary of the possible
in   uence of the selected de   nition of    community    and the method of its detection.
there are numerous de   nitions and methods available (again see refs. [8, 33]), and a
more de   nitive analysis of the connections between communities and characteristics
in such networks should more fully explore multiple notions of community, possibly
hierarchical structures, and communities at di   erent resolutions.

as a simple example of comparing results from di   erent community-detection
methods, we compare the 12-community caltech partition with that obtained for a
.
7-community partition (with q
= 0.3594), which we obtained using a simpler spectral
modularity-optimization implementation. despite the necessarily di   erent details of
these two community structures, the qualitative conclusions from the two partitions
are the same: house provides the dominant correlation, followed distantly by year
and major, and there is again no signi   cant correlation high school. applying this
same    weaker    (in the sense of consistently resulting in partitions of lower modular-
ity) community-detection implementation to the other four institutions also typically
agrees with the results that we report above: year has the strongest correlation with
communities and is followed by dormitory. the role of high school appears to be
more pronounced in these lower-modularity partitions, as one obtains statistically
signi   cant correlations with the communities at georgetown and princeton and even
stronger correlations with the communities at unc and oklahoma.

we also stress the di   erence between causation and correlation. in this paper, we
have examined correlations. as discussed in the sociological literature on snss (see [2]
and references therein), it is obviously very interesting and important to attempt to
discern which common characteristics have resulted from friendships and which ones
might perhaps in   uence the formation of friendships.
in terms of the individual
characteristics discussed above, high school and class year are known prior to the
formation of these facebook links, so one would expect those particular correlations
to also indicate how some friendships might have formed. common residences and
majors, on the other hand, can both encourage new friendships and arise because of
them. we note,    nally, that sns friendships provide only a surrogate for o   ine ones,
so that one can also expect to    nd some di   erences between the community structures
of facebook networks and the real-life networks that they imperfectly represent [2].

5. conclusions. we have demonstrated that analysis of community structure
is useful for studying the online social networks of universities and inferring interest-
ing insights about the prominent driving forces of community development in their
corresponding o   ine social networks. we investigated various measures for compar-
ing algorithmically-identi   ed communities in facebook networks with those obtained
by grouping individuals according to self-identi   ed characteristics. we found that
z-scores of pair-counting indices provide an immediate (though not quantitatively
perfect) interpretation about the likelihood that such values might arise at random,

15

indicating signi   cant correlations between the algorithmically-identi   ed communities
and multiple self-identi   ed characteristics. such calculations indicate that the orga-
nizational structure at caltech, which depends very strongly on house a   liation, is
starkly di   erent from those of the other universities that we studied. the observed
heterogeneity in the communities, even at an institution like caltech whose social
structure seems to be mostly dominated by a single feature (house a   liation), un-
derscores the important point that networks typically have multiple organizational
forces [33]. we hope that our work leads to a wider comparative study that might
increase understanding about the di   erent factors that drive the social organization
of universities. the present paper attempts to provide foundational steps for such
comparative investigations by conveying a meaningful methodology.

acknowledgements. we thank adam d   angelo and facebook for providing
the data used in this study. we also acknowledge skye bender-de moll, danah boyd,
barry cipra, barbara entwisle, katie faust, avi feller, dan fenn, james gleeson,
sandra gonz  alez-bail  on, justin howell, nick jones, franziska klingner, marco van
der leij, tom maccarone, jim moody, mark newman, andy shaindlin, and ash-
ton verdery for useful discussions. we are especially indebted to aaron clauset and
james fowler for thorough readings of a draft of this manuscript and to christina
frost for developing some of the graph visualizations we used.2 alt was funded by
the nsf through the unc agep (nsf hrd-0450099) and by the unc echo pro-
gram. edk   s primary contributions to this project were funded by caltech   s summer
undergraduate research fellowship (surf) program. pjm was funded by the nsf
(dms-0645369) and by start-up funds provided by the institute for advanced materi-
als, nanoscience & technology and the department of mathematics at the university
of north carolina at chapel hill. map did some work on this project while a mem-
ber of the center for the physics of information at caltech and also acknowledges a
research award (#220020177) from the james s. mcdonnell foundation.

references

[1] d. boyd, why youth (heart) social network sites: the role of networked publics in teenage
social life, in macarthur foundation series on digital learning - youth, identity, and
digital media volume, d. buckingham, ed., mit press, cambridge, ma, 2007, pp. 119   
142.

[2] d. m. boyd and n. b. ellison, social network sites: de   nition, history, and scholarship,

journal of computer-mediated communication, 13 (2007), p. 11.

[3] r. l. brennan and r. j. light, measuring agreement when two observers classify people
into categories not de   ned in advance, british journal of mathematical and statistical
psychology, 27 (1974), pp. 154   163.

[4] r. j. brook and w. d. stirling, agreement between observers when the categories are not
speci   ed in advance, british journal of mathematical and statistical psychology, 37 (1984),
pp. 271   282.

[5] g. caldarelli, scale-free networks: complex webs in nature and technology, oxford uni-

versity press, oxford, united kingdom, 2007.

[6] t. callaghan, p. j. mucha, and m. a. porter, random walker ranking for ncaa division

i-a football, american mathematical monthly, 114 (2007), pp. 761   777.

[7] r. j. g. b. campello, a fuzzy extension of the rand index and other related indexes for
id91 and classi   cation assessment, pattern recognition letters, 28 (2007), pp. 833   
841.

[8] s. fortunato, community detection in graphs, physics reports, 486 (2010), pp. 75     174.
[9] e. b. fowlkes and c. l. mallows, a method for comparing two hierarchical id91s,

journal of the american statistical association, 78 (1983), pp. 553   569.

2the code is available at http://netwiki.amath.unc.edu/viscomms .

16

[10] t. m. j. fruchterman and e. m. reingold, graph drawing by force-directed placement,

software   practice and experience, 21 (1991), pp. 1129   1164.

[11] m. girvan and m. e. j. newman, community structure in social and biological networks,

proceedings of the national academy of sciences, 99 (2002), pp. 7821   7826.

[12] m. gjoka, m. kurant, c. t. butts, and a. markopoulou, a walk in facebook: uniform

sampling of users in online social networks. arxiv:0906.0060, 2009.

[13] m. c. gonz  alez, h. j. herrmann, j. kert  esz, and t. vicsek, community structure and

ethnic preferences in school friendship networks, physica a, 379 (2007), pp. 307   316.

[14] p. good, permutation, parametric, and bootstrap tests of hypotheses, springer-verlag, new

york, ny, 2005.

[15] r. guimer`a and l. a. n. amaral, functional cartography of complex metabolic networks,

nature, 433 (2005), pp. 895   900.

[16] n. j. horton and k. p. kleinman, much ado about nothing: a comparison of missing data
methods and software to    t incomplete data regression models, the american statistician,
61 (2007), pp. 79   90.

[17] l. hubert, nominal scale response agreement as a generalized correlation, british journal of

mathematical and statistical psychology, 30 (1977), pp. 98   103.

[18] l. hubert and p. arabie, comparing partitions, journal of classi   cation, 2 (1985), pp. 193   

218.

[19] a. k. jain and r. c. dubes, algorithms for id91 data, prentice hall, englewood cli   s,

nj, 1988.

[20] b. karrer, e. levina, and m. e. j. newman, robustness of community structure in net-

works, physical review e, 77 (2008), p. 046119.

[21] b. w. kernighan and s. lin, an e   cient heuristic procedure for partitioning graphs, the

bell system technical journal, 49 (1970), pp. 291   307.

[22] e. kulisnkaya, large sample results for permutation tests of association, communications in

statistics     theory and methods, 23 (1994), pp. 2939   2963.

[23] k. lewis, j. kaufman, m. gonzalez, m. wimmer, and n. a. christakis, tastes, ties,
and time: a new (cultural, multiplex, and longitudinal) social network dataset using face-
book.com, social networks, 30 (2008), pp. 330   342.

[24] n. mantel, the detection of disease id91 and a generalized regression approach, cancer

research, 27 (1967), pp. 209   220.

[25] a. mayer and s. l. puller, the old boy (and girl) network: social network formation on

university campuses, journal of public economics, 92 (2008), pp. 328   347.

[26] m meil  a, comparing id91s     an information based distance, j. multivariate analysis,

98 (2007), pp. 873   895.

[27] s. melnik, a. hackett, m. a. porter, p. j. mucha, and j. p. gleeson, the unreasonable

e   ectiveness of tree-based theory for networks with id91. arxiv:1001.1439, 2010.

[28] m. e. j. newman, the structure and function of complex networks, siam review, 45 (2003),

pp. 167   256.

[29] m. e. j. newman, finding community structure in networks using the eigenvectors of matri-

ces, physical review e, 74 (2006), p. 036104.

[30] m. e. j. newman, networks: an introduction, oxford university press, oxford, u.k., 2010.
[31] j.-p. onnela, j. saram  aki, j. hyv  onen, g. szab  o, d. lazer, k. kaski, j. kert  esz, and
a.-l. barab  asi, structure and tie strengths in mobile communication networks, proceed-
ings of the national academy of sciences, 104 (2007), pp. 7332   7336.

[32] m. a. porter, p. j. mucha, m. e. j. newman, and c. m. warmbrand, a network analysis
of committees in the united states house of representatives, proceedings of the national
academy of sciences, 102 (2005), pp. 7057   7062.

[33] m. a. porter, j.-p. onnela, and p. j. mucha, communities in networks, notices of the

american mathematical society, 56 (2009), pp. 1082   1097, 1164   1166.

[34] w. m. rand, objective criteria for the evaluation of id91 methods, journal of the amer-

ican statistical association, 66 (1971), pp. 846   850.

[35] g. robins, p. pattison, y. kalish, and d. lusher, an introduction to exponential random

graph (p*) models for social networks, social networks, 29 (2007), pp. 173   191.

[36] s. wasserman and k. faust, social network analysis: methods and applications, structural

analysis in the social sciences, cambridge university press, cambridge, uk, 1994.

[37] a. s. waugh, l. pei, j. h. fowler, p. j. mucha, and m. a. porter, party polarization in

congress: a network science approach. arxiv:0907.3509, 2010.

[38] y. zhang, a. j. friend, l. traud, a., m. a. porter, j. h. fowler, and p. j. mucha,
community structure in congressional cosponsorship networks, physica a, 387 (2008),
pp. 1705   1712.

17

