1
1
0
2

 

v
o
n
8
1

 

 
 
]
i
s
.
s
c
[
 
 

1
v
3
0
5
4

.

1
1
1
1
:
v
i
x
r
a

1

the anatomy of the facebook social graph
johan ugander1,2   , brian karrer1,3   , lars backstrom1, cameron marlow1   
1 facebook, palo alto, ca, usa
2 cornell university, ithaca, ny, usa
3 university of michigan, ann arbor, mi, usa
    these authors contributed equally to this work.
    corresponding author: cameron@fb.com

abstract

we study the structure of the social graph of active facebook users, the largest social network ever
analyzed. we compute numerous features of the graph including the number of users and friendships, the
degree distribution, path lengths, id91, and mixing patterns. our results center around three main
observations. first, we characterize the global structure of the graph, determining that the social network
is nearly fully connected, with 99.91% of individuals belonging to a single large connected component,
and we con   rm the    six degrees of separation    phenomenon on a global scale. second, by studying
the average local id91 coe   cient and degeneracy of graph neighborhoods, we show that while the
facebook graph as a whole is clearly sparse, the graph neighborhoods of users contain surprisingly dense
structure. third, we characterize the assortativity patterns present in the graph by studying the basic
demographic and network properties of users. we observe clear degree assortativity and characterize the
extent to which    your friends have more friends than you   . furthermore, we observe a strong e   ect of
age on friendship preferences as well as a globally modular community structure driven by nationality,
but we do not    nd any strong gender homophily. we compare our results with those from smaller social
networks and    nd mostly, but not entirely, agreement on common structural network characteristics.

introduction

the emergence of online social networking services over the past decade has revolutionized how social
scientists study the structure of human relationships [1]. as individuals bring their social relations online,
the focal point of the internet is evolving from being a network of documents to being a network of people,
and previously invisible social structures are being captured at tremendous scale and with unprecedented
detail. in this work, we characterize the structure of the world   s largest online social network, facebook,
in an e   ort to advance the state of the art in the empirical study of social networks.

in its simplest form, a social network contains individuals as vertices and edges as relationships between
vertices [2]. this abstract view of human relationships, while certainly limited, has been very useful for
characterizing social relationships, with structural measures of this network abstraction    nding active
application to the study of everything from bargaining power [3] to psychological health [4]. moreover,
social networks have been observed to display a broad range of unifying structural properties, including
homophily, id91, the small-world e   ect, heterogeneous distributions of friends, and community
structure [5, 6].

quantitative analysis of these relationships requires individuals to explicitly detail their social net-
works. historically, studies of social networks were limited to hundreds of individuals as data on social
relationships was collected through painstakingly di   cult means. online social networks allow us to in-
crease the scale and accuracy of such studies dramatically because new social network data, mostly from
online sources, map out our social relationships at a nearly global scale. prior studies of online social
networks include research on twitter, flickr, yahoo! 360, cyworld, myspace, orkut, and livejournal
among others [7   11].

the trend within this line of research is to measure larger and larger representations of social networks,

2

including networks derived from email [12], telephony [13], and instant messaging [14] traces. two
recent studies of renren [15] and msn messenger [14] included 42 million and 180 million individuals
respectively. network completeness is especially important in the study of online social networks because
unlike traditional social science research, the members of online social networks are not controlled random
samples, and instead should be considered biased samples. while the demographics of these networks
have begun to approach the demographics of the global population at large [16], the most accurate
representation of our social relationships will include as many people as possible. we are not there yet,
but in this paper we characterize the entire social network of active members of facebook in may 2011, a
network then comprised of 721 million active users. to our knowledge, this is the largest social network
ever analyzed.

facebook has naturally attracted the attention of researchers in the past. some of this research has
been devoted towards understanding small subsets of the facebook population, including in particular the
social networks of university students [17   19]. other studies have analyzed communication patterns and
activity amongst segments of the user population [20,21]. then another thread of research has measured
some large-scale network properties of the facebook graph through sampling, crawling, and other methods
to collect network data [22,23]. notably, these methodologies have no way of distinguishing between active
and stale accounts. unlike these studies, we analyze the entire facebook graph in anonymized form and
focus on the set of active user accounts reliably corresponding to people.

we de   ned a user of facebook as an active member of the social network if they logged into the site
in the last 28 days from our time of measurement in may 2011 and had at least one facebook friend.
we note that this de   nition is not precisely facebook   s ordinary de   nition of active user, and therefore
some of our statistics di   er slightly from company statistics. according to our de   nition of active, the
population of active facebook users consisted of around n = 721 million individuals at the time of our
measurements. for comparison, estimating that the world   s population was around 6.9 billion people in
may 2011 means that the network includes roughly 10 percent of the world   s population. restricting
the comparison to individuals age 13 or more and with access to the internet (the set of individuals
eligible to have facebook accounts) would put this percentage signi   cantly higher. there were 68.7
billion friendship edges at the time of our measurements, so the average facebook user in our study had
around 190 facebook friends. our analysis predated the existence of    subscriptions    on facebook, and in
this work we study only reciprocal facebook friendships.

we also analyzed the subgraph of 149 million u.s. facebook users. using population estimates from
the u.s. census bereau for 2011, there are roughly 260 million individuals in the u.s. over the age of
13 and therefore eligible to create a facebook account. within the u.s., the facebook social network
therefore includes more than half the eligible population. this subpopulation had 15.9 billion edges, so
the average u.s. user was friends with around 214 other u.s. users. this higher average value may re   ect
facebook   s deeper adoption in the u.s. as of may 2011.

our goals with characterizing facebook   s social network are two-fold. first, we aim to advance the
collective knowledge of social networks and satisfy widespread curiosity about social relationships as
embodied in facebook. second, we hope to focus the development of graph algorithms and network
analysis tools towards a realistic representation of these relationships. towards these goals, we provide
an accurate description of facebook   s social network here.

results

in this section, we apply a wide variety of graph measures to the facebook social network. as the network
is truly enormous, we utilize extensive computational resources to perform these measurements. however,
the focus of this paper is on the results of these measurements, and therefore we relegate discussions of
our techniques to the methods.

n
o

i
t
c
a
r
f

1
0
   
e
1

3
0
   
e
1

5
0
   
e
1

7
0
   
e
1

global
u.s.

1

5

50
degree

(a)

3

n
o

i
t
c
a
r
f

0
0
+
e
1

1
0
   
e
1

2
0
   
e
1

3
0
   
e
1

4
0
   
e
1

global
u.s.

500

5000

1

5

500

5000

50
degree

(b)

figure 1. degree distribution pk. (a) the fraction of users with degree k for both the global and
u.s. population of facebook users. (b) the complementary cumulative distribution function (ccdf).
the ccdf at degree k measures the fraction of users who have degree k or greater and in terms of the
degree distribution is pk      k pk    . for the u.s., the degree measures the number of friends also from the
united states.

the facebook graph

degree distribution. a fundamental quantity measured repeatedly in empirical studies of networks has
been the degree distribution pk. the degree k of an individual is the number of friends that individual
has, and pk is the fraction of individuals in the network who have exactly k friends. we computed
the degree distribution of active facebook users across the entire global population and also within the
subpopulation of american users. the global and u.s. degree distributions are shown in fig. 1, displayed
on a log-log scale.

because the distribution for the u.s. is quite similar to that of the entire population, we focus our
attention on the global degree distribution. the distribution is nearly monotonically decreasing, except
for a small anomaly near 20 friends. this kink is due to forces within the facebook product to encourage
low friend count individuals in particular to gain more friends until they reach 20 friends. the distribution
shows a clear cuto    at 5000 friends, a limit imposed by facebook on the number of friends at the time
of our measurements. note that since 5000 is nowhere near the number of facebook users, each user
is clearly friends with a vanishing fraction of the facebook population. re   ecting most observed social
networks, our social relationships are sparse.

indeed, most individuals have a moderate number of friends on facebook, less than 200, while a
much smaller population have many hundreds or even thousands of friends. the median friend count for
global users in our study was 99. the small population of users with abnormally high degrees, sometimes
called hubs in the networks literature, have degrees far larger than the average or median facebook user.
the distribution is clearly right-skewed with a high variance, but it is notable that there is substantial
curvature exhibited in the distribution on a log-log scale. this curvature is somewhat surprising, because
empirical measurements of networks have often claimed degree distributions to follow so-called power-

4

global
u.s.

e
c
n
a

t
s
d

i

 

p
o
h

 

i

n
h

t
i

w
 
s
r
i
a
p

 
f

o

 

e
g
a

t

n
e
c
r
e
p

0

.

1

8

.

0

6
0

.

4

.

0

2

.

0

0
0

.

0

2

4
6
hop distance

8

10

figure 2. diameter. the neighborhood function n (h) showing the percentage of user pairs that are
within h hops of each other. the average distance between users on facebook in may 2011 was 4.7,
while the average distance within the u.s. at the same time was 4.3.

laws, represented mathematically by pk     k      for some    > 0 [24, 25]. power-laws are straight lines on a
log-log plot, and clearly the observed distribution is not straight. we conclude, like ref. [23], that strict
power-law models are inappropriate for facebook   s degree distribution. it is not our intent, though, to
determine which parametric form best models the distribution. the relevant results are the monotonicity
and curvature of the degree distribution, the degrees of typical users, the large variance in degrees, and
the network   s sparsity.

the sparsity of the network does not, however, imply that users are far from each other in facebook   s
network. while most pairs of users are not directly connected to each other, practically all pairs of users
are connected via paths of longer lengths. in the next section, we measure the distances between users
in the social graph.

path lengths. when studying a network   s structure, the distribution of distances between vertices
is a truly macroscopic property of fundamental interest. here we characterize the neighborhood functions
and the average pairwise distances of the facebook and u.s. networks.

formally, the neighborhood function n (h) of a graph describes the number of pairs of vertices (u, v)
such that u is reachable from v along a path in the network with h edges or less. given the neighborhood
function, the diameter of a graph is simply the maximum distance between any pair of vertices in the
graph. the diameter is an extremal measure, and it is commonly considered less interesting than the full
neighborhood function, which measures what percentile of vertex pairs are within a given distance. the
exact diameter can be wildly distorted by the presence of a single ill-connected path in some peripheral
region of the graph, while the neighborhood function and its average are thought to robustly capture the
   typical    distances between pairs of vertices.

like many other graphs, the facebook graph does not have paths between all pairs of vertices. this
does not prevent us from describing the network using the neighborhood function though. as we shall
see in the next section, the vast majority of the network consists of one large connected component and
therefore the neighborhood function is representative of the overwhelming majority of pairs of vertices.
figure 2 shows the neighborhood function computed for both the graph of all facebook users as
well as the graph of u.s. facebook users, as of may 2011, using the recently developed hyperanf

5

s
t

n
e
n
o
p
m
o
c
 
f

o

 
r
e
b
m
u
n

6
0
+
e
1

4
0
+
e
1

2
0
+
e
1

0
0
+
e
1

1e+00

1e+02

1e+04

1e+06

1e+08

component size

figure 3. component size distribution. the fraction of components with a given component size
on a log-log scale. most vertices (99.91%) are in the largest component.

algorithm [48]. we    nd that the average distance between pairs of users was 4.7 for facebook users and
4.3 for u.s. users. short path lengths between individuals, the so-called    six degrees of separation    found
by stanley milgram   s experiments investigating the social network of the united states [26], are here
seen in facebook on a global scale. as figure 2 shows, fully 92% of all pairs of facebook users were
within    ve degrees of separation, and 99.6% were within six degrees. considering the social network of
only u.s. users, 96% were within    ve degrees and 99.7% were within six degrees. for the technical details
behind these calculations, we refer the interested reader to a separate paper concerning the compression
and traversal of the facebook graph [27].

in order to show that these path length results are representative of the entire facebook network, we

now investigate the component structure of the graph.

component sizes. our conclusion from the previous section that the network has very short average
path lengths relies on the existence of such paths between most pairs of vertices, a fact which we shall
con   rm in this section. we do so by    nding the connected components of the social network, where a
connected component is a set of individuals for which each pair of individuals are connected by at least
one path through the network. our neighborhood function calculations only computed distances between
pairs of users within connected components because these are the only users actually connected via paths.
in order for the results from the previous section to be interpreted as describing the diameter, we require
that most, if not all, of the network be in one large connected component.

in fig. 3, we show the distribution of component sizes on log-log scales, found exactly using an
algorithm described in the methods. while there are many connected components, most of these compo-
nents are extremely small. the second-largest connected component only has just over 2000 individuals,
whereas the largest connected component, the outlier all the way on the right-hand side of the    gure,
consists of 99.91% percent of the network. this component comprises the vast majority of active face-
book users with at least one friend. so not only are the average path lengths between individuals short,
these social connections exist between nearly everyone on facebook.

the path lengths and component structure of the network give us a view of the network at a macro-
scopic scale, and we now continue our investigation by examining more local properties of the network.
id91 coe   cient and degeneracy. earlier we characterized the number of friends per user by

6

0
5

.

0

0
2
0

.

5
0

.

0

1
0
0

.

mean
5/95th pct
degree   1

mean
5/95th pct

.

0
0
0
5

.

0
0
5

0

.

0
1

0

.

2

5

.

0

y
c
a
r
e
n
e
g
e
d

 

e
g
a
r
e
v
a

t

i

n
e
c
i
f
f

e
o
c
 

g
n
i
r
e
t
s
u
c
 

l

e
g
a
r
e
v
a

2

5

20 50

200

1000

5000

2

5

20 50

200

1000

5000

degree

(a)

degree

(b)

figure 4. local id91 coe   cient and degeneracy. the id91 coe   cient (a) and the
degeneracy (b) as a function of degree on log-log scales. the means are shown as solid lines and the
dashed lines display the 5/95th percentiles. an upper-bound on the degeneracy given by degree minus 1
is also shown as the thin solid line for comparison.

computing the degree distribution, and we now perform a closer analysis of the social graph neighborhoods
of users. the neighborhood graph for user i, sometimes called the ego graph or the 1-ball, is the vertex-
induced subgraph consisting of the users who are friends with user i and the friendships between these
users. user i is not included in their own neighborhood.

we    rst computed the average local id91 coe   cient for users as a function of degree, which for
a vertex of degree k measures the percentage of possible friendships between their k friends (at most
k(k     1)/2) are present in their neighborhood graph. this result is shown in figure 4a, where we note
that the axes are log-log.

we see that the local id91 coe   cient is very large regardless of the degree, compared to the
percentage of possible friendships in the network as a whole, and more importantly, compared to mea-
surements of other online social networks. for example, for users with 100 friends, the average local
id91 coe   cient is 0.14, indicating that for a median user, 14% of all their friend pairs are them-
selves friends. this is approximately    ve times greater than the id91 coe   cient found in a 2008
study analyzing the graph of msn messenger correspondences, for the same neighborhood size [14].

meanwhile, our analysis also shows that the id91 coe   cient decreases monotonically with degree,
consistent with the earlier msn messenger study and other studies. in particular, the id91 coe   cient
drops rapidly for users with close to 5000 friends, indicating that these users are likely using facebook
for less coherently social purposes and friending users more indiscriminately.

having observed such large id91 coe   cients in local neighborhoods, we chose to study the
sparsity of the neighborhood graphs further by measuring their degeneracy. formally, the degeneracy of
an undirected graph g is the largest k for which g has a non-empty k-core [28]. meanwhile, the k-core
of a graph g is the maximal subgraph of g in which all vertices have degree at least k, or equivalently,
the subgraph of g formed by iteratively removing all vertices of degree less than k until convergence.

the maximal k-core of a graph g bears conceptual resemblance to the maximal k-clique of g, but

7

non   unique fofs
k2
unique fofs
355k   15057

f

s
d
n
e
i
r
f
   
o
   
s
d
n
e
i
r
f
 
f

o

 
r
e
b
m
u
n

5
0
+
e
8

5
0
+
e
4

0
0
+
e
0

0

200

400

600

800

1000

degree

figure 5. friends-of-friends. the average number of unique and non-unique friends-of-friends as
described in the text as a function of degree. degree squared and a linear    t of the unique
friends-of-friends are shown for comparison as the dotted and dashed lines.

it is important to note that a k-core is not necessarily a k + 1-clique, unless the k-core contains exactly
k + 1 vertices. the k-core however o   ers a readily computable and robust indication of how tightly-knit
a community exists within a given graph.

we report the average degeneracy as a function of user degree in figure 4b, again plotted on a log-log
scale. within the neighborhood graphs of users, we    nd that the average degeneracy is an increasing
function of user degree. this should be considered consistent with our expectations: the more friends you
have, the larger a tight-knit community you are typically embedded within. what is however surprising
is how dense these neighborhoods in fact are: for a user with 100 friends, the average degeneracy of their
neighborhood is 15. furthermore, for users with 500 friends, their average degeneracy is 53, meaning
that they have at least 54 friends who all know 53 of their other friends. in contrast, eppstein and strash
recently examined the degeneracy of several graphs, both social and non-social, and found that across the
entire graphs (not examining only neighborhoods), the degeneracies were much more modest [29]. for the
36,692 vertex graph of enron email communication, the degeneracy was only 43. for the 16,706 vertex
graph of arxiv astro-ph collaborations, the degeneracy was only 56. in contrast, we    nd comparable
degeneracies simply by considering the neighborhood of an average user with 500 friends.

this suggests that even though the facebook graph is sparse as a whole, when users accumulate sizable
friend counts their friendships are far from indiscriminate, and instead center around sizable dense cores.
we now consider the neighborhood of a vertex out to greater distances by examining the friends-of-friends
of individual users.

friends of friends. an important property of graphs to consider when designing algorithms is the
number of vertices that are within two hops of an initial vertex. this property determines the extent to
which graph traversal algorithms, such as breadth-   rst search, are feasible. in figure 5, we computed the
average count of both unique and non-unique friends-of-friends as a function of degree. the non-unique
friends-of-friends count corresponds to the number of length-two paths starting at an initial vertex and
not returning to that vertex. the unique friends-of-friends count corresponds to the number of unique
vertices reachable at the end of a length-two path.

a naive approach to counting friends-of-friends would assume that a user with k friends has roughly

8

k2 non-unique friends-of-friends, assuming that their friends have roughly the same friend count as them.
this could also be considered a generous naive estimate of the number of unique friends-of-friends,
generous because we saw above that a signi   cant fraction of your friends   s friends are your friends. in
reality, the number of non-unique friends of friends grows only moderately faster than linear, and the
number of unique friends-of-friends grows very close to linear, with a linear    t producing a slope of 355
unique friends-of-friends per additional friend.

while the growth rate may be slower than expected, until a user has more than 800 friends, it   s
important to observe from the    gure that the absolute amounts are unexpectedly large: a user with
with 100 friends has 27, 500 unique friends-of-friends and 40, 300 non-unique friends-of-friends. this is
signi   cantly more than the 100     99 = 9, 900 non-unique friends-of-friends we would have expected if our
friends had roughly the same number of friends as us. this excess is related to a principle which we will
discuss at length below, where we show the extent to which    your friends have more friends than you   ,
an established result from prior studies of social networks [30].

degree correlations. the number of friendships in your local network neighborhood depends on
the number of friends, the degree, of your friends. in many social networks, online and o   ine, it has been
noticed that your neighbor   s degree is correlated with your own degree: it tends to be large when your
degree is large, and small when your degree is small, so-called degree assortativity. we can quantify these
degree correlations by computing the pearson correlation coe   cient r between degrees at the end of an
edge [31,32]. for the facebook network, r = 0.226, displaying positive correlations with similar magnitude
to other social graphs. this value is consistent with earlier studies of smaller networks including academic
coauthorship and    lm actor collaborations, where values of r range from 0.120 to 0.363 [31]. another
more detailed measure hknni (k), the average number of friends for a neighbor of an individual with k
friends [33], is shown as the solid line in fig. 6a. (we use the notation hxi to represent an average of a
quantity x). the expected number of friends at the end of a randomly chosen edge, (cid:10)k2(cid:11) / hki = 635, is
shown as a horizontal dotted line. unlike this constant value     which is our expectation if there were no
degree correlations     the solid line increases from near 300 for low degree individuals to nearly 820 for
individuals with a thousand friends con   rming the network   s positive assortativity. (the measurements
become noisy past 1000 and we cut the    gure o    at this point for clarity.)

comparing the solid line to the diagonal dashed line shows that until you have nearly 700 friends,
your (average) neighbor has more friends than you. this phenomena has been discussed at length by
feld [30], and facebook displays the e   ect on a grand scale. the fact that our average neighbors have
so many more friends also explains why our naive friend-of-friend estimates in the previous section were
far too low.

feld   s observation that    your friends have more friends than you    is an important psychological para-
dox, applying to friendship as well as sexual partners. when people compare themselves to their friends,
it is conceptually more appropriate to frame the comparison relative to the median of their friends, psy-
chologizing the question as a matter of asking what one   s    class rank    is amongst one   s peers [34]. our
   nding with regard to the median is therefore perhaps more signi   cant: we observe that 83.6% of users
have less friends than the median friend count of their friends. all these individuals experience that more
than half of their friends have more friends than they do. for completeness, we also note that 92.7% of
users have less friends than the average friend count of their friends.

however, we can do more than measure these simple statistics and we characterize the conditional
id203 p(k   |k) that a randomly chosen friend of an individual with degree k has degree k    [35]. we
computed this for evenly spaced values of k, all multiples of ten, and show the distribution for a few
example values of k in fig. 6b, along with the distribution if there were no degree correlations, i.e. the
distribution of degrees found by following a randomly selected edge.

first, note that the horizontal axis is log while the vertical axis is linear. agreeing with fig. 6a, the
mean of these distributions is clearly less than the mean of the orange distribution which represents fol-
lowing a random edge in the network, except for the green line denoting k = 500. again, the distributions

9

degree 10
degree 50
degree 100
degree 500
random edge

actual
random
diagonal

0
0
0
1

0
0
8

0
0
6

0
0
4

0
0
2

0

 

e
e
r
g
e
d
e
g
a
r
e
v
a

 
s
   
r
o
b
h
g
e
n

i

n
o

i
t
c
a
r
f

5
1
0

.

0

0
1
0
0

.

5
0
0
0

.

0
0
0

.

0

0

200

400

600

800

1000

1

5

50

500

5000

degree

(a)

neighbor   s degree

(b)

figure 6. degree correlations. (a) the average neighbor degree of an individual with degree k is
the solid line. the horizontal dashed line shows the expected value if there were no degree correlations
in the network (cid:10)k2(cid:11) / hki, and the diagonal is shown as a dashed line. (b) the id155
p(k   |k) that a randomly chosen neighbor of an individual with degree k has degree k   . the solid lines,
on the linear-log scale, show the measured values for four distinct degrees k shown in the caption. the
orange line shows the expected distribution, k   pk   

hki , if the degrees were uncorrelated.

shift to the right as k increases demonstrating the degree assortativity. furthermore, barring any strange
non-smooth behavior between the sampled values of k, the median for p(k   |k) is greater than k up until
between 390 and 400 friends, con   rming that the behavior of the mean in fig. 6a was not misleading.
another observation from the    gure, and data for other values of k not shown, is that the modal degree
of friends is exactly equal to k until around k = 120. so while your friends are likely to have more friends
than you on average, the most likely number of your neighbor   s friends is the same as your degree for low
to moderate degree users.

site engagement correlation. besides for degree correlations, we also examined correlations
amongst traits of individuals and network structure [36]. we now repeat our correlation calculations
using the number of days users logged in during the 28-day window of the study, instead of degree, seen
in fig. 7a. again, we provide the average value at the end of a randomly selected edge and the diagonal
line for comparison.

unlike the degree case, here there is an ambiguity in de   ning a random neighbor and hence the
average number of neighbor logins. our de   nition of random neighbor of vertices with trait x is to    rst
select a vertex with trait x in proportion to their degree and then select an edge connected to that vertex
uniformly at random. in other words, we give each edge connected to vertices with trait x equal weight.
so a vertex who is connected to 5 vertices with trait x is given 5 times as much weight in the average as
a vertex who connects to a single vertex with trait x.

like the degree, your neighbor   s site engagement is correlated with your site engagement, but the
average number of neighbor logins is better represented by the horizontal random expectation than what
was seen in the degree case. the more interesting observation, though, is that the solid value is far larger
than the diagonal value over most of the range from logging in 0 to 20 times in the past 28 days. so by

10

mean
25/75th pct
5/95th pct

actual
random
diagonal

i

s
n
g
o

l
 
r
e
s
u

 

e
g
a
r
e
v
a

 
s
   
r
o
b
h
g
e
n

i

8
2

1
2

4
1

7

1

0
0
0
1

0
0
8

0
0
6

0
0
4

0
0
2

0

e
e
r
g
e
d

 
s
   
r
e
s
u

1

7

14

21

28

1

7

14

21

28

user logins

(a)

user logins

(b)

figure 7. login correlations. (a) neighbor   s logins versus user   s logins to facebook over a period of
28 days. the solid line shows the actual mean values and the horizontal line shows the average login
value found by following a randomly chosen edge. the dashed line shows the diagonal. (b) a user   s
degree versus the number of days a user logged into facebook in the 28 day period. the solid line shows
the mean user degree, the dashed lines the 25/75 percentiles, and the dotted lines the 5/95th percentiles.

the same line of reasoning for the degree case, up until you log in around 70 percent of days in a month,
on average, your friends log into facebook more than you do.

we can understand this phenomena by examining the correlation between an individual   s degree
and logging into facebook. a facebook user provides and receives content through status updates, links,
videos, and photos, etc. to and from their friends in the social network, and hence may be more motivated
to log in if they have more friends. such a positive correlation does exist between degree and logins, and
we show that in fig. 7b. a user who logs in more generally has more friends on facebook and vice versa.
so since your friends have more friends than you do, they also login to facebook more than you do.

other mixing patterns. there are many other user traits besides logging into facebook that can
be compared to the network structure. we focus on three other such quantities with essentially complete
coverage for facebook   s users; age, gender, and country of origin, and characterize their homophily [36]
and mixing patterns [32].

we start by considering friendship patterns amongst individuals with di   erent ages, and compute the
id155 p(t   |t) of selecting a random neighbor of individuals with age t who has age t   .
again, random neighbor means that each edge connected to a vertex with age t is given equal id203 of
being followed. we display this function for a wide range of t values in fig. 8. the resulting distributions
are not merely a function of the magnitude of the age di   erence |t     t   | as might naively be expected,
and instead are asymmetric about a maximum value of t    = t. unsurprisingly, a random neighbor is
most likely to be the same age as you. less obviously, the id203 of friendship with older individuals
falls o    rapidly, nearly exponentially, from the mode. below the mode, the distributions also fall o   ,

11

age 20
age 30
age 40
age 50
age 60
random edge

n
o

i
t
c
a
r
f

0
2

.

0

5
1

.

0

0
1

.

0

5
0

.

0

0
0
0

.

20

40

60

80

100

neighbor   s age

figure 8. the distribution p(t   |t) of ages t    for the neighbors of users with age t. the solid
lines show the measured distributions against the age t described in the legend, and the red line shows
the distribution of ages found by following a randomly chosen edge in the network.

but then level out to a value that is nearly independent of the user   s age t (see for example the blue,
yellow and green lines). and from the    gure we notice that as t increases the variance in the distribution
increases. roughly speaking, younger individuals have most of their friends within a small age range
while older individuals have a much wider range. none of this behavior is evident when comparing to
the distribution of ages at the end of a randomly chosen edge, the red line, which is centered around 20.
so while it is obvious that age matters to our social relationships, the facebook social network shows
non-trivial asymmetric patterns, consistent across user ages t.

switching to gender, we compute the id155 p(g   |g) that a random neighbor of indi-
viduals with gender g has gender g    where we denote male by m and female by f . for friends of male
users, we    nd that p(f |m ) = 0.5131 and p(m |m ) = 0.4869. for friends of female users, we    nd that
p(f |f ) = 0.5178 and p(m |f ) = 0.4822. in both cases, we see that a random neighbor is more likely to
be female.

in order to understand this result, we compare to the id203 of following a randomly selected edge
and arriving at a particular gender. these probabilities are given by p(f ) = 0.5156 and p(m ) = 0.4844
respectively. the id203 is higher for females because the number of edge ends, called stubs in the
networks literature, connected to females is higher than for males. while there are roughly 30 million
fewer active female users on facebook, the average female degree (198) is larger than the average male
degree (172), resulting in p(f ) > p(m ).

comparing these quantities, we see that p(f |m ) < p(f ) < p(f |f ) and p(m |f ) < p(m ) < p(m |m ).
however, the magnitude of the di   erence between these probabilities is extremely small and only di   ers
in the thousandths place. so if there is a preference for same gender friendships on facebook, the e   ect
appears minimal at most.

lastly, we turn to country of origin, a categorical variable divided into 249 categories according to the
iso 3166-1 country code standard. these labels are attributed to users based on the user   s most recent ip
address login source and known correspondences between ip addresses and geographic locations. while
imperfect, so-called geo-ip data is generally reliable on a national level.

intuitively, we expect to have many more friends from our country of origin then from outside that

12

h
dp

i

k
l

u
a

z
n

h
t

y
m

g
s

k
h

w
t

s
u

o
d

r
p

x
m

a
c

e
v

l
c

r
a

y
u

o
c

r
c

t
g

c
e

e
p

o
b

s
e

h
g

b
g

a
z

o
j

e
a

l

i

w
k

z
d

n
t

k
tm

i

l
a

s
r

i

s

a
b

r
h

r
t

t
p

e
b

r
f

u
h

k
ed

i

o
n

e
s

z
c

g
b

r
g

id
ph
lk
au
nz
th
my
sg
hk
tw
us
do
pr
mx
ca
ve
cl
ar
uy
co
cr
gt
ec
pe
bo
es
gh
gb
za
il
jo
ae
kw
dz
tn
it
mk
al
rs
si
ba
hr
tr
pt
be
fr
hu
ie
dk
no
se
cz
bg
gr

figure 9. normalized country adjacency matrix. matrix of edges between countries with > 1
million users and > 50% facebook penetration shown on a log scale. to normalize, we divided each
element of the adjacency matrix by the product of the row country degree and column country degree.

country, and the data shows that 84.2% percent of edges are within countries. so the network divides fairly
cleanly along country lines into network clusters or communities. this mesoscopic-scale organization is
to be expected as facebook captures social relationships divided by national borders. we can further
quantify this division using the modularity q [37] which is the fraction of edges within communities
minus the expected fraction of edges within communities in a randomized version of the network that
preserves the degrees for each individual [38], but is otherwise random. in this case, the communities
are the countries. the computed value is q = 0.7486 which is quite large [39] and indicates a strongly
modular network structure at the scale of countries. especially considering that unlike numerous studies
using the modularity to detect communities, we in no way attempted to maximize it directly, and instead
merely utilized the given countries as community labels.

we visualize this highly modular structure in fig. 9. the    gure displays a heatmap of the number
of edges between the 54 countries where the active facebook user population exceeds one million users
and is more than 50% of the internet-enabled population [40]. to be entirely accurate, the shown matrix
contains each edge twice, once in both directions, and therefore has twice the number of edges in diagonal
elements. the number of edges was normalized by dividing the ijth entry by the row and column sums,
equal to the product of the degrees of country i and j. the ordering of the countries was then determined
via complete linkage hierarchical id91.

13

while most of the edges in the    gure are on the diagonal, the log-scale clearly highlights further
modular structure in friendships between countries. the countries fall into groups, the clearly square-like
patterns in the matrix, with preferential friendship patterns amongst citizens of di   erent countries.

the complete list of countries in the order presented in the matrix is shown in table 1. many of the
resulting country groupings are intuitive according to geography. for example, there are clear groups
corresponding to the south paci   c, north and central america, south america, north africa and the
middle east, eastern europe and the mediterranean, and to the nordic countries of denmark, sweden,
and norway. other more curious groupings, not clearly based on geography, include the combination of
the united kingdom, ghana, and south africa, which may re   ect strong historical ties. the    gure clearly
demonstrates that not only are friendships predominantly between users within the same country, but
that friendships between countries are also highly modular, and apparently in   uenced by geography. the
in   uence of geographical distance on friendship has been previously discussed [41,42], but earlier work on
facebook has not examined the country-scale structure of friendships [43]. speculating, some groupings of
countries may be better explained by historical and cultural relations than simple geographical distance.

discussion

in this paper, we have characterized the structure of the facebook social graph using many metrics and
tools. to our knowledge, our study is the largest structural analysis of a social network performed to
date.

we began by characterizing the degree distribution which was shown to be skewed with a large variance
in friendship count. unlike many other networks, a pure power-law was seen to be inappropriate for the
degree distribution of facebook, although hubs certainly exist.

the small-world e   ect and six degrees of separation were then con   rmed on a truly global scale. the
average distance between vertices of the giant component was found to be 4.7, and we interpret this result
as indicating that individuals on facebook have potentially tremendous reach. shared content only needs
to advance a few steps across facebook   s social network to reach a substantial fraction of the world   s
population.

we have found that the facebook social network is nearly fully connected, has short average path
lengths, and high id91. many other empirical networks, social and non-social, have also been
observed with these characteristics, and watts and strogatz called networks with these properties    small-
world networks    [44].

because our friends have more friends than we do, individuals on facebook have a surprisingly large
number of friends-of-friends. further, our friends are highly clustered and our friendships possess dense
cores, a phenomena not noticed in smaller social networks. this neighborhood structure has substantial
algorithmic implications for graph traversal computations. breadth-   rst search out to distance two will
potentially query a large number of individuals due to positive degree correlation, and then will follow
many edges to individuals already found due to the id91.

we also performed an exploratory comparison of the network structure with user traits including login
behavior, age, gender, and country. we found interesting mixing patterns, including that    your friends
login to facebook more than you do    and a strong preference for friends of around the same age and from
the same country.

community structure was shown to be clearly evident in the global network, at the scale of friendships
between and within countries. countries in turn were seen to themselves exhibit a modular organization,
largely dictated by geographical distance. unlike prior studies of networks, this community structure was
discovered without much e   ort, indicating the signi   cant structural insights that can be derived from
basic demographic information.

while our computations have elucidated many aspects of the structure of the world   s largest social
network, we have certainly not exhausted the possibilities of network analysis. we hope that this in-

14

formation is useful both for social science research and for the design of the next-generation of graph
algorithms and social network analysis techniques.

materials and methods

unless otherwise noted, calculations were performed on a hadoop cluster with 2,250 machines, using the
hadoop/hive data analysis framework developed at facebook [45, 46].

for analyzing network neighborhoods, 5,000 users were randomly selected using reservoir sampling for
each of 100 log-spaced neighborhood sizes, creating a sample of 500,000 users for which the analysis was
performed. the percentiles shown for the id91 coe   cient and degeneracy for each neighborhood
size are therefore empirical percentiles from this sample population of 5,000 users.

to analyze the component structure of the network, we used the newman-zipf (nz) algorithm [47].
the nz algorithm, a type of union-find algorithm with path compression, records component structure
dynamically as edges are added to a network that begins completely empty of edges. when all edges are
added, the algorithm has computed the component structure of the network. crucially for our purposes,
the nz algorithm does not require the edges to be retained in memory. we apply it to the facebook
network on a single computer with 64gb of ram by streaming over the list of edges.

for path length calculations, neighborhood functions were computed on a single 24-core machine with
72 gb of ram using the hyperanf algorithm [48], averaging across 10 runs. for the technical details
behind this formidable computation, see [27].

references

1. boyd dm, ellison nb (2007) social network sites: de   nition, history, and scholarship. journal of

computer-mediated communication 13: 210   230.

2. wasserman s, faust k (1994) social network analysis. cambridge: cambridge university press.

3. bonacich p (1987) power and centrality: a family of measures. american journal of sociology 92:

1170   1182.

4. bearman p, moody j (2004) suicide and friendships among american adolescents. american

journal of public health 94: 89.

5. newman m (2010) networks: an introduction. oxford university press.

6. easley d, kleinberg j (2010) networks, crowds, and markets: reasoning about a highly connected

world. cambridge university press.

7. ahn yy, han s, kwak h, moon s, jeong h (2007) analysis of topological characteristics of huge
online social networking services. in: proceedings of the 16th international conference on world
wide web. acm, pp. 835   844.

8. mislove a, marcon m, gummadi k, druschel p, bhattacharjee b (2007) measurement and analysis
in: proceedings of the 7th acm sigcomm conference on internet

of online social networks.
measurement. acm, pp. 29   42.

9. mislove a, koppula h, gummadi k, druschel p, bhattacharjee b (2008) growth of the flickr
social network. in: proceedings of the    rst workshop on online social networks. acm, pp. 25   30.

10. kumar r, novak j, tomkins a (2010) structure and evolution of online social networks. link

mining: models, algorithms, and applications : 337   357.

15

11. kwak h, lee c, park h, moon s (2010) what is twitter, a social network or a news media? in:

proceedings of the 19th international conference on world wide web. acm, pp. 591   600.

12. kossinets g, watts d (2006) empirical analysis of an evolving social network. science 311: 88.

13. eagle n, macy m, claxton r (2010) network diversity and economic development. science 328:

1029.

14. leskovec j, horvitz e (2008) planetary-scale views on a large instant-messaging network.

in:

proceeding of the 17th international conference on world wide web. acm, pp. 915   924.

15. jiang j, wilson c, wang x, huang p, sha w, et al. (2010) understanding latent interactions in
online social networks. in: proceedings of the 10th annual conference on internet measurement.
acm, pp. 369   382.

16. chang j, rosenn i, backstrom l, marlow c (2010) epluribus: ethnicity on social networks. in:

proceedings of the international conference in weblogs and social media.

17. traud a, kelsic e, mucha p, porter m (2008) community structure in online collegiate social

networks. preprint arxiv:0809.0690v2

18. lewis k, kaufman j, gonzalez m, wimmer a, christakis n (2008) tastes, ties, and time: a new

social network dataset using facebook.com. social networks 30: 330   342.

19. traud a, mucha p, porter m (2011) social structure of facebook networks.

preprint

arxiv:1102.2166.

20. golder s, wilkinson d, huberman b (2007) rhythms of social interaction: messaging within a

massive online network. communities and technologies 2007 : 41   66.

21. viswanath b, mislove a, cha m, gummadi k (2009) on the evolution of user interaction in

facebook. in: proceedings of the 2nd workshop on online social networks. acm, pp. 37   42.

22. catanese sa, de meo p, ferrara e, fiumara g, provetti a (2011) crawling facebook for social
network analysis purposes. in: proceedings of the international conference on web intelligence,
mining and semantics. acm, pp. 52:1   52:8.

23. gjoka m, kurant m, butts c, markopoulou a (2010) walking in facebook: a case study of unbiased
sampling of osns. in: proceedings of international conference on computer communications. ieee,
pp. 1   9.

24. barab  asi al, albert r (1999) emergence of scaling in random networks. science 286: 509-512.

25. clauset a, shalizi cr, newman mej (2009) power-law distributions in empirical data. siam

review 51: 661-703.

26. travers j, milgram s (1969) an experimental study of the small world problem. sociometry 32:

425-443.

27. backstrom l, boldi p, rosa m, ugander j, vigna s (2012) four degrees of separation. (in submis-

sion).

28. bollob  as b (2001) random graphs. cambridge university press.

29. eppstein d, strash d (2011) listing all maximal cliques in large sparse real-world graphs. exper-

imental algorithms : 364   375.

16

30. feld s (1991) why your friends have more friends than you do. american journal of sociology 96:

1464-1477.

31. newman mej (2002) assortative mixing in networks. physical review letters 89: 208701.

32. newman mej (2003) mixing patterns in networks. physical review e 67: 026126.

33. pastor-satorras r, v  azquez a, vespignani a (2001) dynamical and correlation properties of the

internet. physical review letters 87: 258701.

34. zuckerman e, jost j (2001) what makes you think you   re so popular? self-evaluation maintenance

and the subjective side of the    friendship paradox   . social psychology quarterly : 207   223.

35. maslov s, sneppen k, zaliznyak a (2004) detection of topological patterns in complex networks:

correlation pro   le of the internet. physica a 333: 529-540.

36. mcpherson m, smith-lovin l, cook jm (2001) birds of a feather: homophily in social networks.

annual review of sociology 27: 415-444.

37. newman mej, girvan m (2004) finding and evaluating community structure in networks. physical

review e 69: 026113.

38. molloy m, reed b (1995) a critical point for random graphs with a given degree sequence. random

structures and algorithms 6: 161-179.

39. fortunato s (2010) community detection in graphs. physics reports 486: 75-174.

40. miniwatts marketing group. internet world statistics. http://www.internetworldstats.com/.

accessed october 16, 2011.

41. liben-nowell d, novak j, kumar r, raghavan p, tomkins a (2005) geographic routing in social

networks. proceedings of the national academy of sciences usa. 33:11623-11628.

42. barth  elemy m (2010) spatial networks. physics reports 499: 1-101.

43. backstrom l, sun e, marlow c (2010) find me if you can: improving geographical prediction with
social and spatial proximity. in: proceedings of the 19th international conference on world wide
web. acm, pp. 61   70.

44. watts dj, strogatz sh (1998) collective dynamics of    small-world    networks. nature 393: 440-442.

45. thusoo a, shao z, anthony s, borthakur d, jain n, et al. (2010) data warehousing and analytics
infrastructure at facebook. in: proceedings of the 2010 international conference on management
of data. acm, pp. 1013   1020.

46. thusoo a, sarma j, jain n, shao z, chakka p, et al. (2010) hive   a petabyte scale data warehouse
using hadoop. in: proceedings of the 26th international conference on data engineering. ieee,
pp. 996   1005.

47. newman mej, zi    rm (2001) fast monte carlo algorithm for site or bond percolation. physical

review e 64: 016706.

48. boldi p, rosa m, vigna s (2011) hyperanf: approximating the neighbourhood function of very
large graphs on a budget. in: proceedings of the 20th international conference on world wide
web. acm, pp. 625   634.

17

country
indonesia
philipines
sri lanka
australia

new zealand

thailand
malaysia
singapore
hong kong

taiwan

united states

dominican republic

puerto rico

mexico
canda

venezuela

chile

argentina
uruguay
colombia
costa rica
guatemala

ecuador

peru
bolivia
spain
ghana

iso code

country

iso code

id
ph
lk
au
nz
th
my
sg
hk
tw
us
do
pr
mx
ca
ve
cl
ar
uy
co
cr
gt
ec
pe
bo
es
gh

united kingdom

south africa

israel
jordan

united arab emirates

kuwait
algeria
tunisia

italy

macedonia

albania
serbia
slovenia

bosnia and herzegovina

croatia
turkey
portugal
belgium
france
hungary
ireland
denmark
norway
sweden

czech republic

bulgaria
greece

gb
za
il
jo
ae
kw
dz
tn
it
mk
al
rs
si
ba
hr
tr
pt
be
fr
hu
ie
dk
no
se
cz
bg
gr

table 1. iso country codes used as labels in figure 9.

