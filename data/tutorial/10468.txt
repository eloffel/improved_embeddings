generating factoid questions with recurrent neural networks:

the 30m factoid question-answer corpus

iulian vlad serban       alberto garc    a-dur  an   (cid:5) caglar gulcehre   

sungjin ahn   

sarath chandar   

aaron courville   

yoshua bengio      

6
1
0
2

 

y
a
m
9
2

 

 
 
]
l
c
.
s
c
[
 
 

2
v
7
0
8
6
0

.

3
0
6
1
:
v
i
x
r
a

abstract

however,

over the past decade, large-scale super-
vised learning corpora have enabled ma-
chine learning researchers to make sub-
stantial advances.
to this
there are no large-scale question-
date,
answer corpora available.
in this paper
we present
the 30m factoid question-
answer corpus, an enormous question
answer pair corpus produced by apply-
ing a novel neural network architecture
on the knowledge base freebase to trans-
duce facts into natural language questions.
the produced question answer pairs are
evaluated both by human evaluators and
using automatic id74,
in-
cluding well-established machine trans-
lation and sentence similarity metrics.
across all evaluation criteria the question-
generation model outperforms the compet-
ing template-based baseline. furthermore,
when presented to human evaluators, the
generated questions appear comparable in
quality to real human-generated questions.

1

introduction

a major obstacle for training question-answering
(qa) systems has been due to the lack of labeled
data. the id53    eld has focused
on building qa systems based on traditional in-
formation retrieval procedures (lopez et al., 2011;

* first authors.
    university of montreal, canada

email: {iulian.vlad.serban,caglar.gulcehre,sungjin.ahn,
sarath.chandar.anbil.parthipan,aaron.courville,yoshua.bengio}@umontreal.ca

(cid:5) universit  e de technologie de compi`egne - cnrs,

france
email: alberto.garcia-duran@utc.fr

    cifar senior fellow

dumais et al., 2002; voorhees and tice, 2000).
more recently, researchers have started to utilize
large-scale knowledge bases (kbs) (lopez et al.,
2011), such as freebase (bollacker et al., 2008),
wikidata (vrande  ci  c and kr  otzsch, 2014) and
cyc (lenat and guha, 1989).1 id64 qa
systems with such structured knowledge is clearly
bene   cial, but it is unlikely alone to overcome the
lack of labeled data. to take into account the rich
and complex nature of human language, such as
paraphrases and ambiguity, it would appear that
labeled question and answer pairs are necessary.
the need for such labeled pairs is even more criti-
cal for training neural network-based qa systems,
where researchers until now have relied mainly on
hand-crafted rules and heuristics to synthesize ar-
ti   cial qa corpora (bordes et al., 2014; bordes et
al., 2015).

motivated by these recent developments, in this
paper we focus on generating questions based on
the freebase kb. we frame question generation as
a transduction problem starting from a freebase
fact, represented by a triple consisting of a sub-
ject, a relationship and an object, which is trans-
duced into a question about the subject, where
the object is the correct answer (bordes et al.,
2015). we propose several models, largely in-
spired by recent id4 mod-
els (cho et al., 2014; sutskever et al., 2014; bah-
danau et al., 2015), and we use an approach sim-
ilar to luong et al. (2015) for dealing with the
problem of rare-words. we evaluate the produced
questions in a human-based experiment as well as
with respect to automatic id74, in-
cluding the well-established machine translation
metrics id7 and meteor and a sentence simi-
larity metric. we    nd that the question-generation
model outperforms the competing template-based

1freebase is now a part of wikidata.

baseline, and, when presented to untrained human
evaluators, the produced questions appear to be in-
distinguishable from real human-generated ques-
tions. this suggests that the produced question-
answer pairs are of high quality and therefore that
they will be useful for training qa systems. fi-
nally, we use the best performing model to con-
struct a new factoid question answer corpus     the
30m factoid question-answer corpus     which is
made freely available to the research community.2

2 related work

question generation has attracted interest in recent
years with notable work by rus et al. (2010), fol-
lowed by the increasing interest from the natural
language generation (id86) community. a sim-
ple rule-based approach was proposed in different
studies as wh-fronting or wh-inversion (kalady et
al., 2010; ali et al., 2010). this comes at the
disadvantage of not making use of the semantic
content of words apart from their syntactic role.
the problem of determining the question type (e.g.
that a where-question should be triggered for loca-
tions), which requires knowledge of the category
type of the elements involved in the sentence, has
been addressed in two different ways: by using
named entity recognizers (mannem et al., 2010;
yao and zhang, 2010) or semantic role labelers
(chen et al., 2009). in curto et al. (2012) ques-
tions are split into classes according to their syn-
tactic structure, pre   x of the question and the cat-
egory of the answer, and then a pattern is learned
to generate questions for that class of questions.
after the identi   cation of key points, chen et
al. (2009) apply handcrafted-templates to generate
questions framed in the right target expression by
following the analysis of graesser et al. (1992),
who classify questions according to a taxonomy
consisting of 18 categories.

the works discussed so far propose ways to
map unstructured text to questions. this implies
a two-step process:    rst, transform a text into a
symbolic representation (e.g. a syntactic represen-
tation of the sentence), and second, transform the
symbolic representation of the text into the ques-
tion (yao et al., 2012). on the other hand, go-
ing from a symbolic representation (structured in-
formation) to a question, as we will describe in
the next section, only involves the second step.
closer to our approach is the work by olney et

2www.agarciaduran.org

al. (2012). they take triples as input, where the
edge relation de   nes the question template and the
head of the triple replaces the placeholder token in
the selected question template. in the same spirit,
duma et al. (2013) generate short descriptions
from triples by using templates de   ned by the rela-
tionship and replacing accordingly the placeholder
tokens for the subject and object.

our baseline is similar to that of olney et al.
(2012), where a set of relationship-speci   c tem-
plates are de   ned. these templates include place-
holders to replace the string of the subject. the
main difference with respect to their work is that
our baseline does not explicitly de   ne these tem-
plates.
instead, each relationship has as many
templates as there are different ways of framing a
question with that relationship in the training set.
this yields more diverse and semantically richer
questions by effectively taking advantage of the
fact-question pairs, which olney et al. did not have
access to in their experiments.

unlike the work by berant and liang (2014),
which addresses the problem of deterministically
generating a set of candidate logical forms with a
canonical realization in natural language for each,
our work addresses the inverse problem: given a
logical form (fact) it outputs the associated ques-
tion.

it should also be noted that recent work in ques-
tion answering have used simpler rule-based and
template-based approaches to generate synthetic
questions to address the lack of question-answer
pairs to train their models (bordes et al., 2014;
bordes et al., 2015).

3 task de   nition
3.1 knowledge bases
in general, a kb can be viewed as a multi-
relational graph, which consists of a set of
nodes (entities) and a set of edges (relation-
ships) linking nodes together. in freebase (bol-
lacker et al., 2008) these relationships are di-
rected and always connect exactly two enti-
ties.
in freebase the two enti-
ties    res creek and nantahala national forest are
linked together by the relationship contained by.
since the triple {   res creek, contained by, nan-
tahala national forest} represents a complete and
self-contained piece of information,
is also
called a fact where    res creek is the subject (head
of the edge), contained by is the relationship and

for example,

it

n(cid:89)

nantahala national forest is the object (tail of the
edge).

3.2 transducing facts to questions
we aim to transduce a fact into a question, such
that:

1. the question is concerned with the subject

and relationship of the fact, and

2. the object of the fact represents a valid an-

swer to the generated question.

we model this in a probabilistic framework as a
directed graphical model:

p (q|f ) =

p (wn|w<n, f ),

(1)

n=1

where f = (subject, relationship, object) rep-
resents the fact, q = (w1, . . . , wn ) represents the
question as a sequence of tokens w1, . . . , wn , and
w<n represents all the tokens generated before to-
ken wn. in particular, wn represents the question
mark symbol    ?   .

3.3 dataset
we use the simplequestions dataset (bordes et al.,
2015) in order to train our models. this is by far
the largest dataset of question-answer pairs created
by humans based on a kb. it contains over 100k
question-answer pairs created by users on amazon
mechanical turk3 in english based on the free-
base kb. in order to create the questions, human
participants were shown one whole freebase fact
at a time and they were asked to phrase a ques-
tion such that the object of the presented fact be-
comes the answer of the question.4 consequently,
both the subject and the relationship are explic-
itly given in each question. but indirectly char-
acteristics of the object may also be given since
the humans have an access to it as well. often
when phrasing a question the annotators tend to be
more informative about the target object by giving
speci   c information about it in the question pro-
duced. for example, in the question what city is
the american actress x from? the city name given
in the object informs the human participant that it
was in america - information, which was not pro-
vided by either the subject or relationship of the

3www.mturk.com
4it is not necessary for the object to be the only answer,

but it is required to be one of the possible answers.

questions
108,442

entities
131,684

relationships words
   77k

1,837

table 1: statistics of simplequestions

fact. we have also observed that the questions are
often ambiguous: that is, one can easily come up
with several possible answers that may    t the spec-
i   cations of the question. table 1 shows statistics
of the dataset.

4 model
we propose to attack the problem with the models
inspired by the recent success of neural machine
translation models (sutskever et al., 2014; bah-
danau et al., 2015). intuitively, one can think of
the transduction task as a    lossy translation    from
structured knowledge (facts) to human language
(questions in natural language), where certain as-
pects of the structured knowledge is intentionally
left out (e.g. the name of the object). these models
typically consist of two components: an encoder,
which encodes the source phrase into one or sev-
eral    xed-size vectors, and a decoder, which de-
codes the target phrase based on the results of the
encoder.

4.1 encoder
in contrast
to the id4
framework, our source language is not a proper
language but instead a sequence of three vari-
ables making up a fact. we propose an encoder
sub-model, which encodes each atom of the fact
into an embedding. each atom {s, r, o}, may
stand for subject, relationship and object, respec-
tively, of a fact f = (s, r, o) is represented as
a 1-of-k vector xatom, whose embedding is ob-
tained as eatom = einxatom, where ein     rdenc  k
is the embedding matrix of the input vocabulary
and k is the size of that vocabulary. the en-
coder transforms this embedding into enc(f )atom
    rhdec as enc(f )atom = wenceatom, where wenc
    rhdec  denc.

this embedding matrix, ein, could be another
parameter of the model to be learned, however, as
discussed later (see section 4.3), we have learned
it separately and beforehand with transe (bordes
et al., 2013), a model aimed at modeling this kind
of multi-relational data. we    x it and do not allow
the encoder to tune it during training.
we call fact embedding enc(f )     r3hdec the
concatenation [enc(f )s, enc(f )r, enc(f )o] of

the atom embeddings, which is the input for the
next module.

4.2 decoder
for the decoder, we use a gru recurrent neu-
ral network (id56) (cho et al., 2014) with an
attention-mechanism (bahdanau et al., 2015) on
the encoder representation to generate the associ-
ated question q to that fact f . recently, it has
been shown that the gru id56 performs equally
well across a range of tasks compared to other
id56 architectures, such as the lstm id56 (gr-
eff et al., 2015). the hidden state of the decoder
id56 is computed at each time step n as:
gr
n =   (wreoutwn   1 + crc(f, hn   1) + urhn   1)
(2)
gu
n =   (wueoutwn   1 + cuc(f, hn   1) + uuhn   1)
(3)
(4)

  h = tanh(w eoutwn   1 + cc(f, hn   1)

+ u (gr

n     hn   1))
n     hn   1 + (1     gu

n)       h,

hn = gu
(5)
where    is the sigmoid function, s.t.   (x)     [0, 1],
and the circle,    , represents element-wise mul-
tiplication. the initial state h0 of this id56 is
given by the output of a feedforward neural net-
work fed with the fact embedding. the product
eoutwn     rddec is the decoder embedding vec-
tor corresponding to the word wn (coded as a 1-
of-v vector, with v being the size of the output
vocabulary), the variables ur, uu, u, cr, cu, c    
rhdec  hdec, wr, wu, w     rhdec  ddec are the pa-
rameters of the gru and c(f, hn   1) is the con-
text vector (de   ned below eq. 6). the vector gr
is called the reset gate, gu as the update gate
and   h the candidate activation. by adjusting gr
and gu appropriately, the model is able to cre-
ate linear skip-connections between distant hid-
den states, which in turn makes the credit as-
signment problem easier and the gradient signal
stronger to earlier hidden states. then, at each
time step n the set of probabilities of word to-
kens is given by applying a softmax layer over
votanh(vhhn + vweoutwn   1 + vcc(f, hn   1)),
where vo     rv   hdec, vh, vc     rhdec  hdec and
vw     rhdec  ddec. lastly, the function c(f, hn   1)
is computed using an attention-mechanism:

c(f, hn   1) =   s,n   1enc(f )s +   r,n   1enc(f )r
(6)

+   o,n   1enc(f )o,

figure 1:
the computational graph of the
question-generation model, where enc(f ) is the
fact embedding produced by the encoder model,
and c(f, hn   1) for n = 1, . . . , n is the fact rep-
resentation weighed according to the attention-
mechanism, which depends on both the fact f
and the previous hidden state of the decoder id56
hn   1 . for the sake of simplicity, the attention-
mechanism is not shown explicitly.

are

where   s,n   1,   r,n   1,   r,n   1
real-valued
scalars, which weigh the contribution of the
subject, relationship and object representations.
they correspond to the attention of the model,
and are computed by applying a one-layer neural
network with tanh-activation function on the
encoder representations of the fact, enc(f ), and
the previous hidden state of the id56, hn   1,
followed by the sigmoid function to restrict the
attention values to be between zero and one. the
need for the attention-mechanism is motivated by
the intuition that the model needs to attend to the
subject only once during the generation process
while attending to the relationship at all other
times during the generation process. the model is
illustrated in figure 1.

4.3 modeling the source language
a particular problem with the model presented
above is related to the embeddings for the enti-
ties, relationships and tokens, which all have to
be learned in one way or another.
if we learn
these naively on the simplequestions training set,

the model will perform poorly when it encoun-
ters previously unseen entities, relationships or to-
kens. furthermore, the multi-relational graph de-
   ned by the facts in simplequestions is extremely
sparse, i.e. each node has very few edges to other
nodes, as can be expected due to high ratio of
unique entities over number of examples. there-
fore, even for many of the entities in simpleques-
tions, the model may perform poorly if the embed-
ding is learned solely based on the simpleques-
tions dataset alone.

on the source side, we can resolve this is-
sue by initializing the subject, relationship and
object embeddings to those learned by apply-
ing multi-relational embedding-based models to
the knowledge base. multi-relational embedding-
based models (bordes et al., 2011) have recently
become popular to learn distributed vector embed-
dings for knowledge bases, and have shown to
scale well and yield good performance. due to
its simplicity and good performance, we choose
to use transe (bordes et al., 2013) to learn such
embeddings. transe is a translation-based model,
whose energy function is trained to output low val-
ues when the fact expresses true information, i.e. a
fact which exists in the knowledge base, and other-
wise high values. formally, the energy function is
de   ned as f (s, r, o) = ||es + er     eo||2, where es,
er and eo are the real-valued embedding vectors
for the subject, relationship and object of a fact.
further details are given by bordes et al. (2013).

embeddings for entities with few connections
are easy to learn, yet the quality of these embed-
dings depends on how inter-connected they are. in
the extreme case where the subject and object of a
triple only appears once in the dataset, the learned
embeddings of the subject and object will be se-
mantically meaningless. this happens very often
in simplequestions, since only around 5% of the
entities have more than 2 connections in the graph.
thus, by applying transe directly over this set of
triples, we would eventually end up with a lay-
out of entities that does not contain clusters of se-
mantically close concepts. in order to guarantee
an effective semantic representation of the embed-
dings, we have to learn them together with addi-
tional triples extracted from the whole freebase
graph to complement the simplequestions graph
with relevant information for this task.

we need a coarse representation for the entities
contained in simplequestions, capturing the ba-

sic information, like the profession or nationality,
the annotators tend to use when phrasing the ques-
tions, and accordingly we have ensured the em-
beddings contain this information by taking triples
coming from the freebase graph5 regarding:

1. category

given
this

relationship,

information:

by
the
type/instance
ensures
that all the entities of the same semantic
category are close to each other. although
one might think that the expected category of
the subject/object could be inferred directly
from the relationship, there are    ne-grained
differences in the expected types that be
extracted only directly by observing this
category information.

2. geographical

information:

sometimes
the annotators have included information
which french
about nationality (e.g.
or location (e.g. where
president. . . ?)
in germany. . . ?)
of the subject and/or
this information is given by
object.
the
and
location/contained by. by including these
facts in the learning, we ensure the existence
of a    ne-grained layout of the embeddings
regarding this information within a same
category.

relationships person/nationality

3. gender:

similarly, sometimes annotators
have included information about gender (e.g.
which male audio engineer. . . ?). this in-
formation is given by the relationship per-
son/gender.

to this end, we have included more than
300, 000 facts from freebase in addition to the
facts in simplequestions for training. table 2
shows the differences in the embeddings before
and after adding additional facts for training the
transe representations.

4.4 generating questions
to resolve the problem of data sparsity and previ-
ously unseen words on the target side, we draw in-
spiration from the placeholders proposed for han-
dling rare words in id4 by
luong et al. (2015). for every question and an-
swer pair, we search for words in the question

5extracted from one of the latest freebase dumps (down-
loaded by mid-august 2015) https://developers.
google.com/freebase/data

closest neighbors to warner bros. entertainment manchester
ricky anane
lee dixon
jerri bryne
greg wood

billy gibbons
jenny lewis
lies of love
sword   sh

sq

sq + fb

paramount pictures

sony pictures entertainment

electronic arts

cbs

oxford
sale

liverpool
guildford

hindi language
nepali indian

naseeb

ghar ek mandir
standard chinese
dutch language
italian language
danish language
bengali language

table 2: examples of differences in the local structure of the vector space embeddings when adding more
fb facts

which overlap with words in the subject string of
the fact.6 we heuristically estimate the sequence
of most likely words in the question, which cor-
respond to the subject string. these words are
then replaced by the placeholder token <place-
holder>. for example, given the fact {   res creek,
contained by, nantahala national forest} the orig-
inal question which forest
is fires creek in?
is transformed into the question which forest is
<placeholder>in?. the model is trained on these
modi   ed questions, which means that model only
has to learn decoder embeddings for tokens which
are not in the subject string. at test time, after
outputting a question, all placeholder tokens are
replaced by the subject string and then the outputs
are evaluated. we call this the single-placeholder
(sp) model. the main difference with respect
to that of luong et al. (2015) is that we do not
use placeholder tokens in the input language, be-
cause then the entities and relationships in the in-
put would not be able to transmit semantic (e.g.
topical) information to the decoder. if we had in-
cluded placeholder tokens in the input language,
the model would not be able to generate informa-
tive words regarding the subject in the question
(e.g. it would be impossible for the model to learn
that the subject paris may be accompanied by the
words french city when generating a question, be-
cause it would not see paris but only a placeholder
token).

a single placeholder token for all question types
could unnecessarily limit the model. we there-
fore also experiment with another model, called
the multi-placeholder (mp) model, which uses 60
different placeholder tokens such that the place-
holder for a given question is chosen based on
the subject category extracted from the relation-
ship (e.g. contained by is classi   ed in the category
location, and so the transformed question would

6we use the tool dif   ib: https://docs.python.

org/2/library/difflib.html

be which forest is <location placeholder> in?).
this could make it easier for the model to learn
to phrase questions about a diverse set of entities,
but it also introduces additional parameters, since
there are now 60 placeholder embeddings to be
learned, and therefore the model may suffer from
over   tting. this way of addressing the sparsity in
the output reduces the vocabulary size to less than
7000 words.

4.5 template-based baseline
to compare our neural network models, we pro-
pose a (non-parametric) template-based baseline
model, which makes use of the entire training set
when generating a question. the baseline oper-
ates on questions modi   ed with the placeholder as
in the preceding section. given a fact f as in-
put, the baseline picks a candidate fact fc in the
training set at uniformly random, where fc has the
same relationship as f . then the baseline consid-
ers the questions corresponding to fc and as in the
sp model, in the    nal step the placeholder token
in the question is replaced by the subject string of
the fact f .

5 experiments

5.1 training procedure
all models were implemented using theano
(theano development team, 2016). to train
the neural network models, we optimized the
log-likelihood using the    rst-order gradient-based
optimization algorithm adam (kingma and ba,
2015). to decide when to stop training we used
early stopping with patience (bengio, 2012) on
the meteor score obtained for the validation set.
in all experiments, we use the default split of the
simplequestions dataset into training, validation
and test sets.

we trained transe embeddings with embedding
dimensionality 200 for each subject, relationship

and object. based on preliminary experiments, for
all neural network models we    xed the learning
rate to 0.00025 and clipped parameter gradients
with norms larger than 0.1. we further    xed the
embedding dimensionality of words to be 200, and
the hidden state of the decoder id56 to have di-
mensionality 600.

5.2 evaluation
to investigate the performance of our models, we
make use of both automatic id74 and
human evaluators.

et

al.,

2002)

5.2.1 automatic id74
id7 (papineni
and me-
teor (banerjee and lavie, 2005) are two
widely used id74 in statistical
machine translation and automatic image-caption
generation (chen et al., 2015). similar to sta-
tistical machine translation, where a phrase in
the source language is mapped to a phrase in the
target language, in this task a kb fact is mapped to
a natural language question. both tasks are highly
constrained, e.g. the set of valid outputs is limited.
this is true in particular for short phrases, such
as one sentence questions. furthermore, in both
tasks, the majority of valid outputs are paraphrases
of each other, which id7 and meteor have
been designed to capture. we therefore believe
that id7 and meteor constitute reasonable
performance metrics for evaluating the generated
questions.

although we believe that meteor and id7
are reasonable id74, they may have
not recognize certain paraphrases,
in particular
paraphrases of entities. we therefore also make
use of a sentence similarity metric, as proposed
by rus and lintean (2012), which we will denote
embedding greedy (emb. greedy). the metric
makes use of a word similarity score, which in
our experiments is the cosine similarity between
two id97 id27s (mikolov et al.,
2013).7 the metric    nds a (non-exclusive) align-
ment between words in the two questions, which
maximizes the similarity between aligned words,
and computes the sentence similarity as the mean
over the word similarities between aligned words.
exam-
ple questions produced by the model with mul-

the results are shown in table 3.

7we use the id97 embeddings pretrained on the
google news corpus: https://code.google.com/
p/id97/.

tiple placeholders are shown in table 4. the
neural network models outperform the template-
based baseline by a clear margin across all met-
rics. template-based baseline is already a rela-
tively strong model, because it makes use of a sep-
arate template for each relationship. given enough
training data this suggests that neural networks
are generally better at the question generation task
compared to hand-crafted template-based proce-
dures, and therefore that they may be useful for
generating id53 corpora. further-
more, it appears that the best performing models
are the models where transe are trained on the
largest set of triples (transe++). this set con-
tains, apart from the supporting triples described
in section 4.3, triples involving entities which are
highly connected to the entities found in the sim-
plequestions facts. in total, around 30 millions of
facts, which have been used to generate the 30m
factoid question-answer corpus. lastly, it is not
clear whether the model with a single placeholder
or the model with multiple placeholders performs
best. this motivates the following human evalua-
tion study.

5.2.2 human evaluation study
we carry out pairwise preference experiments on
amazon mechanical turk.

initially, we considered carrying out separate
experiments for measuring relevancy and    uency
respectively, since this is common practice in ma-
chine translation. however, the relevancy of a
question is determined solely by a single factor,
i.e. the relationship, since by construction the sub-
ject is always in the question. measuring rel-
evancy is therefore not very useful in our task.
to verify this we carried out an internal pairwise
preference experiment with human subjects, who
were repeatedly shown a fact and two questions
and asked to select the most relevant question.
we found that 93% of the questions generated
by the mp triples transe++ model were either
judged better or at least as good as the human gen-
erated questions w.r.t. relevancy. the remaining
7% questions of the mp triples transe++ model
questions were also judged relevant questions, al-
though less so compared to the human generated
questions.
in the next experiment, we therefore
measure the holistic quality of the questions.

we setup experiments comparing: human-
baseline (human and baseline questions), human-
mp (human and mp triples transe++ ques-

model
baseline
sp triples
mp triples

sp triples transe++
mp triples transe++

id7 meteor emb. greedy
31.36
33.27
32.76
33.32
33.28

33.12
35.07
34.97
35.38
35.29

74.02
76.72
76.70
76.78
77.01

table 3: test performance for all models w.r.t. id7, meteor and emb. greedy performance met-
rics, where sp indicates models with a single placeholder and mp models with multiple placeholders.
transe++ indicates models where the transe embeddings have been pretrained on a larger set of triples.
the best performance on each metric is marked in bold font.

fact

bayuvi dupki

    contained by    

europe
illinois

    contains    

ludlow township

neo contra
    publisher    

konami
pop music
    artists    
nikki    ores

human

where is bayuvi dupki?

what is in illinois?

who published
neo contra?

baseline

what state is the city
of bayuvi dupki located
in?
what
found in illinois?

tributary

is

a

which company pub-
lished the game neo
contra?

what artist is known for
pop music?

an example of pop music is
what artist?

mp triples transe++

what continent
dupki in?

is bayuvi

what is the name of a place
within illinois?

who is the publisher for the
computer videogame neo
contra?
who   s
american
singer that plays pop
music?

an

table 4: test examples and corresponding questions using the template-based baseline and mp triples
transe++ model. for more examples, please refer to the supplementary material.

tions) and baseline-mp (baseline and mp triples
transe++ questions). we show human evaluators
a fact along with two questions, one question from
each model for the corresponding fact, and ask the
them to choose the question which is most relevant
to the fact and most natural. the human evaluator
also has the option of not choosing either question.
this is important if both questions are equally
good or if neither of the questions make sense. at
the beginning of each experiment, we show the hu-
man evaluators two examples of statements and a
corresponding pair of questions, where we brie   y
explain the form of the statements and how ques-
tions relate to those statements. following the in-
troductory examples, we present the facts and cor-
responding pair of questions one by one. to avoid
presentation bias, we randomly shuf   e the order
of the examples and the order in which questions
are shown by each model. during each experi-
ment, we also show four check facts and corre-
sponding check questions at random, which any
attentive human annotator should be able to an-
swer easily. we discard responses of human eval-
uators who fail any of these four checks.

the preference of each example is de   ned as
the question which is preferred by the majority of
the evaluators. examples where neither of the two

questions are preferred by the majority of the eval-
uators, i.e. when there is an equal number of eval-
uators who prefer each question, are assigned to a
separate preference class called    comparable   .8

the results are shown in table 5.

in total,
3, 810 preferences were recorded by 63 indepen-
dent human evaluators. the questions produced
by each model model pair were evaluated in 5
batches (hits). each human evaluated 44-75 ex-
amples (facts and corresponding question pairs) in
each batch and each example was evaluated by 3-5
evaluators. in agreement with the automatic eval-
uation metrics, the human evaluators strongly pre-
fer either the human or the neural network model
over the template-based baseline. furthermore, it
appears that humans cannot distinguish between
the human-generated questions and the neural net-
work questions, on average showing a preference
towards the later over the former ones. we hypoth-
esize this is because our model penalizes uncom-
mon and unnatural ways to frame questions9 and,
sometimes,
includes speci   c information about

8the probabilities for the    comparable    class in table 5
can be computed in each row as 100 minus the third and
fourth column in the table.

9upon further inspection, we believe that some questions
of the simplequestions dataset have been produced by non-
native english speakers.

model a
human
baseline mp triples transe++
human mp triples transe++

model b
baseline

model a preference (%) model b preference (%)

   56.329    5.469
32.484    5.180
38.652    5.684

34.177    5.230
   60.828    5.399
51.418    5.833

fleiss    kappa

0.242
0.234
0.182

table 5: pairwise human evaluation preferences computed across evaluators with 95% con   dence inter-
vals. the preferred model in each experiment is marked in bold font. an asterisk next to the preferred
model indicates a statistically signi   cance likelihood-ratio test, which shows that the model is preferred
in at least half of the presented examples with 95% con   dence. the name mp triples transe++ indi-
cates the model with multiple placeholders and transe embeddings pretrained on a larger set of triples.
the last column shows the fleiss    kappa averaged across batches (hits) with different evaluators and
questions.

the target object that the humans do not (see last
example of table 4). this con   rms our earlier as-
sertion, that the neural network questions can be
used for building id53 systems.

6 conclusion

we propose new neural network models for map-
ping knowledge base facts into corresponding nat-
ural language questions. the neural networks
combine ideas from recent neural network ar-
chitectures for id151, as
well as multi-relational knowledge base embed-
dings for overcoming sparsity issues and place-
holder techniques for handling rare words. the
produced question and answer pairs are evalu-
ated using automatic id74, includ-
ing id7, meteor and sentence similarity, and
are found to outperform a template-based baseline
model. when evaluated by untrained human sub-
jects, the question and answer pairs produced by
our best performing neural network appear com-
parable in quality to the real human-generated
questions. finally, we use our best performing
neural network model to generate a corpus of 30m
question and answer pairs, which we hope will en-
able future researchers to improve their question
answering systems.

acknowledgments

the authors acknowledge ibm research, nserc,
canada research chairs and cifar for fund-
ing. the authors thank yang yu, bing xiang,
bowen zhou and gerald tesauro for constructive
feedback, and antoine bordes, nicolas usunier,
sumit chopra and jason weston for providing
the simplequestions dataset. this research was
enabled in part by support provided by calcul
qubec (www.calculquebec.ca) and com-
pute canada (www.computecanada.ca).

references
[ali et al.2010] husam ali, yllias chali, and sadid a
hasan. 2010. automation of question generation
in proceedings of qg2010: the
from sentences.
third workshop on question generation, pages 58   
67.

[bahdanau et al.2015] dzmitry bahdanau, kyunghyun
cho, and yoshua bengio. 2015. neural machine
translation by jointly learning to align and translate.
in international conference on learning represen-
tations.

[banerjee and lavie2005] satanjeev banerjee and alon
lavie. 2005. meteor: an automatic metric for
mt evaluation with improved correlation with human
judgments. in proceedings of the acl workshop on
intrinsic and extrinsic evaluation measures for ma-
chine translation and/or summarization, volume 29,
pages 65   72.

[bengio2012] yoshua bengio.

2012. practical rec-
ommendations for gradient-based training of deep
in neural networks: tricks of the
architectures.
trade, pages 437   478. springer.

[berant and liang2014] jonathan berant and percy
liang. 2014. id29 via id141. in
proceedings of acl, volume 7, pages 1415   1425.

[bollacker et al.2008] kurt bollacker, colin evans,
praveen paritosh, tim sturge, and jamie taylor.
2008. freebase: a collaboratively created graph
database for structuring human knowledge. in pro-
ceedings of the 2008 acm sigmod international
conference on management of data, pages 1247   
1250.

[bordes et al.2011] antoine bordes, jason weston, ro-
nan collobert, and yoshua bengio. 2011. learning
structured embeddings of knowledge bases. in aaai
2011.

[bordes et al.2013] antoine bordes, nicolas usunier,
alberto garcia-duran, jason weston, and oksana
yakhnenko.
2013. translating embeddings for
modeling multi-relational data. in advances in neu-
ral information processing systems, pages 2787   
2795.

[bordes et al.2014] antoine bordes, jason weston, and
nicolas usunier.
2014. open question answer-
ing with weakly supervised embedding models. in
machine learning and knowledge discovery in
databases - european conference, (ecml pkdd),
pages 165   180.

[bordes et al.2015] antoine bordes, nicolas usunier,
sumit chopra, and jason weston. 2015. large-
scale simple id53 with memory net-
works. arxiv preprint arxiv:1506.02075.

[chen et al.2009] wei chen, gregory aist, and jack
2009. generating questions automati-
mostow.
in proceedings of
cally from informational text.
the 2nd workshop on question generation (aied
2009), pages 17   24.

[chen et al.2015] xinlei chen, hao fang, tsung-yi
lin, ramakrishna vedantam, saurabh gupta, pi-
otr dollar, and c. lawrence zitnick. 2015. mi-
crosoft coco captions: data collection and eval-
uation server. arxiv preprint arxiv:1504.00325.

[cho et al.2014] kyunghyun cho, bart van merrien-
boer, caglar gulcehre, fethi bougares, holger
schwenk, and yoshua bengio.
2014. learning
phrase representations using id56 encoder-decoder
in proceedings
for id151.
of the conference on empirical methods in natural
language processing, pages 1724   1734.

[curto et al.2012] sergio curto, a mendes, and luisa
coheur. 2012. question generation based on lexico-
syntactic patterns learned from the web. dialogue
and discourse, 3(2):147   175.

[duma and klein2013] daniel duma and ewan klein.
2013. generating natural language from linked data:
unsupervised template extraction. acl, pages 83   
94.

[dumais et al.2002] susan dumais, michele banko,
eric brill, jimmy lin, and andrew ng. 2002. web
id53: is more always better? in pro-
ceedings of the 25th annual international acm si-
gir conference on research and development in in-
formation retrieval, pages 291   298.

[graesser et al.1992] arthur c graesser, sallie e gor-
don, and lawrence e brainerd. 1992. quest: a
model of id53. computers and math-
ematics with applications, 23(6):733   745.

[greff et al.2015] klaus greff, rupesh kumar srivas-
tava, jan koutn    k, bas r steunebrink, and j  urgen
schmidhuber.
lstm: a search space
odyssey. arxiv preprint arxiv:1503.04069.

2015.

[kalady et al.2010] saidalavi kalady, ajeesh elikkottil,
and rajarshi das. 2010. natural language question
generation using syntax and keywords. in proceed-
ings of qg2010: the third workshop on question
generation, pages 1   10. questiongeneration. org.

[kingma and ba2015] diederik kingma and jimmy
ba. 2015. adam: a method for stochastic optimiza-
tion. in the international conference on learning
representations.

[lenat and guha1989] douglas b. lenat and ra-
building large
manathan v. guha.
knowledge-based systems; representation and infer-
ence in the cyc project. addison-wesley longman
publishing co., inc.

1989.

[lopez et al.2011] vanessa lopez, victoria uren,
marta sabou, and enrico motta. 2011. is question
answering    t for the semantic web?
a survey.
semantic web, 2(2):125   155.

[luong et al.2015] minh-thang luong, ilya sutskever,
quoc v le, oriol vinyals, and wojciech zaremba.
2015. addressing the rare word problem in neural
machine translation. in proceedings of acl, pages
11   19.

[mannem et al.2010] prashanth mannem,

rashmi
prasad, and aravind joshi. 2010. question gen-
eration from paragraphs at upenn: qgstec system
description. in proceedings of qg2010: the third
workshop on question generation, pages 84   91.

[mikolov et al.2013] tomas mikolov, ilya sutskever,
kai chen, greg s corrado, and jeff dean. 2013.
distributed representations of words and phrases
in advances in neural
and their compositionality.
information processing systems, pages 3111   3119.

[olney et al.2012] andrew m olney, arthur c
graesser, and natalie k person. 2012. question
dialogue and
generation from concept maps.
discourse, 3(2):75   99.

[papineni et al.2002] kishore papineni, salim roukos,
todd ward, and wei-jing zhu.
2002. id7: a
method for automatic evaluation of machine trans-
in proceedings of the 40th annual meeting
lation.
on acl, pages 311   318.

[rus and lintean2012] vasile rus and mihai lintean.
2012. a comparison of greedy and optimal assess-
ment of natural language student input using word-
in proceedings of the
to-word similarity metrics.
seventh workshop on building educational appli-
cations using nlp, naacl, pages 157   162.

[rus et al.2010] vasile rus, brendan wyse, paul pi-
wek, mihai lintean, svetlana stoyanchev, and cris-
tian moldovan. 2010. the    rst question generation
shared task evaluation challenge. in proceedings of
the 6th international id86
conference, pages 251   257.

[sutskever et al.2014] ilya sutskever, oriol vinyals,
and quoc v. le. 2014. sequence to sequence learn-
in advances in neural
ing with neural networks.
information processing systems.

[theano development team2016] theano

develop-
ment team. 2016. theano: a python framework
for fast computation of mathematical expressions.
arxiv e-prints, abs/1605.02688, may.

[voorhees and tice2000] ellen m voorhees

and
dm tice. 2000. overview of the trec-9 question
answering track. in trec.

[vrande  ci  c and kr  otzsch2014] denny vrande  ci  c and
markus kr  otzsch. 2014. wikidata: a free collabora-
tive knowledgebase. communications of the acm,
57(10):78   85.

[yao and zhang2010] xuchen yao and yi zhang.
2010. question generation with minimal recursion
in proceedings of qg2010: the third
semantics.
workshop on question generation, pages 68   75.

[yao et al.2012] xuchen yao, gosse bouma,

and
yi zhang. 2012. semantics-based question genera-
tion and implementation. dialogue and discourse,
3(2):11   42.

a supplemental material: generated questions

fact

make your mind

    format    
digital media

west air
    hubs    

airport

san diego international

fumihiko maki

    structures designed    

makuhari messe

sulfadoxine

    used to treat    
falciparum malaria

painting
    artists    

adam willaerts

africa

    recorded by    
dwight trible

tom larkin

    place musical career

began    
wellington
   lm director

    people with this

profession    
r. t. neason

abyss

    powers or abilities    

shapeshifting

drowning
    release    

laughter & lust
masse broberg

    country of nationality    

sweden

human
is make your

what
mind?

what west air   s hub?

baseline

what was the format for
the release make your
mind?
west air    ies out of
which airport?

mp triples transe++

what format is make your
mind released?

which airport is named after
the hub?

fumihiko maki
de-
signed what structure?

what park did fumihiko
maki help design?

what   s a structure designed
by fumihiko maki?

what does sulfadoxine
help treat?

what disease is sulfa-
doxine used to treat?

what is used to treat sulfa-
doxine?

which artist specialize
in painting?

whos an artist that spe-
cializes in painting?

what is the name of an artist
that creates visual painting?

who
released
recording africa?

the

where is
from?

tom larkin

what is the name if a
british indie rock band
that played the africa al-
bum?
where in the us is tom
larkin originally from?

who recorded africa?

where does tom larkin orig-
inate from?

name a famous    lm di-
rector?

who was a    lm direc-
tor?

name a person who works
as a    lm director?

what is abyss    power?

what is abyss   s power
or ability?

what is abyss   s special abil-
ity?

which release is drown-
ing on?

what is the release track
on drowning?

which track is part of
drowning?

where is masse broberg
from?

what is masse broberg   s
country of nationality?

country is masse

what
broberg from?

table 6: test examples and corresponding questions using the template-based baseline and mp triples
transe++.

fact

another day
    region    

united states of america

presque isle
    county    

aroostook county

africa

    release    

enjoy the mix

cherry

    drugs with this    avor    

tussin expectorant for adults

    notable types    

100 syrup
jack tafari

person

rendsburg

    people born here    

jost de jager

cuveglio

    contained by    

italy

eduards veidenbaums

    place of death    

russian empire

joe smith

    place of death    

somme

electro-industrial

    albums    

saw

in these arms
    composer    
richie sambora

baroque

    associated artworks    
the rainbow landscape

11664 kashiwagi

    orbits    

sun

harbord collegiate

institute

    notable types    

school

milwaukee

    neighborhoods    
arlington heights

cheryl hickey
    profession    

actor

human

baseline

where was another day
released?

which region was an-
other day released in?

mp triples transe++

which country was another
day released in?

what county contains
presque isle?

which
is
presque isle located in?

county

what county is presque isle
in?

what was africa re-
leased on?

what album includes
africa?

what is the release track on
africa?

name a cherry    avored
drug?

is a cherry    a-

what
vored drug?

what   s a drug that cherry
shaped like?

what organism is jack
tafari?

what
is
known as?

jack

tafari

what is jack tafari known
as?

who was born in rends-
burg?

who was born in rends-
burg?

who is a notable person that
was born in rendsburg?

what country is cuveg-
lio in?

where is the city of cu-
veglio located in?

what country is cuveglio lo-
cated in?

where was eduards vei-
denbaums deceased?

which city did eduards
veidenbaums die in?

where did eduards veiden-
baums die?

where did joe smith
die?

where did joe smith
die?

where did joe smith   s life
end?

is

what
industrial genre?

an electro-

who composed in these
arms?

which artwork is
baroque?

in

what does 11664 kashi-
wagi orbit?

what is harbord colle-
giate institute?

what neighborhood is
found in milwaukee?

what is cheryl hickey   s
profession?

a

album is

which
electro-industrial
album?
who is the creator of in
these arms?

name an artwork asso-
ciated with the baroque
art period movement?
which orbit has rela-
tionship with 11664
kashiwagi?
what
is harbord col-
legiate institute known
for being?

what   s a neighborhood
in the portland milwau-
kee?
what is cheryl hickey?

is the name of a

what
electro-industrial album?

who composed in these
arms?

what is a piece of art with a
baroque artwork?

around which main star
does 11664 kashiwagi grav-
itate?
what type of building is the
harbord collegiate institute?

what
is the name of a
neighborhood in milwau-
kee    orida?
what is cheryl hickey   s pro-
fession in the entertainment
industry?

table 7: test examples and corresponding questions using the template-based baseline and mp triples
transe++.

