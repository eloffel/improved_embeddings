how not to evaluate your dialogue system: an empirical study of
unsupervised id74 for dialogue response generation

chia-wei liu1   , ryan lowe1   , iulian v. serban2   , michael noseworthy1   ,

laurent charlin1, joelle pineau1

{chia-wei.liu,ryan.lowe,michael.noseworthy}@mail.mcgill.ca

1 school of computer science, mcgill university
{lcharlin, jpineau}@cs.mcgill.ca

2 diro, universit  e de montr  eal

7
1
0
2

 

n
a
j
 

3

 
 
]
l
c
.
s
c
[
 
 

2
v
3
2
0
8
0

.

3
0
6
1
:
v
i
x
r
a

iulian.vlad.serban@umontreal.ca

abstract

we investigate id74 for dialogue
response generation systems where supervised
labels, such as task completion, are not avail-
able. recent works in response generation
have adopted metrics from machine transla-
tion to compare a model   s generated response
to a single target response. we show that
these metrics correlate very weakly with hu-
man judgements in the non-technical twitter
domain, and not at all in the technical ubuntu
domain. we provide quantitative and quali-
tative results highlighting speci   c weaknesses
in existing metrics, and provide recommenda-
tions for future development of better auto-
matic id74 for dialogue systems.

1

introduction

an important aspect of dialogue response generation
systems, which are trained to produce a reasonable
utterance given a conversational context, is how to
evaluate the quality of the generated response. typi-
cally, evaluation is done using human-generated su-
pervised signals, such as a task completion test or a
user satisfaction score (walker et al., 1997; m  oller
et al., 2006; kamm, 1995), which are relevant when
the dialogue is task-focused. we call models opti-
mized for such supervised objectives supervised di-
alogue models, while those that do not are unsuper-
vised dialogue models.

this paper focuses on unsupervised dialogue re-
sponse generation models, such as chatbots. these

    denotes equal contribution.

models are receiving increased attention, partic-
ularly using end-to-end training with neural net-
works (serban et al., 2016; sordoni et al., 2015;
vinyals and le, 2015). this avoids the need to col-
lect supervised labels on a large scale, which can
be prohibitively expensive. however, automatically
evaluating the quality of these models remains an
open question. automatic id74 would
help accelerate the deployment of unsupervised re-
sponse generation systems.

faced with similar challenges, other natural lan-
guage tasks have successfully developed automatic
id74. for example, id7 (papineni
et al., 2002a) and meteor (banerjee and lavie,
2005) are now standard for evaluating machine
translation models, and id8 (lin, 2004) is often
used for id54. these metrics
have recently been adopted by dialogue researchers
(ritter et al., 2011; sordoni et al., 2015; li et al.,
2015; galley et al., 2015b; wen et al., 2015; li
et al., 2016). however these metrics assume that
valid responses have signi   cant word overlap with
the ground truth responses. this is a strong assump-
tion for dialogue systems, where there is signi   cant
diversity in the space of valid responses to a given
context. this is illustrated in table 1, where two rea-
sonable responses are proposed to the context, but
these responses do not share any words in common
and do not have the same semantic meaning.

in this paper, we investigate the correlation be-
tween the scores from several automatic evaluation
metrics and human judgements of dialogue response
quality, for a variety of response generation models.
we consider both statistical word-overlap similar-

context of conversation
speaker a: hey john, what do you want to do tonight?
speaker b: why don   t we go see a movie?
ground-truth response
nah, i hate that stuff, let   s do something active.
model response
oh sure! heard the    lm about turing is out!

table 1: example showing the intrinsic diversity
of valid responses in a dialogue. the (reasonable)
model response would receive a id7 score of 0.

ity metrics such as id7, meteor, and id8,
and id27 metrics derived from word
embedding models such as id97 (mikolov et
al., 2013). we    nd that all metrics show either
weak or no correlation with human judgements, de-
spite the fact that word overlap metrics have been
used extensively in the literature for evaluating dia-
logue response models (see above, and lasguido et
al. (2014)). in particular, we show that these metrics
have only a small positive correlation on the chitchat
oriented twitter dataset, and no correlation at all on
the technical ubuntu dialogue corpus. for the word
embedding metrics, we show that this is true even
though all metrics are able to signi   cantly distin-
guish between baseline and state-of-the-art models
across multiple datasets. we further highlight the
shortcomings of these metrics using: a) a statisti-
cal analysis of our survey   s results; b) a qualitative
analysis of examples from our data; and c) an explo-
ration of the sensitivity of the metrics.

our results indicate that a shift must be made in
the research community away from these metrics,
and highlight the need for a new metric that corre-
lates more strongly with human judgement.

2 related work

we focus on metrics that are model-independent,
i.e. where the model generating the response does
not also evaluate its quality; thus, we do not con-
sider word perplexity, although it has been used to
evaluate unsupervised dialogue models (serban et
al., 2015). this is because it is not computed on
a per-response basis, and cannot be computed for
retrieval models. further, we only consider met-
rics that can be used to evaluate proposed responses
against ground-truth responses, so we do not con-
sider retrieval-based metrics such as recall, which

has been used to evaluate dialogue models (schatz-
mann et al., 2005; lowe et al., 2015). we also do not
consider evaluation methods for supervised evalua-
tion methods.1

several recent works on unsupervised dialogue
systems adopt the id7 score for evaluation. rit-
ter et al. (2011) formulate the unsupervised learning
problem as one of translating a context into a candi-
date response. they use a statistical machine trans-
lation (smt) model to generate responses to various
contexts using twitter data, and show that it outper-
forms information retrieval baselines according to
both id7 and human evaluations. sordoni et al.
(2015) extend this idea using a recurrent language
model to generate responses in a context-sensitive
manner. they also evaluate using id7, however
they produce multiple ground truth responses by re-
trieving 15 responses from elsewhere in the corpus,
using a simple bag-of-words model. li et al. (2015)
evaluate their proposed diversity-promoting objec-
tive function for neural network models using id7
score with only a single ground truth response. a
modi   ed version of id7, deltaid7 (galley et
al., 2015b), which takes into account several human-
evaluated ground truth responses, is shown to have a
weak to moderate correlation to human judgements
using twitter dialogues. however, such human an-
notation is often infeasible to obtain in practice. gal-
ley et al. (2015b) also show that, even with sev-
eral ground truth responses available, the standard
id7 metric does not correlate strongly with hu-
man judgements.

there has been signi   cant previous work that
evaluates how well automatic metrics correlate with
human judgements in in both machine translation
(callison-burch et al., 2010; callison-burch et al.,
2011; bojar et al., 2014; graham et al., 2015)
and id86 (id86) (stent et
al., 2005; cahill, 2009; reiter and belz, 2009; es-
pinosa et al., 2010). there has also been work
criticizing the usefulness of id7 in particular for
machine translation (callison-burch et al., 2006).
while many of the criticisms in these works apply
to dialogue generation, we note that generating di-
alogue responses conditioned on the conversational

1evaluation methods in the supervised setting have been
well studied, see (walker et al., 1997; m  oller et al., 2006; joki-
nen and mctear, 2009).

context is in fact a more dif   cult problem. this is
because most of the dif   culty in automatically eval-
uating language generation models lies in the large
set of correct answers. dialogue response genera-
tion given solely the context intuitively has a higher
diversity (or id178) than translation given text in
a source language, or surface realization given some
intermediate form (artstein et al., 2009).

3 id74

given a dialogue context and a proposed response,
our goal is to automatically evaluate how appropri-
ate the proposed response is to the conversation. we
focus on metrics that compare it to the ground truth
response of the conversation. in particular, we inves-
tigate two approaches: word based similarity met-
rics and word-embedding based similarity metrics.

3.1 word overlap-based metrics
we    rst consider metrics that evaluate the amount
of word-overlap between the proposed response and
the ground-truth response. we examine the id7
and meteor scores that have been used for ma-
chine translation, and the id8 score that has
been used for id54. while these
metrics have been shown to correlate with human
judgements in their target domains (papineni et al.,
2002a; lin, 2004), they have not been thoroughly
investigated for dialogue systems.2

we denote the ground truth response as r (thus we
assume that there is a single candidate ground truth
response), and the proposed response as   r. the j   th
token in the ground truth response r is denoted by
wj, with   wj denoting the j   th token in the proposed
response   r.

id7. id7 (papineni et al., 2002a) analyzes
the co-occurrences of id165s in the ground truth
and the proposed responses.
it    rst computes an
id165 precision for the whole dataset (we assume
that there is a single candidate ground truth response

2to the best of our knowledge, only id7 has been eval-
uated in the dialogue system setting quantitatively by galley
et al. (2015a) on the twitter domain. however, they carried
out their experiments in a very different setting with multiple
ground truth responses, which are rarely available in practice,
and without providing any qualitative analysis of their results.

n(cid:88)

per context):

pn(r,   r) =

(cid:80)

(cid:80)

k min(h(k, r), h(k,   ri))

k h(k, ri)

where k indexes all possible id165s of length n and
h(k, r) is the number of id165s k in r.3 to avoid
the drawbacks of using a precision score, namely
that it favours shorter (candidate) sentences, the au-
thors introduce a brevity penalty. id7-n, where
n is the maximum length of id165s considered, is
de   ned as:

id7-n := b(r,   r) exp(

  n log pn(r,   r))

n=1

  n is a weighting that is usually uniform, and b(  ) is
the brevity penalty. the most commonly used ver-
sion of id7 uses n = 4. modern versions of
id7 also use sentence-level smoothing, as the ge-
ometric mean often results in scores of 0 if there is
no 4-gram overlap (chen and cherry, 2014). note
that id7 is usually calculated at the corpus-level,
and was originally designed for use with multiple
reference sentences.
meteor. the meteor metric (banerjee and
lavie, 2005) was introduced to address several
weaknesses in id7. it creates an explicit align-
ment between the candidate and target responses.
the alignment is based on exact token matching,
followed by id138 synonyms, stemmed tokens,
and then paraphrases. given a set of alignments, the
meteor score is the harmonic mean of precision
and recall between the proposed and ground truth
sentence.
id8. id8 (lin, 2004) is a set of evalua-
tion metrics used for id54. we
consider id8-l, which is a f-measure based on
the longest common subsequence (lcs) between
a candidate and target sentence. the lcs is a set of
words which occur in two sentences in the same or-
der; however, unlike id165s the words do not have
to be contiguous, i.e. there can be other words in be-
tween the words of the lcs.

3note that the min in this equation is calculating the num-
ber of co-occurrences of id165 k between the ground truth re-
sponse r and the proposed response   r, as it computes the fewest
appearances of k in either response.

(cid:80)

3.2 embedding-based metrics
an alternative to using word-overlap based metrics
is to consider the meaning of each word as de   ned
by a id27, which assigns a vector to
each word. methods such as id97 (mikolov et
al., 2013) calculate these embeddings using distribu-
tional semantics; that is, they approximate the mean-
ing of a word by considering how often it co-occurs
with other words in the corpus.4 these embedding-
based metrics usually approximate sentence-level
embeddings using some heuristic to combine the
vectors of the individual words in the sentence. the
sentence-level embeddings between the candidate
and target response are compared using a measure
such as cosine distance.

greedy matching. greedy matching is the one
embedding-based metric that does not compute
sentence-level embeddings. instead, given two se-
quences r and   r, each token w     r is greedily
matched with a token   w       r based on the cosine
similarity of their id27s (ew), and the
total score is then averaged across all words:

g(r,   r) =

w   r; max   w     r cos sim(ew, e   w)

|r|

gm (r,   r) =

g(r,   r) + g(  r, r)

2

this formula is asymmetric, thus we must average
the greedy matching scores g in each direction.
this was originally introduced for intelligent tutor-
ing systems (rus and lintean, 2012). the greedy
approach favours responses with key words that are
semantically similar to those in the ground truth re-
sponse.

embedding average. the embedding average
metric calculates sentence-level embeddings using
additive composition, a method for computing the
meanings of phrases by averaging the vector repre-
sentations of their constituent words (foltz et al.,
1998; landauer and dumais, 1997; mitchell and
lapata, 2008). this method has been widely used
in other domains, for example in textual similarity

4to maintain statistical independence between the task and
each performance metric, it is important that the word embed-
dings used are trained on corpora which do not overlap with the
task corpus.

tasks (wieting et al., 2015). the embedding aver-
age,   e, is de   ned as the mean of the word embed-
dings of each token in a sentence r:

(cid:80)
|(cid:80)
w   r ew
w(cid:48)   r ew(cid:48)| .

  er =

to compare a ground truth response r and retrieved
response   r, we compute the cosine similarity be-
tween their respective sentence level embeddings:
ea := cos(  er,   e  r).
vector extrema. another way to calculate
sentence-level embeddings is using vector ex-
trema (forgues et al., 2014). for each dimension
of the word vectors, take the most extreme value
amongst all word vectors in the sentence, and use
that value in the sentence-level embedding:

(cid:26) maxw   r ewd

minw   r ewd

erd =

if ewd > | minw(cid:48)   r ew(cid:48)d|
otherwise

where d indexes the dimensions of a vector; ewd is
the d   th dimensions of ew (w   s embedding). the
min in this equation refers to the selection of the
largest negative value, if it has a greater magnitude
than the largest positive value.

similarity between response vectors is again com-
puted using cosine distance.
intuitively, this ap-
proach prioritizes informative words over common
ones; words that appear in similar contexts will be
close together in the vector space. thus, common
words are pulled towards the origin because they
occur in various contexts, while words carrying im-
portant semantic information will lie further away.
by taking the extrema along each dimension, we are
thus more likely to ignore common words.

4 dialogue response generation models
in order to determine the correlation between au-
tomatic metrics and human judgements of response
quality, we obtain response from a diverse range of
response generation models in the recent literature,
including both retrieval and generative models.

4.1 retrieval models
ranking or retrieval models for dialogue systems
are typically evaluated based on whether they can
retrieve the correct response from a corpus of pre-
de   ned responses, which includes the ground truth

ubuntu dialogue corpus

embedding
averaging
0.536    0.003
0.571    0.003
0.650    0.003
0.130    0.003
0.580    0.003

greedy
matching

0.370    0.002
0.373    0.002
0.413    0.002
0.097    0.003
0.418    0.003

vector
extrema

0.342    0.002
0.353    0.002
0.376    0.001
0.089    0.002
0.384    0.002

embedding
averaging
0.483    0.002
0.531    0.002
0.597    0.002
0.593    0.002
0.599    0.002

r-tfidf
c-tfidf
de
lstm
hred

twitter corpus

greedy
matching

0.356    0.001
0.362    0.001
0.384    0.001
0.439    0.002
0.439    0.002

vector
extrema

0.340    0.001
0.353    0.001
0.365    0.001
0.420    0.002
0.422    0.002

table 2: models evaluated using the vector-based id74, with 95% con   dence intervals.

response to the conversation (schatzmann et al.,
2005). such systems can be evaluated using recall or
precision metrics. however, when deployed in a real
setting these models will not have access to the cor-
rect response given an unseen conversation. thus,
in the results presented below we remove one occur-
rence of the ground-truth response from the corpus
and ask the model to retrieve the most appropriate
response from the remaining utterances. note that
this does not mean the correct response will not ap-
pear in the corpus at all; in particular, if there ex-
ists another context in the dataset with an identical
ground-truth response, this will be available for se-
lection by the model.

we then evaluate each model by comparing the
retrieved response to the ground truth response of
the conversation. this closely imitates real-life de-
ployment of these models, as it tests the ability of
the model to generalize to unseen contexts.

tf-idf. we consider a simple term frequency
- inverse document frequency (tf-idf) retrieval
model (lowe et al., 2015). tf-idf is a statis-
tic that intends to capture how important a given
word is to some document, which is calculated as:
t   df(w, c, c) = f (w, c)    log
|{c   c:w   c}| , where c
is the set of all contexts in the corpus, f (w, c) indi-
cates the number of times word w appeared in con-
text c, n is the total number of dialogues, and the
denominator represents the number of dialogues in
which the word w appears.

n

in order to apply tf-idf as a retrieval model for
dialogue, we    rst compute the tf-idf vectors for
each context and response in the corpus. we then
return the response with the largest cosine similar-
ity in the corpus, either between the input context
and corpus contexts (c-tfidf), or between the in-
put context and corpus responses (r-tfidf).

dual encoder. next we consider the recurrent
neural network (id56) based architecture called the
dual encoder (de) model (lowe et al., 2015). the
de model consists of two id56s which respectively
compute the vector representation of an input con-
text and response, c, r     rn. the model then cal-
culates the id203 that the given response is the
ground truth response given the context, by taking
a weighted dot product: p(r is correct|c, r, m ) =
  (ct m r + b) where m is a matrix of learned pa-
rameters and b is a bias. the model is trained using
negative sampling to minimize the cross-id178 er-
ror of all (context, response) pairs. to our knowl-
edge, our application of neural network models to
large-scale retrieval in dialogue systems is novel.

id7-1
id7-2

spearman

0.1580
0.2030

p-value

0.12
0.043

pearson
0.2074
0.1300

p-value
0.038
0.20

table 4: correlation between id7 metric and
human judgements after removing stopwords and
punctuation for the twitter dataset.

mean score

   w <= 6    w >= 6

p-value

(n=47)
0.1724
0.0744
0.6587
0.2386
2.66

(n=53)
0.1009
0.04176
0.6246
0.2073
2.57

< 0.01
< 0.01
0.25
< 0.01
0.73

id7-1
id7-2
average
meteor
human

table 5: effect of differences in response length
for the twitter dataset,    w = absolute difference in
#words between a ground truth response and pro-
posed response

4.2 generative models
in addition to retrieval models, we also consider gen-
erative models. in this context, we refer to a model

metric
greedy
average
extrema
meteor
id7-1
id7-2
id7-3
id7-4
id8
human

spearman

0.2119
0.2259
0.2103
0.1887
0.1665
0.3576
0.3423
0.3417
0.1235
0.9476

twitter

p-value pearson
0.1994
0.034
0.1971
0.024
0.036
0.1842
0.1927
0.06
0.1288
0.098
0.3874
< 0.01
0.1443
< 0.01
< 0.01
0.1392
0.22
0.09714
< 0.01

1.0

p-value
0.047
0.049
0.067
0.055
0.2

< 0.01
0.15
0.17
0.34
0.0

spearman
0.05276
-0.1387
0.09243
0.06314
-0.02552
0.03819
0.0878
0.1218
0.05405
0.9550

ubuntu

p-value

0.6
0.17
0.36
0.53
0.8
0.71
0.38
0.23
0.5933
< 0.01

pearson
0.02049
-0.1631
-0.002903

0.1419
0.01929
0.0586
0.1116
0.1132
0.06401

1.0

p-value

0.84
0.10
0.98
0.16
0.85
0.56
0.27
0.26
0.53
0.0

table 3: correlation between each metric and human judgements for each response. correlations shown in
the human row result from randomly dividing human judges into two groups.

as generative if it is able to generate entirely new
sentences that are unseen in the training set.

lstm language model. the baseline model is an
lstm language model (hochreiter and schmidhu-
ber, 1997) trained to predict the next word in the
(context, response) pair. during test time, the model
is given a context, encodes it with the lstm and
generates a response using a greedy id125
procedure (graves, 2013).

hred. finally we consider the hierarchical re-
current encoder-decoder (hred) (serban et al.,
2015).
in the traditional encoder-decoder frame-
work, all utterances in the context are concatenated
together before encoding. thus, information from
previous utterances is far outweighed by the most
recent utterance. the hred model uses a hier-
archy of encoders; each utterance in the context
passes through an    utterance-level    encoder, and the
output of these encoders is passed through another
   context-level    encoder, which enables the handling
of longer-term dependencies.

4.3 conclusions from an incomplete analysis
when id74 are not explicitly corre-
lated to human judgement, it is possible to draw
misleading conclusions by examining how the met-
rics rate different models. to illustrate this point,
we compare the performance of selected models ac-
cording to the embedding metrics on two different
domains:
the ubuntu dialogue corpus (lowe et
al., 2015), which contains technical vocabulary and
where conversations are often oriented towards solv-

ing a particular problem, and a non-technical twitter
corpus collected following the procedure of ritter
et al. (2010). we consider these two datasets since
they cover contrasting dialogue domains, i.e. tech-
nical help vs casual chit-chat, and because they are
amongst the largest publicly available corpora, mak-
ing them good candidates for building data-driven
dialogue systems.

results on the proposed embedding metrics are
shown in table 2. for the retrieval models, we ob-
serve that the de model signi   cantly outperforms
both tfidf baselines on all metrics across both
datasets. further, the hred model signi   cantly
outperforms the basic lstm generative model in
both domains, and appears to be of similar strength
as the de model. based on these results, one might
be tempted to conclude that there is some infor-
mation being captured by these metrics, that sig-
ni   cantly differentiates models of different qual-
ity. however, as we show in the next section,
the embedding-based metrics correlate only weakly
with human judgements on the twitter corpus, and
not at all on the ubuntu dialogue corpus. this
demonstrates that metrics that have not been specif-
ically correlated with human judgements on a new
task should not be used to evaluate that task.

5 human correlation analysis

data collection. we conducted a human survey
to determine the correlation between human judge-
ments on the quality of responses, and the score as-
signed by each metric. we aimed to follow the pro-
cedure for the evaluation of id7 (papineni et al.,

(a) twitter

(b) ubuntu

figure 1: scatter plots showing the correlation between metrics and human judgements on the twitter
corpus (a) and ubuntu dialogue corpus (b). the plots represent id7-2 (left), embedding average (center),
and correlation between two randomly selected halves of human respondents (right).

2002a). 25 volunteers from the computer science
department at the author   s institution were given a
context and one proposed response, and were asked
to judge the response quality on a scale of 1 to 5.5;
a 1 indicates that the response is not appropriate or
sensible given the context, and a 5 indicates that the
response is very reasonable. out of the 25 respon-
dents, 23 had cohen   s kappa scores    > 0.2 w.r.t.
the other respondents, which is a standard measure
for inter-rater agreement (cohen, 1968). the 2 re-
spondents with    < 0.2, indicating slight agree-
ment, were excluded from the analysis below. the
median    score was approximately 0.55, roughly in-
dicating moderate to strong annotator agreement.

each volunteer was given 100 questions per
dataset. these questions correspond to 20 unique
contexts, with 5 different responses: one utterance

5studies asking humans to evaluate text often rate different
aspects separately, such as    adequacy   ,       uency    and    informa-
tiveness    of the text (hovy, 1999; papineni et al., 2002b) our
evaluation focuses on adequacy. we did not consider    uency
because 4 out of the 5 proposed responses to each context were
generated by a human. we did not consider informativeness be-
cause in the domains considered, it is not necessarily important
(in twitter), or else it seems to correlate highly with adequacy
(in ubuntu).

randomly drawn from elsewhere in the test set, the
response selected from each of the tf-idf, de, and
hred models, and a response written by a human
annotator. these were chosen as they cover the
range of qualities almost uniformly (see figure 1).

survey results. we present correlation results be-
tween the human judgements and each metric in ta-
ble 3. we compute the pearson correlation, which
estimates linear correlation, and spearman correla-
tion, which estimates any monotonic correlation.

the    rst observation is that in both domains the
id7-4 score, which has previously been used to
evaluate unsupervised dialogue systems, shows very
weak if any correlation with human judgement. in
fact we found that the id7-3 and id7-4 scores
were near-zero for a majority of response pairs; for
id7-4, only four examples had a score > 10   9.
despite this, they still correlate with human judge-
ments on the twitter corpus at a rate similar to
id7-2. this is because of the smoothing con-
stant, which gives a tiny weight to unigrams and bi-
grams despite the absence of higher-order id165s.
id7-3 and id7-4 behave as a scaled, noisy ver-
sion of id7-2; thus, if one is to evaluate dialogue

context of conversation
a: dearest! question. how many thousands of people
can panaad occupy?
b: @user panaad has <number> k seat capacity while rizal
has <number> k thats why they choose rizal i think .
ground truth response
a: now i know about the siting capacity . thanks for the
info @user great evening.
proposed response
a: @user makes sense. thanks!

context of conversation
a: never felt more sad than i am now
b: @user aww why ?
a: @user @user its a long story ! sure you wanna know
it ? bahaha and thanks for caring btw <heart>
ground truth response
a: @user i don    t mind to hear it i    ve got all day and
youre welcome <number>
proposed response
a: @user i know , i    m just so happy for you ! ! ! ! ! ! ! !
! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !

figure 2: examples where the metrics rated the response poorly and humans rated it highly (left), and the
converse (right). both responses are given near-zero score by id7-n for n> 1. while no metric will
perform perfectly on all examples, we present these examples to provide intuition on how example-level
errors become aggregated into poor correlation to human judgements at the corpus-level.

responses with id7, we recommend the choice of
n = 2 over n = 3 or 4. note that using a test cor-
pus larger than the size reported in this paper may
lead to stronger correlations for id7-3 and id7-
4, due to a higher number of non-zero scores.

it is interesting to note that, while some of the em-
bedding metrics and id7 show small positive cor-
relation in the non-technical twitter domain, there
is no metric that signi   cantly correlates with hu-
mans on the ubuntu dialogue corpus. this is likely
because the correct ubuntu responses contain spe-
ci   c technical words that are less likely to be pro-
duced by our models. further, it is possible that re-
sponses in the ubuntu dialogue corpus have intrin-
sically higher variability (or id178) than twitter
when conditioned on the context, making the eval-
uation problem signi   cantly more dif   cult.

figure 1 illustrates the relationship between met-
rics and human judgements. we include only the
best performing metric using word-overlaps, i.e. the
id7-2 score (left), and the best performing met-
ric using id27s, i.e. the vector average
(center). these plots show how weak the correlation
is: in both cases, they appear to be random noise.
it seems as though the id7 score obtains a pos-
itive correlation because of the large number of re-
sponses that are given a score of 0 (bottom left cor-
ner of the    rst plot). this is in stark contrast to the
inter-rater agreement, which is plotted between two
randomly sampled halves of the raters (right-most
plots). we also calculated the id7 scores after
removing stopwords and punctuation from the re-
sponses. as shown in table 4, this weakens the cor-

relation with human judgements for id7-2 com-
pared to the values in table 3, and suggests that
id7 is sensitive to factors that do not change the
semantics of the response.

finally, we examined the effect of response length
on the metrics, by considering changes in scores
when the ground truth and proposed response had
a large difference in word counts. table 4 shows
that id7 and meteor are particularly sensitive
to this aspect, compared to the embedding average
metric and human judgement.

in order

qualitative analysis.
to determine
speci   cally why the metrics fail, we examine qual-
itative samples where there is a disagreement be-
tween the metrics and human rating. although these
only show inconsistencies at the example-level, they
provide some intuition as to why the metrics don   t
correlate with human judgements at the corpus-
level. we present in figure 2 two examples where all
of the embedding-based metrics and id7-1 score
the proposed response signi   cantly differently than
the humans.

the left of figure 2 shows an example where
the embedding-based metrics score the proposed re-
sponse lowly, while humans rate it highly.
it is
clear from the context that the proposed response
is reasonable     indeed both responses intend to ex-
press gratitude. however, the proposed response
has a different wording than the ground truth re-
sponse, and therefore the metrics are unable to sep-
arate the salient words from the rest. this sug-
gests that the embedding-based metrics would ben-

e   t from a weighting of word saliency.

the right of the    gure shows the reverse scenario:
the embedding-based metrics score the proposed re-
sponse highly, while humans do not. this is most
likely due to the frequently occurring    i    token, and
the fact that    happy    and    welcome    may be close
together in the embedding space. however, from
a human perspective there is a signi   cant semantic
difference between the responses as they pertain to
the context. metrics that take into account the con-
text may be required in order to differentiate these
responses. note that in both responses in figure 2,
there are no overlapping id165s greater than un-
igrams between the ground truth and proposed re-
sponses; thus, all of id7-2,3,4 would assign a
score near 0 to the response.

6 discussion

we have shown that many metrics commonly used
in the literature for evaluating unsupervised dialogue
systems do not correlate strongly with human judge-
ment. here we elaborate on important issues arising
from our analysis.

constrained tasks. our analysis focuses on rela-
tively unconstrained domains. other work, which
separates the dialogue system into a dialogue plan-
ner and a id86 component
for applications in constrained domains, may    nd
stronger correlations with the id7 metric. for ex-
ample, wen et al. (2015) propose a model to map
from dialogue acts to natural language sentences and
use id7 to evaluate the quality of the generated
sentences. since the mapping from dialogue acts to
natural language sentences has lower diversity and
is more similar to the machine translation task, it
seems likely that id7 will correlate better with
human judgements. however, an empirical inves-
tigation is still necessary to justify this.

incorporating multiple responses. our correla-
tion results assume that only one ground truth re-
sponse is available given each context. indeed, this
is the common setting in most of the recent literature
on training end-to-end conversation models. there
has been some work on using a larger set of auto-
matically retrieved plausible responses when evalu-
ating with id7 (galley et al., 2015b). however,

there is no standard method for doing this in the lit-
erature. future work should examine how retriev-
ing additional responses affects the correlation with
word-overlap metrics.
searching for suitable metrics. while we pro-
vide evidence against existing metrics, we do not
yet provide good alternatives for unsupervised eval-
uation. despite the poor performance of the word
embedding-based metrics in this survey, we believe
that metrics based on distributed sentence represen-
tations hold the most promise for the future. this
is because word-overlap metrics will simply require
too many ground-truth responses to    nd a signi   cant
match for a reasonable response, due to the high di-
versity of dialogue responses. as a simple example,
the skip-thought vectors of kiros et al. (2015) could
be considered. since the embedding-based metrics
in this paper only consist of basic averages of vectors
obtained through id65, they are
insuf   ciently complex for modeling sentence-level
compositionality in dialogue. instead, these metrics
can be interpreted as calculating the topicality of a
proposed response (i.e. how on-topic the proposed
response is, compared to the ground-truth).

all of the metrics considered in this paper directly
compare a proposed response to the ground-truth,
without considering the context of the conversation.
however, metrics that take into account the context
could also be considered. such metrics could come
in the form of an evaluation model that is learned
from data. this model could be either a discrim-
inative model that attempts to distinguish between
model and human responses, or a model that uses
data collected from the human survey in order to
provide human-like scores to proposed responses.
finally, we must consider the hypothesis that learn-
ing such models from data is no easier than solving
the problem of dialogue response generation. if this
hypothesis is true, we must concede and always use
human evaluations together with metrics that only
roughly approximate human judgements.

references
[artstein et al.2009] r. artstein, s. gandhe, j. gerten, a.
leuski, and d. traum. 2009. semi-formal evalua-
tion of conversational characters. in languages: from
formal to natural, pages 22   35. springer.

[banerjee and lavie2005] s. banerjee and a. lavie.
2005. meteor: an automatic metric for mt evalua-
tion with improved correlation with human judgments.
in proceedings of the acl workshop on intrinsic and
extrinsic evaluation measures for machine translation
and/or summarization.

[bojar et al.2014] o. bojar, c. buck, c. federmann, b.
haddow, p. koehn, j. leveling, c. monz, p. pecina,
m. post, h. saint-amand, et al. 2014. findings of the
2014 workshop on id151. in
proceedings of the ninth workshop on statistical ma-
chine translation, pages 12   58. association for com-
putational linguistics baltimore, md, usa.

[cahill2009] a. cahill. 2009. correlating human and au-
tomatic evaluation of a german surface realiser.
in
proceedings of the acl-ijcnlp 2009 conference
short papers, pages 97   100. association for compu-
tational linguistics.

[callison-burch et al.2006] c. callison-burch, m. os-
borne, and p. koehn. 2006. re-evaluation the role
of id7 in machine translation research. in eacl, vol-
ume 6, pages 249   256.

[callison-burch et al.2010] c. callison-burch, p. koehn,
c. monz, k. peterson, m. przybocki, and o. f. zaidan.
2010. findings of the 2010 joint workshop on sta-
tistical machine translation and metrics for machine
translation. in proceedings of the joint fifth workshop
on id151 and metricsmatr,
pages 17   53. association for computational linguis-
tics.

[callison-burch et al.2011] c. callison-burch, p. koehn,
c. monz, and o. f. zaidan. 2011. findings of the
2011 workshop on id151. in
proceedings of the sixth workshop on statistical ma-
chine translation, pages 22   64. association for com-
putational linguistics.

[chen and cherry2014] b. chen and c. cherry. 2014.
a systematic comparison of smoothing techniques for
sentence-level id7. acl 2014, page 362.

[cohen1968] j. cohen. 1968. weighted kappa: nominal
scale agreement provision for scaled disagreement or
partial credit. psychological bulletin, 70(4):213.

[espinosa et al.2010] d. espinosa, r. rajkumar, m.
further meta-
white, and s. berleant.
in
evaluation of broad-coverage surface realization.
proceedings of the 2010 conference on empirical
methods in natural language processing, pages 564   
574. association for computational linguistics.

2010.

[foltz et al.1998] p. w. foltz, w. kintsch, and t. k. lan-
dauer. 1998. the measurement of textual coherence
with latent semantic analysis. discourse processes,
25(2-3):285   307.

[forgues et al.2014] g. forgues,

j.-m.
larcheveque, and r. tremblay. 2014. id64
id71 with id27s.

j. pineau,

[galley et al.2015a] m. galley, c. brockett, a. sordoni,
y. ji, m. auli, c. quirk, m. l, j. gao, and b. dolan.
2015a. deltaid7: a discriminative metric for gen-
eration tasks with intrinsically diverse targets. in pro-
ceedings of the annual meeting of the association for
computational linguistics and the international joint
conference on natural language processing (short
papers).

[galley et al.2015b] m. galley, c. brockett, a. sordoni,
y. ji, m. auli, c. quirk, m. mitchell, j. gao, and
b. dolan. 2015b. deltaid7: a discriminative metric
for generation tasks with intrinsically diverse targets.
arxiv preprint arxiv:1506.06863.

[graham et al.2015] y. graham, n. mathur, and t. bald-
win. 2015. accurate evaluation of segment-level ma-
in proc. of naacl-hlt,
chine translation metrics.
pages 1183   1191. citeseer.

[graves2013] a. graves. 2013. generating sequences
arxiv preprint

with recurrent neural networks.
arxiv:1308.0850.

[hochreiter and schmidhuber1997] s. hochreiter and j.
schmidhuber. 1997. long short-term memory. neu-
ral computation, 9(8):1735   1780.

[hovy1999] e. hovy. 1999. toward    nely differentiated
in pro-
id74 for machine translation.
ceedings of the eagles workshop on standards and
evaluation.

[jokinen and mctear2009] k. jokinen and m. mctear.

2009. spoken dialogue systems. morgan claypool.

[kamm1995] c. kamm. 1995. user interfaces for voice
applications. proceedings of the national academy of
sciences, 92(22):10031   10037.

[kiros et al.2015] r. kiros, y. zhu, r. r. salakhutdinov,
r. zemel, r. urtasun, a. torralba, and s. fidler. 2015.
skip-thought vectors. in advances in neural informa-
tion processing systems, pages 3276   3284.

[landauer and dumais1997] t. k. landauer and s. t. du-
mais. 1997. a solution to plato   s problem: the latent
semantic analysis theory of acquisition, induction, and
representation of knowledge. psychological review,
104(2):211.

[lasguido et al.2014] n. lasguido, s. sakti, g. neubig,
t. tomoki, and s. nakamura. 2014. utilizing human-
to-human conversation examples for a multi domain
chat-oriented dialog system. ieice transactions
on information and systems, 97(6):1497   1505.

[li et al.2015] j. li, m. galley, c. brockett, j. gao,
and b. dolan. 2015. a diversity-promoting objec-
tive function for neural conversation models. arxiv
preprint arxiv:1510.03055.

pages 157   162, stroudsburg, pa, usa. association
for computational linguistics.

[schatzmann et al.2005] j. schatzmann, k. georgila, and
s. young. 2005. quantitative evaluation of user sim-
ulation techniques for spoken dialogue systems.
in
6th special interest group on discourse and dialogue
(sigdial).

[serban et al.2015] i. v. serban, a. sordoni, y. bengio,
a. courville, and j. pineau. 2015. building end-to-
end dialogue systems using generative hierarchical
in aaai conference on arti   cial
neural networks.
intelligence.

[serban et al.2016] i. v. serban, a. sordoni, r. lowe,
l. charlin, j. pineau, a. courville, and y. bengio.
2016. a hierarchical latent variable encoder-decoder
arxiv preprint
model for generating dialogues.
arxiv:1605.06069.

[sordoni et al.2015] a. sordoni, m. galley, m. auli, c.
brockett, y. ji, m. mitchell, j. nie, j. gao, and b.
dolan. 2015. a neural network approach to context-
sensitive generation of conversational responses.
in
conference of the north american chapter of the as-
sociation for computational linguistics (naacl-hlt
2015).

[stent et al.2005] a. stent, m. marge, and m. singhai.
2005. evaluating evaluation methods for generation
in the presence of variation. in international confer-
ence on intelligent text processing and computational
linguistics, pages 341   351. springer.

[vinyals and le2015] o. vinyals and q. le.

2015.
arxiv preprint

a neural conversational model.
arxiv:1506.05869.

[walker et al.1997] m. walker, d. litman, c. kamm, and
a. abella. 1997. paradise: a framework for evalu-
in proceedings of the
ating spoken dialogue agents.
eighth conference on european chapter of the associ-
ation for computational linguistics, pages 271   280.
acl.

[wen et al.2015] t.-h. wen, m. gasic, n. mrksic, p.-h.
su, d. vandyke, and s. young.
2015. semanti-
cally conditioned lstm-based natural language gener-
arxiv preprint
ation for spoken dialogue systems.
arxiv:1508.01745.

[wieting et al.2015] j. wieting, m. bansal, k. gimpel,
and k. livescu. 2015. towards universal paraphrastic
sentence embeddings. corr, abs/1511.08198.

[li et al.2016] j. li, m. galley, c. brockett, j. gao, and
b. dolan. 2016. a persona-based neural conversation
model. arxiv preprint arxiv:1603.06155.

[lin2004] c.-y. lin. 2004. id8: a package for auto-
matic evaluation of summaries. in text summarization
branches out: proceedings of the acl-04 workshop,
volume 8.

[lowe et al.2015] r. lowe, n. pow, i. v. serban, and
j. pineau. 2015. the ubuntu dialogue corpus: a
large dataset for research in unstructured multi-turn di-
alogue systems. in sigdial.

[mikolov et al.2013] t. mikolov, i. sutskever, k. chen,
g. s. corrado, and j. dean. 2013. distributed repre-
sentations of words and phrases and their composition-
in advances in neural information processing
ality.
systems, pages 3111   3119.

[mitchell and lapata2008] j. mitchell and m. lapata.
2008. vector-based models of semantic composition.
in acl, pages 236   244.

[m  oller et al.2006] s. m  oller, r. englert, k. engelbrecht,
v. hafner, a. jameson, a. oulasvirta, a. raake, and
n. reithinger. 2006. memo: towards automatic us-
ability evaluation of spoken dialogue services by user
error simulations. in interspeech.

[papineni et al.2002a] k. papineni, s. roukos, t. ward,
and w. zhu. 2002a. id7: a method for automatic
evaluation of machine translation. in proceedings of
the 40th annual meeting on association for computa-
tional linguistics (acl).

[papineni et al.2002b] k. papineni, s. roukos, t. ward, j.
henderson, and f. reeder. 2002b. corpus-based com-
prehensive and diagnostic mt evaluation: initial ara-
bic, chinese, french, and spanish results. in proceed-
ings of the second international conference on human
language technology research, pages 132   137.

[reiter and belz2009] e. reiter and a. belz. 2009. an
investigation into the validity of some metrics for auto-
matically evaluating id86 sys-
tems. computational linguistics, 35(4):529   558.

[ritter et al.2010] a. ritter, c. cherry, and b. dolan.
2010. unsupervised modeling of twitter conversa-
tions. in north american chapter of the association
for computational linguistics (naacl).

[ritter et al.2011] a. ritter, c. cherry, and w. b. dolan.
2011. data-driven response generation in social me-
in proceedings of the conference on empirical
dia.
methods in natural language processing, pages 583   
593. association for computational linguistics.

[rus and lintean2012] v. rus and m. lintean. 2012. a
comparison of greedy and optimal assessment of natu-
ral language student input using word-to-word similar-
ity metrics. in proceedings of the seventh workshop
on building educational applications using nlp,

appendix
distribution of kappa scores
table 6 shows the full distribution over    scores for
each pair of human annotators. it is apparent that
most of the scores (88.9%) are over 0.4, indicating a
moderate agreement. this suggests that the task was
reasonable and well understood by the annotators.

  

> 0.2
> 0.3
> 0.4
> 0.5
> 0.6
> 0.7
> 0.8

# pairs % pairs
100%
253/253
251/253
99.2%
88.9%
225/253
64.0%
162/253
19.8%
50/253
3/253
1.2%
0%
0/253

table 6: distribution of pairwise    scores between
each pair of human annotators, other than the anno-
tators that were discarded due to low scores.

full scatter plots
we present the scatterplots for all of the metrics con-
sider and their correlation with human judgement, in
figures 3-7 below. as previously emphasized, there
is very little correlation for any of the metrics, and
the id7-3 and id7-4 scores are often close to
zero.

figure 3: scatter plots showing the correlation between two randomly chosen groups of human volunteers
on the twitter corpus (left) and ubuntu dialogue corpus (right).

(a) id8

figure 4: scatter plots showing the correlation between metrics and human judgement on the twitter corpus
(left) and ubuntu dialogue corpus (right). the plots represent id8 (a) and meteor (b).

(b) meteor

(a) vector extrema

(b) greedy matching

figure 5: scatter plots showing the correlation between metrics and human judgement on the twitter corpus
(left) and ubuntu dialogue corpus (right). the plots represent vector extrema (a), greedy matching (b), and
vector averaging (c).

(c) vector averaging

(a) id7-1

(b) id7-2

(c) id7-3

figure 6: scatter plots showing the correlation between metrics and human judgement on the twitter corpus
(left) and ubuntu dialogue corpus (right). the plots represent id7-1 (a), id7-2 (b), id7-3 (c), and
id7-4 (d).

(d) id7-4

