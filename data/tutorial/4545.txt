outline

morning program
preliminaries
modeling user behavior
semantic matching
learning to rank

afternoon program

entities
generating responses
recommender systems
industry insights
q & a

39

understanding user behavior is the key

modeling user behavior

the ability to accurately predict the behavior of a particular user

allows search engines to construct optimal result pages

40

user behavioral signals

modeling user behavior

actions
(e.g., click,    rst/last click, long click, satis   ed click, repeated click)
times between actions
(e.g., time between clicks, time to    rst/last click)

41

interpretation is di cult

modeling user behavior

biases in user behavior     (statistically signi   cant) di   erences
between id203 distributions of user behavioral signal observed in di   erent contexts

clicks are biased towards:

i higher ranked results (position bias)
i visually salient results (attention bias)
i previously unseen results (novelty bias)

click dwell times are biased

times to    rst/last/satis   ed clicks are biased

account for biases in clicks

42

applications of user behavior models

modeling user behavior

i understand users

i simulate users

i features for ranking

i evaluate search

43

outline

morning program
preliminaries
modeling user behavior

click behavior in web search
time aspects of user behavior in web search
web search vs. sponsored search
take aways and future work

semantic matching
learning to rank

afternoon program

entities
generating responses
recommender systems
industry insights
q & a

44

traditional click models

modeling user behavior

document ur 1

cr 1

   ur 1q

ar 1

er 1

...

document ur

cr

   urq

ar

er

...

graphical representation of the cascade click model.

pros: based on the probabilistic graphical model (pgm) framework
cons: structure of the underlying pgm has to be set manually

45

neural click modeling framework

modeling user behavior

user%query%

ini,alize%vector%state%
with%user%query%

update%vector%state%
with%document%1%

update%vector%state%
with%document%2%

update%vector%state%
with%document%3%

predict%click%on%
document%1%

k i p p e d %

s

predict%click%on%
document%2%

c

l i

c

k e d %

predict%click%on%
document%3%

   %

   %

   %

a neural click model for web search [borisov et al., 2016].

learns patterns of user behavior directly from click-through data

46

distributed representations (s0, s1, s2, . . .)

modeling user behavior

user%query%

ini,alize%vector%state%
with%user%query%

update%vector%state%
with%document%1%

update%vector%state%
with%document%2%

update%vector%state%
with%document%3%

predict%click%on%
document%1%

k i p p e d %

s

predict%click%on%
document%2%

c

l i

c

k e d %

predict%click%on%
document%3%

   %

   %

   %

we model user browsing behavior as a sequence of vector states (s0, s1, s2, . . .) that
describes the information consumed by the user as it evolves during a query session.

47

mappings i, u and function f

modeling user behavior

s0 = i(q)

sr+1 = u(sr, ir, dr+1)

user%query%

ini,alize%vector%state%
with%user%query%

update%vector%state%
with%document%1%

update%vector%state%
with%document%2%

update%vector%state%
with%document%3%

predict%click%on%
document%1%

k i p p e d %

s

predict%click%on%
document%2%

c

l i

c

k e d %

predict%click%on%
document%3%

   %

   %

   %

p (cr+1 = 1 | q, i1, . . . , ir, d1, . . . , dr+1) = f(sr+1)

q     user query
dr     document at rank r

ir     user interaction

with document at rank r

48

neural click modeling framework ! ncm{id56, lstm}

{qd, qd+q, qd+q+d}

modeling user behavior

representations of q, dr and ir

use three sets: qd, qd+q, qd+q+d

parameterization of i, u and f

feed-forward neural network
recurrent neural network (id56, lstm)

i
u
f feed-forward neural network

(with one output unit and the sigmoid activation function)

training

stochastic id119
(with adadelta update rules and gradient clipping)

49

modeling user behavior

experimental setup

dataset

yandex relevance prediction dataset1
(146, 278, 823 query sessions)

tasks and id74

click prediction task (log-likelihood, perplexity)
relevance prediction task (ndcg)

baselines

dynamic id110 (dbn), dependent click model (dcm)
click chain model (ccm), user browsing model (ubm)

50

results on click prediction task

modeling user behavior

click model

perplexity

log-likelihood

dbn
dcm
ccm
ubm
ncmid56
qd
ncmlstm
ncmlstm
qd+q
ncmlstm

qd

qd+q+d

1.3510
1.3627
1.3692
1.3431

1.3379
1.3362
1.3355
1.3318

 0.2824
 0.3613
 0.3560
 0.2646
 0.2564
 0.2547
 0.2545
 0.2526

di   erences between all pairs of click models are statistically signi   cant (p < 0.001)

51

results on relevance prediction task

modeling user behavior

click model

@1

@3

@5

@10

ndcg

dbn
dcm
ccm
ubm
ncmid56
qd
ncmlstm
ncmlstm
qd+q
ncmlstm

qd

qd+q+d

0.717
0.736
0.741
0.724

0.762
0.756
0.775
0.755

0.725
0.746
0.752
0.737

0.759
0.759
0.773
0.755

0.764
0.780
0.785
0.773

0.791
0.789
0.799
0.787

0.833
0.844
0.846
0.838

0.851
0.850
0.857
0.847

improvements of ncmid56
over baseline click models are statistically signi   cant (p < 0.05)

qd , ncmlstm

and ncmlstm
qd+q

qd

52

analysis

modeling user behavior

learns regularities in user browsing behavior that

1. have been manually encoded in existing click models, such as ranks and distances

to previous clicks (large clusters on id167 projections of vector states sr)

2. can not be manually encoded in traditional click models
(small clusters on id167 projections of vector states sr)

53

0.00.20.40.60.81.00.00.20.40.60.81.00123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123450.00.20.40.60.81.00.00.20.40.60.81.00123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123456789100123450.00.20.40.60.81.00.00.20.40.60.81.0012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345678910012345outline

morning program
preliminaries
modeling user behavior

click behavior in web search
time aspects of user behavior in web search
web search vs. sponsored search
take aways and future work

semantic matching
learning to rank

afternoon program

entities
generating responses
recommender systems
industry insights
q & a

54

times between user actions

modeling user behavior

time-to-   rst-click

time-between-clicks

time-from-abandoned-query

q	

c	

time-to-last-click

c	

q	

q	

time

i time-to-   rst-click (re   ects quality of result presentation)

i time-between-clicks (proxy for click dwell time)

i time-to-last-click (re   ects quality of search engine results)

i time-from-abandoned-query (re   ects quality of search engine results in query

sessions with no clicks)

55

how to interpret times between user actions

modeling user behavior

average

uncertainty:

1
2 (3 + 600) vs.

1
n

   i

nxi=1

bt =

1
7 (30 + 28 + 45 + 23 + 100 + 23 + 58)

56

how to interpret times between user actions

average

modeling user behavior

uncertainty:

1
2 (3 + 600) vs.

1
7 (30 + 28 + 45 + 23 + 100 + 23 + 58)

1
n

   i

nxi=1

bt =

fit distribution (e.g., exponential, gamma, weibull)

b    = arg max

   

nyi=1

f (   i |    )

context bias:

fhigh expectation(    = 15 |    1) vs.

flow expectation(    = 10 |    2)

56

detected context bias e   ect

modeling user behavior

57

406080100120140160180minimumnumberofobservationsincontextgroups0.00.10.20.30.40.50.60.70.8percentageofactionidswithobservedcontextbiaseffecttime-to-   rst-clicktime-between-clickstime-to-last-clicktime-from-abandoned-querysigni   cancelevel(0.05)context-aware time modeling (naive)

modeling user behavior

time(action, context)     gamma(k(act, ctx ),    (act, ctx ))

58

context-aware time modeling

modeling user behavior

time(action, context)     gamma(

ak(ctx )    k(act) + bk(ctx ),
a   (ctx )       (act) + b   (ctx ))

59

parameter estimation

modeling user behavior

time(action, context)     gamma(

ak(ctx )    k(act) + bk(ctx ),
a   (ctx )       (act) + b   (ctx ))

1. fix context-independent parameters
2. optimize context-dependent parameters using neural networks
3. fix context-dependent parameters
4. optimize context-independent using id119
5. repeat until convergence

60

parameter estimation

modeling user behavior

i we do not know the form of context-dependent parameters

=) neural networks

i we know the form of context-independent parameters (gamma distribution)

=) direct optimization

61

dataset

modeling user behavior

3 months of log data from yandex search engine

time between actions

max time # observations

time-to-   rst-click
time-between-clicks
time-to-last-click
time-from-abandoned-query

1 min
5 min
5 min
1 min

30, 747, 733
6, 317, 834
30, 446, 973
11, 523, 351

62

evaluation tasks

modeling user behavior

task1. predict time between clicks

i log-likelihood
i root mean squared error (mse)

task2. rank results based on time between clicks

i ndcg@{1, 3, 5, 10}

63

task 1. predicting time

modeling user behavior

time model

distribution

log-likelihood rmse

basic

context-aware

exponential
gamma
weibull

exponential
gamma
weibull

 4.9219
 4.9105
 4.9077
 4.8787
 4.8556
 4.8504

60.73
60.76
60.76

58.93
58.98
58.94

64

results on time prediction task (time-between-clicks)

modeling user behavior

65

1248163264128256timebetweenclicks(inseconds) 6.0 5.5 5.0 4.5 4.0 3.5 3.0log-likelihoodexponential(basic)exponential(context-aware)gamma(basic)gamma(context-aware)weibull(basic)weibull(context-aware)task 2. ranking results

modeling user behavior

ndcg

time model

distribution

@1

@3

@5

@10

average

   

0.651

0.693

0.728

0.812

context-aware

exponential
gamma
weibull

0.668
0.675
0.671

0.710
0.715
0.709

0.743
0.748
0.745

0.820
0.822
0.821

66

summary

modeling user behavior

i remove context bias from time between actions

i predict user search interactions better (task 1)

i use the context-independent component for better document ranking (task 2)

67

outline

morning program
preliminaries
modeling user behavior

click behavior in web search
time aspects of user behavior in web search
web search vs. sponsored search
take aways and future work

semantic matching
learning to rank

afternoon program

entities
generating responses
recommender systems
industry insights
q & a

68

web search vs. sponsored search

modeling user behavior

in web search we work (mostly) with query sessions and search sessions
in sponsored search we need to consider longer user histories

recurrent neural networks (id56s) can be used not only to account for biases,
but also to infer user interests and behavioral patterns
from very long sequences of user actions

sequential click prediction for sponsored search with recurrent neural
networks [zhang et al., 2014]

69

web search vs. sponsored search

modeling user behavior

figure 1: the framework of ccpm. the left part is an input instance (single ad impression or sequential
ad impression) with varied elements and the length of element embedding is d = 4. the architecture has
two convolutional layers with two feature maps each. the widths of    lters at two layers are three and two
respectively. the    exible pooling layer p1 changes with length of instance and the last pooling layer p2 = 2.

a convolutional click prediction model [liu et al., 2015]

70

                     instance matrix with varied lengthconvolution flexible poolingconvolutionpoolingpredictionfully connectedoutline

morning program
preliminaries
modeling user behavior

click behavior in web search
time aspects of user behavior in web search
web search vs. sponsored search
take aways and future work

semantic matching
learning to rank

afternoon program

entities
generating responses
recommender systems
industry insights
q & a

71

take aways and future work

modeling user behavior

neural networks     an alternative to probabilistic id114 (pgms)
that allows to learn patterns of user behavior directly from the data

understanding and modelling user behavior with pgms     is a mature    eld
we expect many ideas to be transfered from pgm to neural framework

future user behavior models

i will learn patterns of user behavior directly from the data
i will take very long user history into account
i will extract signals from images, videos, user voice and background sounds
i will improve our understanding of humankind

72

